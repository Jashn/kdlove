zk.onDocumentReady(['layouts','directory_card'],function(sVars){enquire.register(zk.MEDIA_QUERY.DESKTOP,{match:function(){$('.card-sidebar[data-fixed-always]').elfixeador({mt:90})}});if($('.js-breadcrumb-swiper').length>0){$('.js-breadcrumb-swiper').swiper({scrollbar:'.swiper-scrollbar',mousewheelControl:!0,direction:'horizontal',slidesPerView:'auto',freeMode:!0,})}});zk.onDocumentReady(['forms','wervice','info_request'],function(sVars){var register=zk.register({entrance:sVars.data.register_entrance});var isNewUser=!1;var singleDone=!1;var forms=zk.set(['wervice','info_request_forms'],zk.formManager());forms.add('single',{form_url:sVars.url.request_info_form,disable_submission:!0,init:function($form){var self=this;var $email=this.get('email','single');var $name=this.get('name','single');var $phone=this.get('phone','single');var $registerUrl=this.get('register_url','single');$registerUrl.val(location.href);zk.datepicker($('.datepicker',$form));$('.js-login-facebook',$form).click(function(e){register.facebook(function(response){if(response.user){$email.val(response.user.email);$name.val(response.user.name+' '+response.user.surname);$phone.val(response.user.phone);self.submit()}});return !1});this.focus('description','single');$email.blur(function(){_isLoginRequired($email,$form)});$form.find('.js-show-login').on('click',function(){register.login(function(response){$('.js-login-options',$form).slideUp();$email.attr('disabled',!0).addClass('disabled');$name.attr('disabled',!0).addClass('disabled');$phone.attr('disabled',!0).addClass('disabled');$email.val(response.user.email);$name.val(response.user.name);$phone.val(response.user.phone);forms.show();$('#login-info-request',$form).toggleClass('hide')},{email:$email.val()});return !1});$form.find('.js-cancel-login').on('click',function(){$email.val('').trigger('focus');$name.val('');$phone.val('');$('.js-login-options').slideUp();return !1})},before_submit:function(values){if(!values["single[description]"]){values["single[description]"]=this.get('description','single').attr('placeholder')}},on_disabled_submit:function(values){var self=this;_isLoginRequired(self.get('email','single'),self.get(),function(login){if(login){self.get().find('.js-show-login').trigger('click')}else{self.submit(values)}})},success:function(response){isNewUser=response.is_new_user;singleDone=!0;if(typeof ga!=='undefined'){if(isNewUser){ga('x.send','event','new-user','info-request');ga('send','event','new-user','info-request')}
ga('x.send','event','new-interaction','info-request');ga('send','event','new-interaction','info-request')}
if(isNewUser){zk.loadPixels(sVars.data.tracker_urls)}},error:function(response){if(response.error==1||response.error==2){if(response.error==2){$('.js-login-options').show()}}else if(response.error==3){this.close();zk.message({message:response.message,icon:zk.message.ICON.ALERT})}else{this.close()}}});forms.add('multi',{form_url:sVars.url.request_info_form,init:function($form){if(singleDone){$('.js-success-notification',$form).delay(400).fadeIn('slow',function(){$(this).delay(3000).fadeOut('slow')})}
$('.js-show-multi-textarea',$form).on('change',function(){var checked=$(this).is(':checked');var method=(checked?'show':'hide');$('.js-multi-request-textarea',$form)[method]()})},success:function(response){var buttonYes=isNewUser?sVars.translate.create_web:sVars.translate.contact_more;zk.message({template:sVars.message_template,button_yes:buttonYes,button_no:sVars.translate.close,cancel_on_close:!0,on_accept:function(){if(isNewUser){_shareSessionAndRedirect(response.url)}else{$('[data-info-request-id="'+response.ir_id+'"]').click()}},on_reject:function(){if(isNewUser){window.location.reload()}}})},load_error:function(response){if(response.error){this.close();zk.message({message:response.message})}}});var _shareSessionAndRedirect=function(url){register.shareSession(function(){zk.redirect(url)})};var _isLoginRequired=function($email,$form,callback){var loginRequired=!1;if($email.is('[readonly]')||!$email.val().length){if($.isFunction(callback)){callback(loginRequired)}
return}
$.ajax({type:"POST",url:sVars.url.email_in_use,data:{email:$email.val()},dataType:'json',success:function(response){if(response.error!==1){if(response.email_in_use){$form.find('.js-login-options').slideDown('fast',function(){$form.find('.js-show-login').trigger('click')});loginRequired=!0}else{$form.find('.js-login-options').slideUp();loginRequired=!1}}
if($.isFunction(callback)){callback(loginRequired)}}})}});zk.onDocumentReady(['forms','wervice','invitation'],function(sVars){var $invitationForm=$('#wrv-nvt-form');var $feedback=$('#wrv-nvt-form-status-icon');var $targetFeedback=$('#wrv-nvt-target-status-icon');var _bindBlurEvent=function(){$($invitationForm.selector).on('blur','#email',function(){$targetFeedback.statusIcon('loading');$.ajax({url:sVars.url.check_invitation_target,type:'post',data:{email:$(this).val(),type:sVars.data.subject_type,id:sVars.data.subject_id},dataType:'json',success:function(response){var $emailFieldParent=$('#email').parent();if(response.error){$targetFeedback.statusIcon('error');zk.message(response.message);return}
$targetFeedback.statusIcon();var html='';if(response.status&4){html=sVars.translate.user_already_added}else if(response.status&2){html=sVars.translate.invitation_already_done}else if(response.status&1){html=sVars.translate.email_of_registered_user+', '+response.profile}
var spanId="invitation_target_response";$('#'+spanId).remove();if(html){var $fieldMessage='<span id="'+spanId+'" class="info"></span>';$($fieldMessage).clone().html(html).appendTo($emailFieldParent)}}});return !1})};_bindBlurEvent();$($invitationForm.selector).on('submit',function(){$feedback.statusIcon('loading');$.ajax({url:sVars.url.send_invitation,type:'post',data:$(this).serialize(),dataType:'json',success:function(response){switch(response.error){case 1:$feedback.statusIcon();_loadIcons();break;case 2:zk.message(response.message);$feedback.statusIcon('error');break;case 0:$feedback.statusIcon();zk.form($invitationForm).clear();window.location.reload(!0)}}});return !1});if($.browser.msie){$($invitationForm.selector).on('click','input[type=submit]',function(){$(this).parents('form').trigger('submit');return !1})}
$($invitationForm.selector).on('click','#wrv-nvt-form-cancel-link',function(){$feedback.statusIcon();return !1})});zk.onDocumentReady(['forms','wervice','reply-reviews'],function(sVars){var forms={};var baseForm=zk.form({display_method:zk.form.DISPLAY.INLINE,form_url:sVars.url.process_reply_review,open:function($form){this.get('description').attr('id',zk.guid())},success:function(response){zk.redirect(response.redirect_url)}});$('[data-review-id]').click(function(){var that=this;var reviewId=$(that).data('review-id');if(!forms[reviewId]){forms[reviewId]=baseForm.clone({container:'#reply-review-placeholder-'+reviewId,template:$('#reply-review-form').clone().removeAttr('id')}).addCallback(zk.form.CALLBACK.INIT,function($form){this.setValue('id',reviewId);var $parentContainer=$(that).closest('[data-review]');if($parentContainer.length){this.setValue('description',$parentContainer.find('[data-review-content]').html())}})}
forms[reviewId].toggle();return !1});$('[data-remove-reply-review-id]').click(function(){var reviewId=$(this).data('remove-reply-review-id');zk.message({message:sVars.translate.confirm_delete,on_accept:function(){$.ajax({url:sVars.url.remove_reply_review,type:'post',dataType:'json',data:{id:reviewId},success:function(response){if(!response.error){zk.redirect(response.redirect_url)}}})}});return !1})});zk.onDocumentReady(['forms','wervice','request_reviews'],function(sVars){var _init=!1;var _errors=[];zk.set(['wervice','request_review_form'],zk.form({auto_close_on_success:!1,template:$('#modal-request-reviews'),form_url:sVars.url.process_request_review,init:function($form){_init=!1;var self=this;$('.button--reset',$form).click(function(){$('.tag').remove();self.close()})},open:function($form){if(_init){return}else{_init=!0}
$('.contactsTags',$form).tagsInput({width:'auto',height:'80px',defaultText:sVars.translate.add_email.toLowerCase()});if(_errors&&_errors.length){$.each(_errors,function(_,email){$('.tagsinput').find('span:contains('+email+')').addClass('not_valid')})}},success:function(){location.reload()},error:function(response){_errors=[];if(response.message&&response.message.contacts){$.each(response.message.contacts,function(_,message){var match=message.match(/'(.+?)'/);if(match){_errors.push(match[1])}})}}}))});zk.onDocumentReady(['forms','wervice','reviews'],function(sVars){var register=zk.register({entrance:sVars.data.registrationEntrance,auto_close_on_success:!0});var _currentRates={};var _relatedHiddenId=function(id){id='rating-'+id;return id.replace(/-rate$/,'')};var _setRateOnHidden=function(element,value){var id=_relatedHiddenId($(element).closest('.system-rate').attr('id'));if(value!==undefined){_currentRates[id]=value;$('#'+id).val(value)}
return _currentRates[id]||0};var _setRateOnElement=function(element,rate){$(element).parents('.system-rate').find('.stars__full').css('width',rate*20+'%')};var isNewUser=!1;zk.set(['card','review_form'],zk.form({display_method:zk.form.DISPLAY.INLINE,container:'#card-new-review',disable_submission:!0,form_url:sVars.url.process_review,open:function(){zk.wysiwyg($('#text_review',this.get()),zk.wysiwyg.TYPE.BASIC_LISTS);$(this.get()).find('select:first').focus()},on_disabled_submit:function(){var self=this;register.register(function(response){isNewUser=(response.form.search('_REGISTRATION')!=-1);self.submit()})},init:function($form){$('.system-rate',$form).each(function(){var id=_relatedHiddenId($(this).attr('id'));var value=$('#'+id).val();if(value){_setRateOnHidden($(this).find('.js-star-review'),value);_setRateOnElement($(this).find('.js-star-review'),value)}});$('.system-rate',$form).each(function(){$(this).find('.js-star-review').on('click touchend',function(){var selectedRate=$(this).index()+1;_setRateOnHidden(this,selectedRate);_setRateOnElement(this,selectedRate);return !1});$(this).find('.js-star-review').hover(function(){var refreshRate=$(this).index()+1;_setRateOnElement(this,refreshRate)},function(){var rate=_setRateOnHidden(this);_setRateOnElement(this,rate)})});$('#rvw-delete-anchor',$form).click(function(e){var href=$(this).attr('href');zk.message({message:sVars.translate.confirm_delete,loader_on_accept:!0,on_accept:function(){zk.redirect(href)}});return !1})},success:function(response){if(response.redirect_url){if(isNewUser){if(typeof ga!=='undefined'){ga('x.send','event','new-user','card-review');ga('send','event','new-user','card-review')}}
zk.redirect(response.redirect_url)}else{window.location.reload()}},error:function(response){zk.message({message:response.message})}}))});zk.onDocumentReady(['forms','directory','business_company'],function(sVars){zk.set(['directory','company','form'],zk.form({form_url:sVars.url,init:function($form){zk.locationAutocomplete.reload('location_billing-id',$form)},success:function(values){var company=values.company;$($('.editable-company-data').find('ul')[0]).find('li').each(function(x,e){var property=$(e).attr('id').substring(8);var text=company[property];if(property=='postalcode'){text=company[property]+" "+company.region}
$(e).text(text)})}}))});zk.onDocumentReady(['forms','directory','business_faq'],function(sVars){$('[data-toggle]').toggleTarget()});zk.onDocumentReady(['forms','directory','business_location'],function(sVars){var formPrefix=sVars.form_prefix||'';$('[data-toggle]').toggleTarget();$('.zk-autocomplete-location').on('zk:location:select',function(e,autocomplete,location){if(autocomplete.getId().indexOf(formPrefix)===0){$('#'+formPrefix+sVars.location_elem+'-data').val(location.value);locateAddressInMap(!0)}});$('#form-business-location').on("change, keyup","#address",function(){var address=$('#'+formPrefix+'address').val();if(address==''){map.zoom(6);$('#'+formPrefix+'lat').val('');$('#'+formPrefix+'lng').val('')}});var _isLocationStreetAddressMandatory=function(){if(sVars.existing_wervice_location_street_required!=-1){return sVars.existing_wervice_location_street_required}};var _locatingAddressInMap=!1;var locateAddressInMap=function(preventAlert){preventAlert=preventAlert||!1;if(!$('#'+formPrefix+sVars.location_elem+'-id').val()){zk.message(sVars.translate.city_field_empty,{icon:zk.message.ICON.ALERT});_locatingAddressInMap=!1}else{var cityCountryName=$('#'+formPrefix+sVars.location_elem+'-data').val()+','+$('#'+formPrefix+sVars.location_elem+'-countryName').val();var address='';if($('#'+formPrefix+'address').val()!=''){address=$('#'+formPrefix+'address').val()+','}
var fullAddress=address+$('#'+formPrefix+sVars.location_elem+'-data').val()+','+$('#'+formPrefix+sVars.location_elem+'-countryName').val();if(_isLocationStreetAddressMandatory()){map.setPointFromAddress(fullAddress,!1,function(result){if(result==2){map.zoom(18)}else if(preventAlert===!1){zk.message(sVars.translate.address_unknown,{icon:zk.message.ICON.ALERT})}
_locatingAddressInMap=!1},!1,!1)}
else{var zoomLevel=14;if($('#'+formPrefix+'address').val().length>0){cityCountryName=$('#'+formPrefix+'address').val()+', '+cityCountryName;zoomLevel=18}
map.setPointFromAddress(cityCountryName,!1,function(result){if(result==1||result==2){map.zoom(zoomLevel)}else{zk.message(sVars.translate.city_field_empty,{icon:zk.message.ICON.ALERT})}
_locatingAddressInMap=!1})}}};var map=zk.maps({container:'#map',wrapper:'#map-wrapper',on_form:!0,input_lat:'#'+formPrefix+'lat',input_lon:'#'+formPrefix+'lng',input_postalcode:'#'+formPrefix+'postalcode',marker_draggable:!0,zoom:6});if(!map.setPoint(sVars.point.lat,sVars.point.lng,!1)){locateAddressInMap()}
if($('#'+formPrefix+'address').val().length){map.zoom(18)}
var locateCoordsInMap=function(){var lat=$('#'+formPrefix+'lat').val();var lng=$('#'+formPrefix+'lng').val();map.setPoint(lat,lng,!1);map.zoom(18)};$('#'+formPrefix+'address').keyup(function(e){if(e.which==13){locateAddressInMap()}});$('#'+formPrefix+'lat').keyup(function(e){if(e.which==13){locateCoordsInMap()}});$('#'+formPrefix+'lng').keyup(function(e){if(e.which==13){locateCoordsInMap()}});$("#ui-elem-search-address").click(function(e){e.preventDefault();locateAddressInMap()});$("#ui-elem-locate-coords").click(function(e){e.preventDefault();locateCoordsInMap()});var makeCoordsEditable=function(){var inputLat=$('#'+formPrefix+'lat');var inputLng=$('#'+formPrefix+'lng');var $edit=$("#ui-elem-edit-coords");if($edit.is(":visible")){inputLat.removeClass('disabled').removeAttr('readonly');inputLng.removeClass('disabled').removeAttr('readonly');$edit.hide();$("#ui-elem-locate-coords").show()}};$("#ui-elem-edit-coords").click(function(e){e.preventDefault();makeCoordsEditable()});$('#'+formPrefix+'lat').focusin(function(e){makeCoordsEditable()});$('#'+formPrefix+'lng').focus(function(e){makeCoordsEditable()});if(!formPrefix){zk.wysiwyg('#'+sVars.description_elem,zk.wysiwyg.TYPE.BASIC_LISTS)}else{zk.wysiwyg('#'+formPrefix+sVars.description_elem,zk.wysiwyg.TYPE.BASIC_LISTS)}
zk.form('#form-business-location',{submit_on_enter:!1,disable_submission:!0,on_disabled_submit:function(){if(!_locatingAddressInMap){this.submit()}}})});zk.onDocumentReady(['forms','directory','business_service'],function(sVars){var formPrefix=sVars.form_prefix||'';$('[data-toggle]').toggleTarget();$('#subcategory_label').on('focus',function(){$('#element-taxonomies-palette .search-hint__grid').masonry({itemSelector:'.search-hint__block'})});if(!formPrefix){zk.wysiwyg('#'+sVars.data.form.description,zk.wysiwyg.TYPE.BASIC_LISTS,{height:450})}else{zk.wysiwyg('#'+formPrefix+sVars.data.form.description,zk.wysiwyg.TYPE.BASIC_LISTS,{height:450})}
var $inputSubcategory=$('#'+formPrefix+sVars.data.form.subcategory_input);var $hiddenSubcategory=$('#'+formPrefix+sVars.data.form.subcategory_hidden);var $checkboxOnline=$('#'+formPrefix+sVars.data.form.online);var _checkOnlineAllowed=function(){var subcategoryId=$hiddenSubcategory.val();var notAllowed=subcategoryId==''||($.inArray(subcategoryId,sVars.data.not_online_subcategory_ids)!=-1);if(notAllowed){$checkboxOnline.closest('#online-checkbox').slideUp();if($checkboxOnline.is(':checked')){$checkboxOnline.click()}}else{$checkboxOnline.removeAttr('disabled');$checkboxOnline.closest('#online-checkbox').slideDown()}};_checkOnlineAllowed();$inputSubcategory.on({focusin:function(){$('#element-taxonomies-palette').show();if(!$('.search-hint__grid','form').data('masonry')){$('.search-hint__grid','form').masonry({itemSelector:'.search-hint__block'});$('.search-hint__grid','form').data('masonry',!0)}},focusout:function(){$('#element-taxonomies-palette').fadeOut('fast')},keypress:function(e){e.preventDefault();return !1},change:function(){_checkOnlineAllowed()}});$('.subcategory-element','#element-taxonomies-palette').click(function(e){e.preventDefault();var idSubcategory=$(this).attr('id').split('subcategory-')[1];$inputSubcategory.val($(this).html().trim());$hiddenSubcategory.val(idSubcategory);$inputSubcategory.trigger('change')})});zk.onDocumentReady(['forms','directory','invitation'],function(sVars){var $inputCompany=$('#'+sVars.data.form.company_input);var $hiddenCompany=$('#'+sVars.data.form.company_hidden);var $inputSubcategory=$('#'+sVars.data.form.subcategory_input);var $hiddenSubcategory=$('#'+sVars.data.form.subcategory_hidden);var $elementTaxonomies=$('#element-taxonomies-palette');$inputCompany.autocomplete({open:function(event,ui){$('.ui-autocomplete').removeClass('ui-corner-all');$('.ui-autocomplete li.ui-menu-item a.ui-corner-all').removeClass('ui-corner-all')},appendTo:$('#hint-autocomplete'),select:function(event,sel){$hiddenCompany.val(sel.item.id)},focus:function(event,ui){if(ui.item.id!==self.ID_MORE_RESULTS){$inputCompany.val(ui.item.label)}},source:function(request,response){$inputCompany.parent().statusIcon('loading');$.ajax({url:sVars.url.get_suggestions_wervice,dataType:"json",data:{term:$inputCompany.val(),invitation:!0},success:function(data){var suggestions=[];if(data.error==0){$.each(data.wervices,function(id,item){suggestions.push({id:id,value:item.label,label:item.label})})}
$inputCompany.parent().statusIcon();response(suggestions)}})}});$inputSubcategory.on({focusin:function(){$elementTaxonomies.show();if(!$('.search-hint__grid','form').data('masonry')){$('.search-hint__grid','form').masonry({itemSelector:'.search-hint__block'});$('.search-hint__grid','form').data('masonry',!0)}},focusout:function(){$elementTaxonomies.fadeOut('fast')},keypress:function(e){e.preventDefault();return !1}});$('.subcategory-element','#element-taxonomies-palette').click(function(e){e.preventDefault();var idSubcategory=$(this).attr('id').split('subcategory-')[1];$inputSubcategory.val($.trim($(this).html()));$hiddenSubcategory.val(idSubcategory);$inputSubcategory.trigger('change')})});zk.onDocumentReady(['forms','directory','search'],function(sVars){var $what=$('#ui-elem-input-what');var $where=$('#ui-elem-input-where');$where.on('focus',function(){$('#sgs-tcm-locations .search-hint__grid').masonry({itemSelector:'.search-hint__block'})});$what.on('focus',function(){if(!zk.isMobile()){$('#sgs-tcm-taxonomies .search-hint__grid').masonry({itemSelector:'.search-hint__block'})}});var _prefixSlugidWervice='wervice#';var comboSuggestions=function(config){var _inputField=config.inputField;var _hiddenField=config.hiddenField;var _blockHint=config.blockHint;var _blockSuggestion=config.blockSuggestion;if(!_inputField.length||!_hiddenField.length||!_blockHint.length){zk.log('Error: search suggestion not loaded');return !1}
$(_blockSuggestion).hide();$(_blockSuggestion).removeClass('no-script');_blockHint.width(_inputField.outerWidth()-2);var _blockNoResults=(typeof config.blockNoResults!='undefined')?config.blockNoResults:!1;if(_blockNoResults){_blockNoResults.width(_blockHint.outerWidth())}
var _noMatches=!0;var _normalizeString=function(str){var r=str.toLowerCase();r=r.replace(/[àáâãäå]/g,"a");r=r.replace(/æ/g,"ae");r=r.replace(/ç/g,"c");r=r.replace(/[èéêë]/g,"e");r=r.replace(/[ìíîï]/g,"i");r=r.replace(/ñ/g,"n");r=r.replace(/[òóôõö]/g,"o");r=r.replace(/œ/g,"oe");r=r.replace(/[ùúûü]/g,"u");r=r.replace(/[ýÿ]/g,"y");r=r.replace(/ß/g,"ss");return r};var _prepareHint=function(){$(_blockHint).parent().show();$('.ui-autocomplete li.ui-menu-item a.ui-corner-all',_blockHint).removeClass('ui-corner-all');$('.ui-autocomplete',_blockHint).removeClass('ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all').addClass('tt-dropdown-menu tt-dataset-states')};var _highlightLabel=function(label,pos,len){return label.substr(0,pos)+'<strong>'+label.substr(pos,len)+'</strong>'+label.substr(pos+len)};var _showNoResults=function(flag){if(_blockNoResults){if(flag||typeof(flag)=='undefined'){_blockNoResults.show()}else{_blockNoResults.delay(200).hide()}}};_inputField.mouseup(function(e){e.preventDefault()});_inputField.focusin(function(){if($.isFunction(config.onFocusIn)){config.onFocusIn()}
_inputField.select();_blockSuggestion.show(0,function(){if($('#sgs-tcm-taxonomies').is(':visible')&&!$(_blockSuggestion).data('masonry')){$('.all-categories').masonry({itemSelector:'.masonry-item'});$(_blockSuggestion).data('masonry',!0)}})});_inputField.focusout(function(e){if($.isFunction(config.onFocusOut)){config.onFocusOut()}
_showNoResults(!1);_blockSuggestion.fadeOut('fast')});var _autocomplete=_inputField.autocomplete({minLength:1,delay:50,source:function(request,response){config.suggestions(request.term,function(suggestions){if($.isFunction(config.onSuggestions)){config.onSuggestions(request.term)}
var matches=[];$.each(suggestions,function(idx,item){var pos=_normalizeString(item.label).indexOf(_normalizeString(request.term));if(pos>=0){matches.push({value:item.value,label:_highlightLabel(item.label,pos,request.term.length)})}});_showNoResults(!(matches.length));_noMatches=matches.length<1;response(matches)})},appendTo:_blockHint,open:function(event,ui){_prepareHint()},close:function(){$(_blockHint).parent().hide()},select:function(event,sel){if($.isFunction(config.onselect)){config.onselect(sel.item)}
sel.item.value=$('<div>').html(sel.item.label).text();if(sVars.data.auto_submit){_submitSearchObj.submit()}
_refreshInputResetIcons();$(_blockHint).parent().hide()},focus:function(event,ui){event.preventDefault();if($.isFunction(config.onfocus)){config.onfocus(ui.item)}else{_hiddenField.val(ui.item.value);_inputField.val($('<div>').html(ui.item.label).text())}}});_autocomplete.data('ui-autocomplete')._renderItem=function(ul,item){return $('<li class="tt-suggestion"></li>').data('ui-autocomplete-item',item).append($('<a></a>').html(item.label)).appendTo(ul)};_autocomplete.data('ui-autocomplete')._renderMenu=function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item)});$(_blockSuggestion).hide()}};var _suggestionsWhat=comboSuggestions({inputField:$what,hiddenField:$('#ui-elem-what'),blockHint:$('#hint-taxonomy'),blockNoResults:$('#ui-elem-no-results','#hint-taxonomy'),blockSuggestion:$('#sgs-tcm-taxonomies'),onselect:function(item){if(item){$('#sgs-tcm-taxonomies').hide();if(!sVars.data.auto_submit){_submitSearchObj.submit()}}},onFocusIn:function(){$what.data('default_value',$what.val());$what.val('')},onFocusOut:function(){$what.val($what.data('default_value'))},suggestions:function(term,callback){var _suggestions=new Array();if(typeof this.ajaxRequest!=='undefined'){this.ajaxRequest.abort();delete this.ajaxRequest}
var location_slug='';if($('#ui-elem-where').length){$('#ui-elem-where').val();var where_parts=$('#ui-elem-where').val().split(':');if(where_parts.length==2){if(where_parts[0]!='z'&&where_parts[0]!='r'&&where_parts[0]!='rg'){location_slug=''}}}
this.ajaxRequest=$.ajax({url:sVars.url.get_suggestions_wervice,data:{term:term,location_slug:location_slug},datatype:'json',success:function(data){if(data.error==0){$.each(data.wervices,function(idx,item){_suggestions.push({label:item.label,value:_prefixSlugidWervice+item.slugid})})}
callback(sVars.data.suggestions_what.concat(_suggestions))}})}});var _suggestionsWhere=comboSuggestions({inputField:$where,hiddenField:$('#ui-elem-where'),blockHint:$('#hint-location'),blockNoResults:$('#ui-elem-no-results','#hint-location'),blockSuggestion:$('#sgs-tcm-locations'),onselect:function(item){if(item){$('#sgs-tcm-locations').hide();if(!sVars.data.auto_submit){_submitSearchObj.submit()}}},onFocusIn:function(){$where.data('default_value',$where.val());$where.val('')},onFocusOut:function(){$where.val($where.data('default_value'))},onSuggestions:function(term){},suggestions:function(term,callback){var _suggestions=new Array();if(typeof this.ajaxRequest!=='undefined'){this.ajaxRequest.abort();delete this.ajaxRequest}
this.ajaxRequest=$.ajax({url:sVars.url.get_suggestions_location,data:{term:term,ancestor_type:'country',ancestor_id:sVars.data.id_country,type:'zone',format:'engine'},datatype:'json',success:function(data){if(data.error==0){$.each(data.array,function(idx,item){_suggestions.push(item)})}
callback(sVars.data.suggestions_where.concat(_suggestions))}})}});var submitSearch=function(config){var _config=$.extend({},config);var _public={};var _getParams=function(){var params={};var taxoParts=_config.hiddenWhat.val().split(':');if(taxoParts.length==2){params[taxoParts[0]]=taxoParts[1]}
if(_config.hiddenWhere.length){var locaParts=_config.hiddenWhere.val().split(':');if(locaParts.length==2){if(params[locaParts[0]]){params[locaParts[0]]+=','+locaParts[1]}else{params[locaParts[0]]=locaParts[1]}}}
return params};_public.submit=function(){var _inputWhatParts=_config.hiddenWhat.val().split(_prefixSlugidWervice);if(_inputWhatParts[0]==''&&_inputWhatParts.length>1){zk.redirect(sVars.url.card_tpl.replace('__slug__',_inputWhatParts[1]))}else{var params=_getParams();params.language=sVars.data.code_uri;$.ajax({url:'/api/Url',type:'POST',dataType:'json',data:JSON.stringify({"method":"getUrl","params":{"controller":"search","action":sVars.data.default_action,"params":params},"jsonrpc":"2.0","id":1}),success:function(response){if(response.result.length>0){zk.redirect(response.result)}else{zk.redirect(sVars.url.search_empty)}}})}};return _public};var _submitSearchObj=submitSearch({hiddenWhat:$('#ui-elem-what'),hiddenWhere:$('#ui-elem-where')});$('#ui-action-directory-search').click(function(e){e.preventDefault();_submitSearchObj.submit();return !1});var _showMoreSuggestion=function(id){$.each($('.more-suggestions'),function(idx,item){if($(item).is(':visible')){$(item).hide()}});$('#'+id).show()};var _hideMoreSuggestion=function(id){$('#'+id).hide()};$('.show-more-suggestions').click(function(e){e.preventDefault();var idSuggestions=$(this).attr('id').split('-show-more')[0]+'-more-suggestions';_showMoreSuggestion(idSuggestions)});$('.close-more-suggestions').click(function(e){e.preventDefault();var idSuggestions=$(this).attr('id').split('-hide-more')[0]+'-more-suggestions';_hideMoreSuggestion(idSuggestions)});$where.data('default_value',sVars.translate.location);$what.data('default_value',sVars.translate.taxonomy);var _refreshInputResetIcons=function(){$.each($('.js-src-directory-input-reset'),function(idx,item){var inputType=$(item).attr('id').split('src-directory-input-reset-')[1];if($('#ui-elem-input-'+inputType).data('default_value')==$('#ui-elem-input-'+inputType).val()){$(item).hide()}else{$(item).show()}})};$(".selector-redirect").change(function(){if($(this).find(':selected').data('reset')){_resetFilters($(this).find(':selected').data('reset'))}else{document.location.href=$(this).val()}});var _resetFilters=function(input){$('#ui-elem-'+input).val('');$('#ui-elem-input-'+input).val($('#ui-elem-input-'+input).data('default_value'));_submitSearchObj.submit()};$('.js-src-directory-input-reset').click(function(e){e.preventDefault();var inputType=$(this).attr('id').split('src-directory-input-reset-')[1];$('#ui-elem-'+inputType).val('');$('#ui-elem-input-'+inputType).val($('#ui-elem-input-'+inputType).data('default_value'));_submitSearchObj.submit();_refreshInputResetIcons()});_refreshInputResetIcons()});zk.onDocumentReady(['forms','directory','sign_contract'],function(sVars){var form=zk.form({template:$('#sign_form'),disable_submission:!0,on_disabled_submit:function(){var that=this;var $button=this.get().find('#sign_button');$button.prop('disabled',!0);$("#date").prop('disabled',!1);$.ajax({url:sVars.url,type:'POST',data:{id:sVars.id_company},dataType:'json',success:function(response){$button.prop('disabled',!1);if(response.error==0){that.submit()}else{zk.message(sVars.missing_data)}}})}});$('.sign-contract-button').on('click',function(){form.submit();return !1});$('#edit-company-data').on('click',function(){zk.get('directory','company','form',function(form){form.open()});return !1})});zk.onDocumentReady(['blocks','layout','card_header'],function(sVars){enquire.register(zk.MEDIA_QUERY.DESKTOP,{match:function(){$('.card-header[data-fixed-always]').elfixeador({on_fix:function(){$('.js-card-navigation').addClass('container')},on_freeze:function(){$('.js-card-navigation').removeClass('container')}});$('.js-card-navigation').each(function(_,navigation){$(navigation).find('a').spyNav()})}})});zk.onDocumentReady(['layout','directory_promoted_slider'],function(sVars){$('.slider--directory').swiper({mode:'horizontal',loop:!0,calculateHeight:!0,slidesPerView:1,slidesPerViewFit:!0,autoplay:5000,paginationClickable:!0,createPagination:!1,paginationElement:'li',updateOnImagesReady:!0,progress:!0,onProgressChange:function(swiper){for(var i=0;i<swiper.slides.length;i++){var slide=swiper.slides[i];var progress=slide.progress;var translate=progress*swiper.width;var opacity=1-Math.min(Math.abs(progress),1);slide.style.opacity=opacity;swiper.setTransform(slide,'translate3d('+translate+'px, 0, 0)')}},onTouchStart:function(swiper){for(var i=0;i<swiper.slides.length;i++){swiper.setTransition(swiper.slides[i],0)}},onSetWrapperTransition:function(swiper){for(var i=0;i<swiper.slides.length;i++){swiper.setTransition(swiper.slides[i],swiper.params.speed)}},onSlideChangeStart:function(s){var isIE9=/MSIE [9]/.test(navigator.userAgent);if(s.lazy&&isIE9){var lazyLoadingOnTransitionStart=s.params.lazyLoadingOnTransitionStart;s.params.lazyLoadingOnTransitionStart=!0;s.lazy.onTransitionStart();s.params.lazyLoadingOnTransitionStart=lazyLoadingOnTransitionStart}}})});zk.onDocumentReady(['blocks','directory','aside_edition'],function(sVars){$('[data-request-review-trigger]').click(function(e){zk.get('wervice','request_review_form').show();return !1})});zk.onDocumentReady(['blocks','directory','info_request'],function(sVars){var $contactButton;var _isDone=function($button){$button=$button||$contactButton;return $button.data('info-request-status')};var _markAsDone=function($button,initiate){$button=$button||$contactButton;if($button&&(initiate||!_isDone($button))){$button.toggleClass('button--main');$button.toggleClass('button--secondary__border');$button.children().toggleClass('hidden');$button.data('info-request-status','1');zk.namespaceCallbacks.fireQueue('info_done',$button)}};zk.get('wervice','info_request_forms',function(forms){forms=forms.cloneManager();forms.get('single').setOptions({open:function($form){if($contactButton){$form.find('#wervice-name').html($contactButton.data('wervice-name'))}},success:function(response){$contactButton=$('[data-single-url="'+this.getOption('form_url')+'"]');if(!response.error){$contactButton.data('info-request-id',response.ir_id);forms.get('multi').setOptions({form_data:{ir_id:response.ir_id}}).show(response.form);_markAsDone()}}});var infoButtons=zk.set(['directory','info_request_buttons'],(function(){var output={};output.init=function($context){$context=$context||$('body');var $contactButtons=$('[data-info-request]',$context);$.each($contactButtons,function(_,button){var $button=$(button);if(_isDone($button)){_markAsDone($button,!0)}});$contactButtons.on('click touchstart',function(){$contactButton=$(this);forms.get('single').setOptions({form_url:$contactButton.data('single-url')});forms.get('multi').setOptions({form_url:$contactButton.data('multi-url'),form_data:{ir_id:$contactButton.data('info-request-id')}});forms.show(_isDone($contactButton)?'multi':'single')})};output.markAsDone=function(singleUrl){_markAsDone($('[data-single-url="'+singleUrl+'"]'))};output.whenDone=function(callback){zk.namespaceCallbacks.queueMethod('info_done',callback)};output.getForms=function(){return forms};return output})());infoButtons.init()})});zk.onDocumentReady(['blocks','directory','selection'],function(sVars){var register=zk.register({entrance:sVars.registration_entrance});var initSingle=zk.set(['wervice','single-selection'],function($context){$context=$context||$('body');var _isProcessed=function($button){if($button.data('selection-processed')){return !0}
$button.data('selection-processed',!0);return !1};var _toggleButtonClasses=function($button){$button.toggleClass('button--main');$button.toggleClass('button--secondary');$button.children().toggleClass('hidden')};$('[data-single-selection]',$context).each(function(){var $button=$(this);if(_isProcessed($button)){return}
if($button.data('selection-status')=='saved'||$button.data('selection-status')=='chosen'){_toggleButtonClasses($button)}
$button.click(function(){register.register(function(response){if(response.error){return}
var isNewUser=(response.form.search('_REGISTRATION')!=-1);if(!$button.data('blocked')){$button.data('blocked',!0);$.ajax({type:'post',url:sVars.url.set_selection_status_url,data:{werviceId:$button.data('wervice-id'),status:$button.data('selection-status')},datatype:'json',success:function(data){if(!data.error){if(typeof ga!=='undefined'){if(isNewUser){ga('x.send','event','new-user','wervice-selection');ga('send','event','new-user','wervice-selection')}
ga('x.send','event','new-interaction','selected');ga('send','event','new-interaction','selected')}
_toggleButtonClasses($button,data.status);$button.data('blocked',!1);if(response.url){zk.redirect(response.url)}}else{zk.message({message:data.message,icon:zk.message.ICON.ALERT})}}})}})})})});var initMultiple=zk.set(['wervice','multiple-selection'],function($context){$context=$context||$('body');var _setButtonActive=function($button,$newStatus){if('deleted'==$newStatus){$button.removeClass('is__active')}else{$button.siblings().removeClass('is__active');$button.addClass('is__active')}};var _updateCurrentStatus=function($button){$button.parent().data('current-status',$button.data('status'))};$('[data-multiple-selection]',$context).children().each(function(){var $button=$(this);if($button.parent().data('current-status')==$button.data('status')){_setButtonActive($button)}
$button.click(function(){$.ajax({type:'post',url:sVars.url.set_selection_status_url,data:{werviceId:$button.parent().data('wervice-id'),userId:$button.parent().data('user-id'),status:$button.data('status')},datatype:'json',success:function(data){if(!data.error){_updateCurrentStatus($button);_setButtonActive($button,data.selection.status);if(sVars.reload){window.location.reload()}}else{zk.message({message:data.message,icon:zk.message.ICON.ALERT})}}})})})});initSingle();initMultiple()});zk.onDocumentReady(['blocks','card','cta'],function(sVars){zk.werviceAnalytics.trackInteractions();(function(){var $contactButton=$('[data-info-request]');var $contactButtonContainer=$('.js-request-info-card-button');var $formContainer=$('#ir-form-sidebar');var $formWrapper=$('#ir-form-sidebar-wrapper');zk.get('wervice','info_request_forms',function(forms){forms=forms.cloneManager();if(!$contactButton.data('info-request-status')){forms.get('single').setOptions({display_method:zk.form.DISPLAY.INLINE,container:$formContainer,form_data:{template:sVars.ir_form_template}}).addCallback(zk.form.CALLBACK.SUCCESS,function(response){zk.get('directory','info_request_buttons').markAsDone(this.getOption('form_url'));$contactButtonContainer.toggle();$formWrapper.toggle();$contactButton.data('info-request-id',response.ir_id);forms.get('multi').setOptions({form_data:{ir_id:response.ir_id}}).show(response.form)})}else{$formContainer.hide();$contactButtonContainer.toggle();$formWrapper.toggle()}})})()});zk.onDocumentReady(['blocks','card','photos'],function(sVars){zk.werviceAnalytics.trackInteractions();var $contactButton=$('[data-info-request]');zk.get('wervice','info_request_forms',function(forms){forms=forms.cloneManager();$('.slideshow-fullscreen').each(function(i,template){var $templateForm=$(template).find('.quick-request');var $templateContactedButton=$(template).find('.js-request-info-slideshow-button');var $submitButton=$templateForm.find('#single-send');if(!$contactButton.data('info-request-status')){forms.clone('single','slideshow_simple_'+i).setOptions({display_method:zk.form.DISPLAY.INLINE,container:$templateForm,enable_transition:!1,form_data:{template:sVars.inline_template}}).addCallback(zk.form.CALLBACK.BEFORE_SUBMIT,function(){$submitButton.statusIcon('loading')}).addCallback(zk.form.CALLBACK.SUCCESS,function(response){zk.get('directory','info_request_buttons').markAsDone(this.getOption('form_url'));$submitButton.statusIcon();$templateContactedButton.toggleClass('hidden');forms.show('multi',response.form)})}else{$templateForm.hide();$templateContactedButton.toggleClass('hidden')}})});var swiper=null;$('#card-slideshow').on('click',function(){zk.popup.open($('#slideshow-fullscreen'),{black_background:!0,open:function(){if(swiper===null){swiper=$('.js-swiper-container-photos').swiper({midClick:!0,nextButton:'#arrow-next',prevButton:'#arrow-prev',keyboardControl:!0,preventClicks:!1,onSlideChangeStart:function(swiper){$('.swiper_index').html([swiper.activeIndex+1,sVars.translate.of,swiper.slides.length,sVars.translate.photos].join(' '));if(swiper.slides.length==swiper.activeIndex+1){$('#sidebar-social-share').addClass('hide')}else{$('#sidebar-social-share').removeClass('hide')}
calculateHeight($(swiper.slides[swiper.activeIndex]));$('.js-info-trigger').toggleTarget('close')}})}
calculateHeight($(swiper.slides[swiper.activeIndex]))},beforeOpen:function(){$('body, html').addClass('is__fixed')},close:function(){$('body, html').removeClass('is__fixed')}});return !1});var calculateHeight=function($slideContainer){if(!swiper){return}
$('#slideshow-fullscreen .swiper-slide-active img').css({'height':'auto','max-height':'none'});$('#slideshow-fullscreen .swiper-slide').css('height','auto');var sidebarHeight=$('.js-card-sidebar').outerHeight();var imageContainerHeight=$slideContainer.outerHeight();var windowHeight=$(window).height();var mobileWindowHeight=$('.mfp-content').outerHeight()-120;$('.js-swiper-wrapper').css('height',imageContainerHeight);if($('.js-card-sidebar').is(':visible')){if(sidebarHeight>=imageContainerHeight){$('.js-swiper-wrapper').css('height',sidebarHeight)}
else if(imageContainerHeight>windowHeight&&!$('#slideshow-fullscreen .swiper-slide-active').hasClass('js-suggestion-slide')){$('.js-swiper-wrapper').css('height',windowHeight);$('#slideshow-fullscreen .swiper-slide-active').css('height',windowHeight);$('.js-swiper-wrapper img').css('height',windowHeight-140);$('.js-card-sidebar').css('height',windowHeight)}else{$('.js-card-sidebar').css('height',imageContainerHeight)}}else if(!$('#slideshow-fullscreen .swiper-slide-active').hasClass('js-suggestion-slide')){$('.js-swiper-wrapper img').css({'max-height':mobileWindowHeight-50});$('.js-card-slideshow').addClass('slideshow-fullscreen--centered')}else{$('.js-card-slideshow').removeClass('slideshow-fullscreen--centered')}};$('.js-info-trigger').toggleTarget()});(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(!g.colorInit){g.start=c(g.elem,e);g.end=b(g.end);g.colorInit=!0}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}if(e=/rgba\(0, 0, 0, 0\)/.exec(f)){return a.transparent}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.curCSS(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}})(jQuery);zk.onDocumentReady(['card','edit-review'],function(sVars){zk.get('card','review_form').show()});zk.onDocumentReady(['card','index'],function(sVars){var _navigatorCurrentPage=sVars.page;zk.werviceAnalytics.trackVisit();$("#card-new-review-button").click(function(){zk.get('card','review_form').toggle();return !1});zk.get('directory','info_request_buttons',function(buttons){buttons.whenDone(function(){var $sidebar=$('.js-cta-fixed');var $suggestions=$sidebar.find('.js-card-suggestions');if($suggestions.length){$suggestions.addClass('card__suggestions--closed');$sidebar.addClass('card-cta__closed--suggestions')}else{$sidebar.addClass('card-cta__closed')}})});var _refreshSpyNav=function(){$('.card-navigation a').spyNav('refresh')};zk.readMore('.js-card-description',{max_height:95},function(){_refreshSpyNav()});enquire.register(zk.MEDIA_QUERY.MOBILE,{match:function(){zk.readMore('.js-card-details',{max_height:95},function(){_refreshSpyNav()});$('.js-bg-color .more_block').addClass('more_block--bg-color')}});enquire.register(zk.MEDIA_QUERY.DESKTOP,{match:function(){$('.js-cta-fixed[data-fixed-always]').elfixeador()}});$('.js-bg-color .more_block').addClass('more_block--bg-color');zk.readMore('.more_less',{container:$('.card-comment')},function(){_refreshSpyNav()});$('[data-toggle]').toggleTarget();var _initSimilarProvidersSlider=function($container){var _swipper=function(numSlides){$('#slider-similar-providers',$container).swiper({nextButton:'#slider-similar-providers .slider__arrow--next',prevButton:'#slider-similar-providers .slider__arrow--prev',slidesPerView:numSlides,loopAdditionalSlides:1,simulateTouch:!1,preloadImages:!1,onSlideChangeStart:function(swiper){var getMoreSlidesIndex=parseInt(sVars.page_size)*parseInt(_navigatorCurrentPage)-(parseInt(sVars.page_size)/2)-1;if(swiper.activeIndex==getMoreSlidesIndex){$.ajax({url:sVars.url.wervice_navigator_url,data:{page:parseInt(_navigatorCurrentPage)+1},success:function(response){if(!response.error){if(response.slider){var $slider=$(response.slider);_navigatorCurrentPage=parseInt(response.page);var $moreSlides=$slider.find('.swiper-slide.similar-providers__slide');if($moreSlides.length){$.each($moreSlides,function(i,$slide){swiper.appendSlide($slide)})}}}}})}}})};enquire.register(zk.MEDIA_QUERY.MOBILE,{match:function(){_swipper(2)}});enquire.register(zk.MEDIA_QUERY.TABLET_DESKTOP,{match:function(){_swipper(4)}})};$.ajax({url:sVars.url.wervice_navigator_url,success:function(response){if(!response.error){if(response.navigator){$('#js-wervice-navigator').removeClass('hide').html(response.navigator)}
if(response.slider){var $slider=$(response.slider);$('#js-similar-providers').removeClass('hide').html($slider);_initSimilarProvidersSlider($slider)}
if(response.page){_navigatorCurrentPage=response.page}}}});if($('#wervice-map').length){var map=zk.maps({container:'#wervice-map',zoom:15});var _canRemoveLocations=function(){return $('.remove-location').size()>2};$('.remove-location').click(function(){var $row=$(this).closest('[data-location-row]');zk.message({message:sVars.translate.confirm_delete,on_accept:function(){var id=$row.attr('id').replace('location-','');var $feedback=$('.loading-feedback',$row);$feedback.statusIcon('loading');$.ajax({url:sVars.url.remove_location,type:'post',dataType:'json',data:{id:id},success:function(response){if(response.error){zk.message(response.message);$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5);if(!_canRemoveLocations()){$('.remove-location').remove()}
setTimeout(function(){$row.slideUp(700,function(){$(this).remove()})},2000)}}})}});return !1});var highlightLocation=function(element){$element=$(element).closest('li');$element.animate({backgroundColor:'#FFFFD0'},150);setTimeout(function(){$element.animate({backgroundColor:'transparent'},2000)},1500)};$.each(sVars.points,function(i,point){var address=[point.address];if(point.postal_code){address.push(point.postal_code)}
var detail=[];if(point.phone){detail.push(point.phone)}
if(point.email){detail.push(point.email)}
var $description=$('<div>',{html:address.join(', ')+'<br />'+detail.join(' ')+'<p class="text-right mts">'+'<a href="#map-balloon-'+point.id+'" class="info">'+sVars.translate.show_description+'</a>'+'</p>'});$description.find('a').click(function(){highlightLocation($('#map-balloon-'+point.id))});var _title=sVars.region_name+', '+$('#map-balloon-'+point.id).text();map.setPoint(point.lat,point.lng,!0);map.setInfoWindow({title:_title,description:$description,trigger_on:'#map-balloon-'+point.id})})}
var $mentions=$('#mentions');$mentions.on('click','.js-see-more-mentions',function(e){e.preventDefault();var $this=$(this);if($this.data('type')=='more'){$this.data('type','less');$this.text(sVars.translate.view_less);$('.js-card-mentions',$mentions).show()}else{$this.data('type','more');$this.text(sVars.translate.view_more);$('.js-card-mentions-hide',$mentions).hide();$('html, body').animate({scrollTop:$mentions.offset().top},1000)}})});zk.onDocumentReady(['card','invitation'],function(sVars){var register=zk.register({entrance:sVars.data.registrationEntrance});if(typeof sVars.data!=='undefined'&&typeof sVars.data.screen_type!=='undefined'){if(sVars.data.screen_type=='login'){register.login(function(response){zk.redirect(sVars.url.accept_invitation)},{_email:sVars.data.invitation_email})}else if(sVars.data.screen_type=='register'){register.invitation(function(response){zk.redirect(sVars.url.accept_invitation)},{key:sVars.data.invitation_key})}}});zk.onDocumentReady(['card','reviews'],function(sVars){zk.readMore('.more_less',{container:$('.card-comment')});$('.js-review-fixed').elfixeador()});zk.onDocumentReady(['card','visit_web'],function(sVars){$.each(sVars.happening_types,function(_,happeningType){zk.werviceAnalytics.interaction(happeningType)});if(typeof ga!=='undefined'){ga('x.send','event','new-interaction',sVars.google_analytics_interaction);ga('send','event','new-interaction',sVars.google_analytics_interaction)}
zk.loadPixels(sVars.data.tracker_urls);zk.get('directory','info_request_buttons',function(infoButtons){var forms=infoButtons.getForms();forms.clone('single','single_auto').setOptions({form_data:{single:{register_entrance:sVars.register_entrance}}}).addCallback(zk.form.CALLBACK.INIT,function($form){$form.find('#js-info-request-description-block').addClass('hide');$form.find('.modal--standard__title').html(sVars.translate.auto_info_request_title)});var timeoutId=setTimeout(function(){if(!$('[data-info-request]').data('info-request-status')){if(!forms.get('single').isOpen()){forms.show('single_auto')}}},15000);$(document).one('pjax:success',function(){clearTimeout(timeoutId)})})});zk.onDocumentReady(['config','create'],function(sVars){$('#service-email').focusin(function(e){if($('#user-email').length&&$(this).val()==''){$('#service-email').val($('#user-email').val())}});var onlineProviderClass=function(config){$(config.checkboxId).click(function(e){if($(this).is(':checked')){$(config.locationBlockId).slideUp()}else{$(config.locationBlockId).slideDown()}});if($(config.checkboxId).is(':checked')){$(config.locationBlockId).slideUp()}};var _onlineProvider=onlineProviderClass({checkboxId:'input#service-online',locationBlockId:'#ui-elem-location-block'});zk.form('#form-business',{submit_on_enter:!1});var professionalClass=function(config){var register=zk.register();$('#ui-action-login').click(function(e){e.preventDefault();register.login(function(response){window.location.reload()})});$(config.userEmailId).focusout(function(e){var _inputText=$(this).val();$.ajax({url:sVars.url.email_in_use,type:'post',dataType:'json',data:{email:_inputText},beforeSend:function(e){$(config.userEmailId).css('opacity',0.3)},success:function(response){$(config.userEmailId).css('opacity',1);if(!response.error&&response.email_in_use){zk.message(response.message)}}})})};var _professional=professionalClass({userEmailId:'input#user-email'});$("#service-subcategory_label","#form-business").change(function(e){var id=$("#service-subcategory","#form-business").val();if($("#drt-bsn-crt-subcategory-id-"+id).length&&!$("#drt-bsn-crt-subcategory-id-"+id).is(":visible")){$("#drt-bsn-crt-subcategory-container span:visible").hide('fast',function(){$("#drt-bsn-crt-subcategory-id-"+id).show('fast')})}else if(!$("#drt-bsn-crt-subcategory-id-default").is(":visible")){$("#drt-bsn-crt-subcategory-container span:visible").hide('fast',function(){$("#drt-bsn-crt-subcategory-id-default").show()})}})});zk.onDocumentReady(['config','edit_media'],function(sVars){var _modified={};var $mediaContainer=$('#media-container');var $rowsContainer=$('#results-table');var $selectLayout=$('#layout');var $submitButton=$('#form-submit');var $mediaCounter=$('.js-media-counter');var $rowObject=$('.edit-media-pro__table');var $blankRow=$(sVars.blank_row_html);var $feedbackContainer=$('.js-feedback-upload');var $photosMainCardPortrait=4;var $photosMainCardLandscape=1;$('[data-toggle]').toggleTarget();var _id=function(element){return $(element).closest('.js-element-wrapper').attr('id').replace('item-','')};var _initModified=function(element){_modified[_id(element)]={original:$(element).val()}};var _resetAllModified=function(){_modified={};$('textarea',$rowsContainer).each(function(i,element){_initModified(element)})};_resetAllModified();var _activeStatusLink=function(element,toggle){var $element=$(element);toggle=toggle||!1;var activateClasses={activate:'activate-photo',deactivate:'deactivate-photo'};var selectedOperation;$.each(activateClasses,function(operation,className){if($element.hasClass(className)){selectedOperation=operation;return !1}});if(toggle){var opossiteOperation={activate:'deactivate',deactivate:'activate'};var opossiteIconClasses={activate:'icon_circle-exclamation',deactivate:'icon_circle-check'};var $icon=$element.find('.icon');$icon.removeClass('icon_circle-check icon_circle-info');$icon.addClass(opossiteIconClasses[selectedOperation]);$element.removeClass(activateClasses[selectedOperation]);$element.addClass(activateClasses[opossiteOperation[selectedOperation]]);$element.html(sVars.translate[opossiteOperation[selectedOperation]]);$element.prepend($icon)}
return selectedOperation=='activate'?1:0};var _handleModification=function(element){if(!element){var modified=[];$.each(_modified,function(i,target){if(!target.modified){return !0}
modified.push({id:i,title:target.modified})});return modified}
var $element=$(element);var id=_id($element);if(_modified[id].original==$element.val()){if(typeof _modified[id].modified!='undefined'){delete _modified[id].modified}}else{_modified[id].modified=$element.val()}
return{id:id,title:_modified[id].modified}};var _addRowToContainer=function(response){$mediaContainer.show();var $br=$blankRow.clone();$br.attr('id','item-'+response.media_id);$('.edit-media-pro__edition input',$br).attr('id','radio'+response.media_id);$('.edit-media-pro__edition label',$br).attr('for','radio'+response.media_id);$('img',$br).attr('src',response.thumb_url);if(response.title){$('.media-title',$br).val(response.title)}
$rowsContainer.prepend($br.hide());$br.show();_initModified($('textarea',$br));return $br};var _uploader=zk.pluploader({button:'pluploader-pickfiles',resolution:sVars.resolution,statusContainer:'#filelist-feedback',filelistContainer:'#filelist-container',callbacks:{file_uploaded:function(up,file,response){_addRowToContainer(response);_setActiveLayout();_updateCounter()},files_added:function(up,file){$feedbackContainer.show()}}});$rowsContainer.sortable({axis:'y',handle:'.row-handler',update:function(e,ui){var target=ui.item[0];var position=$.inArray($(target).attr('id'),$rowsContainer.sortable('toArray'));var id=_id(target);var $feedback=$(target).closest('.js-element-wrapper').find('.loading-feedback');$feedback.statusIcon('loading');$.ajax({url:sVars.url.move_media,type:'post',dataType:'json',data:{id:id,position:position},success:function(response){if(response.error){$rowsContainer.sortable('cancel');zk.message(response.message);$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5);_setActiveLayout()}}})}});$rowsContainer.delegate('input:radio[name=thumbnail-photo]','change',function(){$('input:radio[name=thumbnail-photo]').not(this).attr('checked',!1);var id=_id(this);var $feedback=$(this).closest('.js-element-wrapper').find('.loading-feedback');$feedback.statusIcon('loading');$.ajax({url:sVars.url.set_main_photo,type:'post',dataType:'json',data:{id:id},success:function(response){if(response.error){zk.message(response.message);$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5)}}})});var _setActiveLayout=function(){var layout=$selectLayout.val();var totalPhotosToSelect=$photosMainCardLandscape;if(layout=='portrait'){totalPhotosToSelect=$photosMainCardPortrait}
$('.js-element-wrapper').removeClass('card-photos--active');$('.js-element-wrapper:lt('+totalPhotosToSelect+')').addClass('card-photos--active')};_setActiveLayout();$selectLayout.change(function(){var $feedback=$('#js-loading-feedback');$feedback.statusIcon('loading');var layout=$(this).find(':selected').val();$.ajax({url:sVars.url.set_layout_main_photo,type:'post',dataType:'json',data:{layout:layout},success:function(response){if(response.error){zk.message({message:response.message,icon:zk.message.ICON.ALERT});$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5);_setActiveLayout()}}})});$rowsContainer.delegate('textarea','focusout',function(){var id=_id(this);_handleModification(this);if(_handleModification().length){$submitButton.fadeIn()}else{$submitButton.fadeOut()}});$rowsContainer.delegate('a.active-status-action','click',function(e){e.preventDefault();var that=this;var id=_id(this);var $feedback=$(this).closest('.js-element-wrapper').find('.loading-feedback');var status=_activeStatusLink(this);$feedback.statusIcon('loading');$.ajax({url:sVars.url.change_active_status,type:'post',dataType:'json',data:{id:id,status:status},success:function(response){if(response.error){var message=sVars.translate.cannot_unnactive_media;zk.message({message:message,icon:zk.message.ICON.ALERT});$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5);_activeStatusLink(that,!0)}}})});$rowsContainer.delegate('a.delete-action','click',function(e){var $this=$(this);zk.message({message:sVars.translate.confirm_delete,on_accept:function(){var id=_id($this);var $feedback=$this.closest('.js-element-wrapper').find('.loading-feedback');$feedback.statusIcon('loading');$.ajax({url:sVars.url.remove_media,type:'post',dataType:'json',data:{id:id},success:function(response){if(response.error){zk.message(response.message);$feedback.statusIcon('error')}else{$feedback.statusIcon('success',5);setTimeout(function(){$('#item-'+id).slideUp(700,function(){$(this).remove();_setActiveLayout();_updateCounter()})},2000)}}})}});return !1});$submitButton.click(function(){var changes=_handleModification();$.ajax({url:sVars.url.modify_media,type:'post',dataType:'json',data:{changes:changes},success:function(response){if(response.error){var message=sVars.translate[response.message];zk.message({message:message,icon:zk.message.ICON.ALERT})}else{$submitButton.fadeOut();_resetAllModified()}}});return !1});var $videoUploadSection=$('.js-video-uploader');var $videoFeedback=$('#video-upload-feedback');$(".js-show-video-uploader").toggleTarget();$('[type=submit]',$videoUploadSection).click(function(){$videoFeedback.statusIcon('loading');var url=$('[type=text]',$videoUploadSection).val();$.ajax({url:sVars.url.add_oembed_video,type:'post',dataType:'json',data:{url:url},success:function(response){if(response.error){zk.message(response.message);$videoFeedback.statusIcon('error')}else{$br=_addRowToContainer(response);$('.media-play-icon',$br).show();$videoFeedback.statusIcon('success',5)}}})});var _updateCounter=function(){$mediaCounter.text($rowObject.length)}});zk.onDocumentReady(['ziwa','detail'],function(sVars){zk.get('wervice','single-selection')()})