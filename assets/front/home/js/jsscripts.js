var base64=function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={};return e.encode=function(o){var t,a,n,c,d,h,C,f="",i=0;for(o=e.utf8_encode(o);i<o.length;)t=o.charCodeAt(i++),a=o.charCodeAt(i++),n=o.charCodeAt(i++),c=t>>2,d=(3&t)<<4|a>>4,h=(15&a)<<2|n>>6,C=63&n,isNaN(a)?h=C=64:isNaN(n)&&(C=64),f=f+r.charAt(c)+r.charAt(d)+r.charAt(h)+r.charAt(C);return f},e.decode=function(o){var t,a,n,c,d,h,C,f="",i=0;for(o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<o.length;)c=r.indexOf(o.charAt(i++)),d=r.indexOf(o.charAt(i++)),h=r.indexOf(o.charAt(i++)),C=r.indexOf(o.charAt(i++)),t=c<<2|d>>4,a=(15&d)<<4|h>>2,n=(3&h)<<6|C,f+=String.fromCharCode(t),64!=h&&(f+=String.fromCharCode(a)),64!=C&&(f+=String.fromCharCode(n));return f=e.utf8_decode(f)},e.utf8_encode=function(r){r=r.replace(/\r\n/g,"\n");for(var e="",o=0;o<r.length;o++){var t=r.charCodeAt(o);128>t?e+=String.fromCharCode(t):t>127&&2048>t?(e+=String.fromCharCode(t>>6|192),e+=String.fromCharCode(63&t|128)):(e+=String.fromCharCode(t>>12|224),e+=String.fromCharCode(t>>6&63|128),e+=String.fromCharCode(63&t|128))}return e},e.utf8_decode=function(r){for(var e="",o=0,t=c1=c2=0;o<r.length;)t=r.charCodeAt(o),128>t?(e+=String.fromCharCode(t),o++):t>191&&224>t?(c2=r.charCodeAt(o+1),e+=String.fromCharCode((31&t)<<6|63&c2),o+=2):(c2=r.charCodeAt(o+1),c3=r.charCodeAt(o+2),e+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),o+=3);return e},e}();if(typeof(ZK)!='undefined'&&typeof ZK==='string'){var ZK=$.parseJSON(base64.decode(ZK))}
window.zk=window.zk||function(){var MEDIA_QUERY={MOBILE:'screen and (max-width: 767px)',TABLET_PORTRAIT:'screen and (min-width: 768px) and (max-width: 991px)',TABLET_DESKTOP:'screen and (min-width: 768px)',DESKTOP:'screen and (min-width: 992px)'};var _log=function(message,error,data){if(window.console&&$.isFunction(console.log)){if(error){message+=' (in '+error.fileName+' at line '+error.lineNumber+': "'+error.message+'")'}
console.log(message)}
if(error!==!1){window.console&&console.trace&&console.trace();if($.isFunction(window.onerror)){var fileName,lineNumber,columnNumber;if(error){fileName=error.fileName;lineNumber=error.lineNumber;columnNumber=error.columnNumber}
window.onerror(message,fileName,lineNumber,columnNumber,error)}}};var output={};output.MEDIA_QUERY=MEDIA_QUERY;output.log=_log;output.base64=base64;output.namespaceCallbacks=(function(){var QUEUE={DOM_READY:'DOM_READY',WINDOW_LOAD:'WINDOW_LOAD'};var _defs={};var _callbacks={};var _options={};$.each(QUEUE,function(_,queue){_options[queue]={log:!0,persist:!0}});var _logError=function(namespaceName,error){_log('Error in "'+namespaceName+'" namespace',error)};var _getQueueCallbacks=function(queue,recreate){if(!_callbacks[queue]||recreate){_callbacks[queue]=$.Callbacks('unique memory')}
return _callbacks[queue]};var _getOption=function(queue,name){return _options[queue]?_options[queue][name]:!1};var output={};output.QUEUE=QUEUE;output.getValues=function(namespace,values){if(!$.isArray(namespace)){return values}
if(!values){return !1}
var success=!0;$.each(namespace,function(i,value){if(!values[value]){success=!1;return !1}
values=values[value]});return success?values:!1};output.queueMethod=function(queue,namespace,method,reset){if($.isFunction(namespace)){reset=method;method=namespace;namespace='void'}
var queueCallbacks=_getQueueCallbacks(queue);var name=$.isArray(namespace)?namespace.join('/'):namespace;if(reset||(!_defs[queue]||!_defs[queue][name])){if(_getOption(queue,'persist')){_defs[queue]=_defs[queue]||{};_defs[queue][name]={ns:namespace,method:method}}
queueCallbacks.add(function(values){var nsValues=output.getValues(namespace,values);if(!nsValues){return}
if(_getOption(queue,'log')){_log('Firing '+queue+' of: '+name,!1)}
try{method&&method(nsValues)}catch(e){_logError(name,e);throw e}})}
return output};output.fireQueue=function(queue,values){if(values&&$.inArray(queue,[QUEUE.DOM_READY,QUEUE.WINDOW_LOAD])>=0){ZK=$.extend(!0,ZK,values)}
if(values||typeof ZK!='undefined'){_getQueueCallbacks(queue).fire(values||ZK)}
return output};output.disableQueue=function(queue){if(queue){queue=[queue]}else{queue=[];$.each(_callbacks,function(name,_){queue.push(name)})}
$.each(queue,function(_,queueName){_getQueueCallbacks(queueName).disable();_getQueueCallbacks(queueName,!0);$.each(_defs[queueName]||[],function(_,def){output.queueMethod(queueName,def.ns,def.method,!0)})});return output};return output})();output.registry=(function(){var values={};var output={};var _queueName=function(namespace){namespace=namespace.slice();namespace.unshift('REG');return namespace.join('_').toUpperCase()};output.set=function(namespace,value){var queueName=_queueName(namespace);values[queueName]=value;zk.namespaceCallbacks.fireQueue(queueName,value);return value};output.get=function(){var namespace=Array.prototype.slice.call(arguments);var callback=null;if($.isFunction(namespace[namespace.length-1])){callback=namespace[namespace.length-1];namespace=namespace.slice(0,namespace.length-1)}
var queueName=_queueName(namespace);zk.namespaceCallbacks.queueMethod(queueName,callback);return values[queueName]};return output})();output.onDocumentReady=function(namespace,method){return output.namespaceCallbacks.queueMethod(output.namespaceCallbacks.QUEUE.DOM_READY,namespace,method)};output.onWindowLoad=function(namespace,method){return output.namespaceCallbacks.queueMethod(output.namespaceCallbacks.QUEUE.WINDOW_LOAD,namespace,method)};output.set=function(namespace,value){return output.registry.set(namespace,value)};output.get=function(){return output.registry.get.apply(output.registry,arguments)};output.guid=(function(){var s4=function(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)};return function(){return[s4()+s4(),s4(),s4(),s4(),s4()+s4()+s4()].join('-')}})();output.isMobile=function(){var isMobile=!1;enquire.register(MEDIA_QUERY.MOBILE,{match:function(){isMobile=!0}});return isMobile};output.onScreen=(function($context){var $window=$(window);$context=$context||$('body');var viewport={top:$window.scrollTop(),left:$window.scrollLeft()};viewport.right=viewport.left+$window.width();viewport.bottom=viewport.top+$window.height();var bounds=$context.offset();bounds.right=bounds.left+$context.outerWidth();bounds.bottom=bounds.top+$context.outerHeight();return !(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top)});output.redirect=(function(){var _decorate=function(url,callback){var link=document.createElement('a');link.href=url;if(window.ga&&ga.length&&link.hostname!=location.hostname){ga(function(tracker){var linker=new window.gaplugins.Linker(tracker);callback(linker.decorate(url))})}else{callback(url)}};return function(url){_decorate(url,function(url){var link=document.createElement('a');link.href=url;if(ZK.pjax_disabled||link.origin!=location.origin){window.location.href=url}else{$.pjax({url:url,container:'[data-pjax-container]'})}})}})();output.datepicker=function($input,options){if(!$.datepicker){return}
if(ZK.code_uri&&$.datepicker.regional[ZK.code_uri]){options=$.extend($.datepicker.regional[ZK.code_uri],options)}
options=$.extend({changeMonth:!0,changeYear:!0,showOn:'both',buttonImage:'/image/icons/calendar.png',buttonImageOnly:!0},options);$input.each(function(i,input){var $i=$(input);if($i.data('_datepicker_')){return}
$i.datepicker(options).next('.ui-datepicker-trigger').addClass('icon');$i.insertAfter($i.next('img'));$i.data('_datepicker_',!0)})};output.loadScript=function(src,callback,async){var that=this;async=typeof async=='undefined'?!0:async;if($.isArray(src)){var count=src.length;if(!count){callback&&callback()}else{return $.each(src,function(_,src){that.loadScript(src,function(){if(--count==0){callback&&callback()}},async)})}}
var $document=$(document);if(!$document.data('_js_files_')){$document.data('_js_files_',$document.find('script[src]').map(function(){return $(this).attr('src').replace(/\?.*/,'')}).get())}
var files=$document.data('_js_files_');src=src.replace(/\?.*/,'');if($.inArray(src,files)>-1){callback&&callback();return}
$.ajax({async:async,cache:!0,dataType:'script',url:src,success:function(){files.push(src);$document.data('_js_files_',files);callback&&callback()}})};output.loadStylesheet=function(src,media,callback){media=media||'screen, projection';var that=this;if($.isArray(src)){var count=src.length;if(!count){callback&&callback()}else{return $.each(src,function(_,src){that.loadStylesheet(src,media,function(){if(--count==0){callback&&callback()}})})}}
var $document=$(document);if(!$document.data('_css_files_')){$document.data('_css_files_',$document.find('link[rel="stylesheet"][type="text/css"][href]').map(function(){return $(this).attr('href').replace(/\?.*/,'')}).get())}
var files=$document.data('_css_files_');src=src.replace(/\?.*/,'');if($.inArray(src,files)>-1){callback&&callback();return}
var $tag=$('<link rel="stylesheet" type="text/css" href="'+src+'" media="'+media+'" />').load(function(){files.push(src);$document.data('_css_files_',files);callback&&callback()});$("head").append($tag)};output.bindGlobalEvent=function(name,handler,element){element=element||window;$(element).on(name,handler);$(document).one('pjax:complete',function(){$(element).off(name,handler)})};output.getDimensions=function($element){var dimensions={width:$element.width(),height:$element.height()};if(!dimensions.width||!dimensions.height){var hiddenElements=[$element];var $parents=$element.parents();$parents.each(function(_,parent){var $parent=$(parent);if(!$parent.is(':visible')){hiddenElements.push($parent)}});var $topHidden=hiddenElements[hiddenElements.length-1],$topHiddenClone=$topHidden.clone(!0);var $thChilds=$topHidden.find('*'),$thChildsClone=$topHiddenClone.find('*');var elementIndex=$thChilds.index($element),$clone=$thChildsClone[elementIndex];hiddenElements.pop();var cssProps={visibility:'hidden',display:'block',position:'absolute'};$topHiddenClone.css(cssProps);$.each(hiddenElements,function(_,hidden){var index=$thChilds.index(hidden);$($thChildsClone[index]).css(cssProps)});$topHidden.before($topHiddenClone);dimensions={width:$($clone).width(),height:$($clone).height()};$topHiddenClone.remove()}
return dimensions};output.parseQueryString=function(query){query=query||window.location.search.substring(1);var search=/([^&=]+)=?([^&]*)/g;var params={};var match;while(match=search.exec(query)){params[decodeURIComponent(match[1])]=decodeURIComponent(match[2])}
return params};$(document).ready(function(){output.namespaceCallbacks.fireQueue(output.namespaceCallbacks.QUEUE.DOM_READY)});$(window).load(function(){output.namespaceCallbacks.fireQueue(output.namespaceCallbacks.QUEUE.WINDOW_LOAD)});return output}();$(document).ajaxError(function(event,xhr,ajaxSettings,thrownError){if(xhr.readyState==0||xhr.status==0){xhr.abort();return}
if(xhr.state()==='rejected'||thrownError==='abort'){return}
if(xhr.status==404){zk.message('Requested URL not found.')}else if(xhr.status==500){zk.message('Internal Server Error.')}else if(thrownError=='parsererror'){zk.message('Parsing JSON Request failed.')}else if(thrownError=='timeout'){zk.message('Request time out.')}else{var error={};try{error=$.parseJson(xhr.responseText)}catch(e){error.message='Application has thrown an exception';error.exception=/(?:Fatal error:\s*)(.*)(?:\n)/.exec(xhr.responseText)[1]}
zk.message(error.message+': '+error.exception);if(error.stack||error.params){zk.message(error.stack+'<br />'+error.params)}}});zk.factories||(function(){zk.factories=function(){var _factories={};var _products={};var _queues={};var output={};output.add=function(name,factory){if(typeof _factories[name]!='undefined'&&_factories[name]===!0){return !0}
_factories[name]=null;if(!_queues[name]){_queues[name]=[]}
_products[name]=factory(function(){_factories[name]=!0;$.each(_queues[name],function(i,callback){callback(_products[name])});delete _queues[name]})};output.use=function(name,callback){if(typeof _factories[name]=='undefined'||_factories[name]===null){if(!_queues[name]){_queues[name]=[]}
_queues[name].push(callback)}else if(_factories[name]){$.isFunction(callback)&&callback(_products[name])}};return output}()})();zk.pushState||(function(){var _ids={};var _pushQueue=[];var _callbacks={};zk.pushState=(function(){var output={};output.push=function(name,callback,id){_ids[name]=id=id||(new Date()).getTime();_callbacks[name]=callback;var state=history.state||{};if(!state._pushed){zk.pjax.disablePopstate();history.replaceState($.extend(state,{_replaced:!0,_id:id}),'');history.pushState($.extend(state,{_pushed:!0}),'')}else{_pushQueue.push({name:name,callback:callback,id:id})}
return id};output.pop=function(){if(history.state&&history.state._pushed){history.back()}};return output})();$(window).on('popstate',function(event){zk.pjax.enable();var state=event.state;if(state&&state._replaced){history.replaceState($.extend(state,{_replaced:!1}),'');var fired=!1;$.each(_callbacks,function(name,callback){if(_ids[name]==state._id){callback();fired=!0;return !1}});if(!fired&&_pushQueue.length){var pushDef=_pushQueue.shift();zk.pushState.push(pushDef.name,pushDef.callback,pushDef.id)}}})})();zk.anchorSelector||(function(){zk.anchorSelector=function(config){if(!config.container instanceof jQuery){return !1}
var output={};output.SELECTED='selected';output.UNSELECTED='unselected';output.IGNORED='ignored';output.NOT_FOUND='not_found';output.NOT_SELECTED='not_selected';var _selection=[];config=$.extend({selection_class:'active',selection_ancestor:'a',selection_size:1,unselectable:!1,prevent_default:!0,click:null},config);var _defaults=$.isArray(config.defaults)?config.defaults:[];var $anchorSet=$('a',config.container);var _select=function(value){if($.inArray(value,_selection)>-1){if(config.unselectable){return _unselect(value)}
return{value:value,status:output.IGNORED}}
var $selection=$anchorSet.filter('#'+value);if(!$selection.length){return{value:value,status:output.NOT_FOUND}}
_selection.unshift(value);while(_selection.length>config.selection_size){$anchorSet.filter('#'+_selection.pop()).closest(config.selection_ancestor).removeClass(config.selection_class)}
$selection.closest(config.selection_ancestor).addClass(config.selection_class);return{value:value,status:output.SELECTED}};var _unselect=function(value){if($.inArray(value,_selection)===-1){return{value:value,status:output.NOT_SELECTED}}
var $selection=$anchorSet.filter('#'+value);if(!$selection.length){throw new Error('A selected item is missing when tried to be unselected')}
if(!config.unselectable&&_selection.length==1){return{value:value,status:output.IGNORED}}
_selection.splice($.inArray(value,_selection),1);$selection.closest(config.selection_ancestor).removeClass(config.selection_class);return{value:value,status:output.UNSELECTED}};output.set=function(values){values=$.isArray(values)?values:[values];$.each(values,function(i,value){if(!value){values.splice(i,1)}else if($.inArray(value,_selection)>-1){values.splice(i,1)}else{_select(value)}});return values.length};output.empty=function(){$anchorSet.closest(config.selection_ancestor).removeClass(config.selection_class);_selection=[]};output.isSelected=function(value){return $.inArray(value,_selection)>-1};$anchorSet.closest(config.selection_ancestor).filter('.'+config.selection_class).each(function(i,item){_selection.push($('a',item).attr('id'))});output.set(_defaults);$anchorSet.click(function(e){if(config.prevent_default){e.preventDefault()}
var result=_select($(this).attr('id'));result.all=_selection;if(config.click){return config.click.apply(this,[result,output])}});return output}})();zk.color||(function(){zk.color=function(color){var output={};var _rgb={r:0,g:0,b:0};var _hsv={h:0,s:0,v:0};var _hsv2rgb=function(){var h=_hsv.h;var s=_hsv.s;var v=_hsv.v;h*=6;var $I=Math.floor(h);var $F=h-$I;var $M=v*(1-s);var $N=v*(1-s*$F);var $K=v*(1-s*(1-$F));switch($I){case 0:_rgb.r=v;_rgb.g=$K;_rgb.b=$M;break;case 1:_rgb.r=$N;_rgb.g=v;_rgb.b=$M;break;case 2:_rgb.r=$M;_rgb.g=v;_rgb.b=$K;break;case 3:_rgb.r=$M;_rgb.g=$N;_rgb.b=v;break;case 4:_rgb.r=$K;_rgb.g=$M;_rgb.b=v;break;case 5:case 6:_rgb.r=v;_rgb.g=$M;_rgb.b=$N;break}
_rgb.r=Math.floor(_rgb.r*255);_rgb.g=Math.floor(_rgb.g*255);_rgb.b=Math.floor(_rgb.b*255)};var _rgb2hsv=function(){var r=_rgb.r;var g=_rgb.g;var b=_rgb.b;var $r=(r/255);var $g=(g/255);var $b=(b/255);var min=Math.min($r,$g,$b);var max=Math.max($r,$g,$b);var delta=max-min;_hsv.v=max;_hsv.h=0;_hsv.s=0;if(delta==0){_hsv.h=0;_hsv.s=0}else{_hsv.s=delta/max;var deltaR=(((max-$r)/6)+(delta/2))/delta;var deltaG=(((max-$g)/6)+(delta/2))/delta;var deltaB=(((max-$b)/6)+(delta/2))/delta;if($r==max){_hsv.h=deltaB-deltaG}else if($g==max){_hsv.h=(1/3)+deltaR-deltaB}else if($b==max){_hsv.h=(2/3)+deltaG-deltaR}
if(_hsv.h<0)_hsv.h++;if(_hsv.h>1)_hsv.h--}
_hsv.h=(_hsv.h<0)?(1+_hsv.h):_hsv.h};var _hex2rgb=function(hex){var pattern=/^#?([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})$/;if(!pattern.test(hex)){return !1}
var colors=pattern.exec(hex);return{r:parseInt(colors[1],16),g:parseInt(colors[2],16),b:parseInt(colors[3],16)}};var _webrgb2rgb=function(webrgb){var pattern=/^rgba?\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d{1,3}))?\)$/i;if(!pattern.test(webrgb)){return !1}
var channels=pattern.exec(webrgb);var converted={r:parseInt(channels[1]),g:parseInt(channels[2]),b:parseInt(channels[3])};if(channels[4]){var alpha=parseInt(channels[4]);$.each(converted,function(channel,value){converted[channel]+=Math.floor((255-value)/(256/(256-alpha)))})}
return converted};var _webhsl2hsv=function(webhsl){var pattern=/^hsla?\(\s*(\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(?:,\s*(\d(?:\.\d+?)?))?\)$/i;if(!pattern.test(webhsl)){return !1}
var channels=pattern.exec(webhsl);var converted={h:parseInt(channels[1])/360,s:parseInt(channels[2])/100,v:parseInt(channels[3])/100};if(channels[4]){converted.v*=Number(channels[4])}
return converted};var _toHex=function(){var r=_rgb.r;var g=_rgb.g;var b=_rgb.b;var hex=[r.toString(16),g.toString(16),b.toString(16)];$.each(hex,function(i,value){if(value.length==1){hex[i]='0'+value}});return hex.join('')};var _toRgba=function(opacity){var r=_rgb.r;var g=_rgb.g;var b=_rgb.b;var hex=[r,g,b,opacity||1];return 'rgba('+hex.join(',')+')'};var _computeBrightIndex=function(r,g,b){return(r*299+g*587+b*114)/1000};output.getRgb=function(format,opacity){format=format||'hex';if(format=='hex'){return '#'+_toHex()}else if(format=='rgb'){return _rgb}else if(format=='rgba'){return _toRgba(opacity)}else{return null}};output.getHsv=function(){return _hsv};output.getQuantity=function(){return(_rgb.r+_rgb.g+_rgb.b)/3};output.getBrightIndex=function(){return _computeBrightIndex(_rgb.r,_rgb.g,_rgb.b)};output.darken=function(percent,bounce){if(bounce&&(_hsv.v<0.2)){percent=-0.2}
if(percent<0){_hsv.v=Math.min(1,(1-_hsv.v)*(-1)*percent+_hsv.v)}else{_hsv.v=Math.max(0,_hsv.v-(_hsv.v)*percent)}
this.setHsv(_hsv.h,_hsv.s,_hsv.v);return this.getRgb()};output.bestContrastColor=function(){var black={bd:output.brightnessDiff('#000000'),cd:output.colorDiff('#000000')};var white={bd:output.brightnessDiff('#ffffff'),cd:output.colorDiff('#ffffff')};var contrast='ffffff';if((white.bd>125)&&(white.cd>500)){contrast='ffffff'}else if((black.bd>125)&&(black.cd>500)){contrast='000000'}
this.setWeb('#'+contrast);return this};output.colorDiff=function(r,g,b){if(r.match(/^#/)){var converted=_hex2rgb(r);r=converted.r;g=converted.g;b=converted.b}
return(Math.abs(_rgb.r-r)+Math.abs(_rgb.g-g)+Math.abs(_rgb.b-b))};output.brightnessDiff=function(r,g,b){if(r.match(/^#/)){var converted=_hex2rgb(r);r=converted.r;g=converted.g;b=converted.b}
return Math.abs(_computeBrightIndex(r,g,b)-this.getBrightIndex())};output.setHsv=function(h,s,v){_hsv.h=h;_hsv.s=s;_hsv.v=v;_hsv2rgb();return this};output.set=function(r,g,b){if(typeof r!='undefined'&&typeof g!='undefined'&&typeof b!='undefined'){return this.setRgb(r,g,b)}
return this.setWeb(r)};output.setRgb=function(r,g,b){_rgb.r=r;_rgb.g=g;_rgb.b=b;_rgb2hsv();return this};output.setWeb=function(web){var rgb;if(rgb=_hex2rgb(web)){return this.setRgb(rgb.r,rgb.g,rgb.b)}
if(rgb=_webrgb2rgb(web)){return this.setRgb(rgb.r,rgb.g,rgb.b)}
var hsv;if(hsv=_webhsl2hsv(web)){return this.setHsv(hsv.h,hsv.s,hsv.v)}
return this};if(color){output.setWeb(color)}
return output}})();zk.cookieSession||(function(){zk.cookieSession=function(options){var sVars=ZK.cookie_session;var _sessionId;options=$.extend({name:'lsessid'},options);var output={};output.getId=function(){return _sessionId};output.init=function(callback){if($.cookie(options.name)){_sessionId=$.cookie(options.name);if($.isFunction(callback)){callback()}}else{$.ajax({type:'POST',url:sVars.url.session,data:{name:options.name},dataType:'json',crossDomain:!0,xhrFields:{withCredentials:!0},success:function(response){$.cookie(options.name,response.sessionId,{expires:365*20,path:'/',domain:window.location.hostname.replace(/^www\./,'.')});_sessionId=response.sessionId;if($.isFunction(callback)){callback()}}})}};output.remove=function(callback){var logoutCount=0;$.each(sVars.url.logouts,function(_,url){$.ajax({type:'POST',url:url,dataType:'json',data:{origin:window.location.hostname,name:options.name},crossDomain:!0,xhrFields:{withCredentials:!0},success:function(){if(++logoutCount==sVars.url.logouts.length){_sessionId=null;if($.isFunction(callback)){callback()}}}})});if($.isFunction(callback)){setTimeout(function(){if(logoutCount&&logoutCount<sVars.url.logouts.length){callback()}},10000)}};return output}})();zk.crop||(function(){zk.crop=function(options){options=$.extend({target:null,width:null,height:null,upload_button:null,on_before_upload:null,on_upload:null,on_file_change:null,on_crop:null,on_cancel:null},options);var output={};var _maxWidth=Math.max(240,$(window).width()*2/3);var _maxHeight=Math.max(320,$(window).height()*2/3);var _values={};var _img={};var _filePath;var _target;if(options.target){_target=cropTarget({target:options.target,width:options.width,height:options.height})}
var _modal={$html:$('<div class="modal--standard modal--crop">'+'<h3 class="text-header text-header--big">'+ZK.crop.translate.crop_image_description+'</h3>'+'<div class="crop-modal-image"></div>'+'<div class="actions text-right"></div>'+'</div>'),$image:$('<img>'),$cancel:$('<a class="button button--reset">'+ZK.crop.translate.cancel+'</a>'),$submit:$('<input type="submit" value="'+ZK.crop.translate.crop+'" class="button button--main custom-primary__button" />')};var _uploadId;if(options.upload_button){var $button=$(options.upload_button);_uploadId=ZK.crop.upload_id+zk.guid();new AjaxUpload($button[0],{action:ZK.crop.url.upload,responseType:'json',name:_uploadId,onSubmit:function(file){if($.isFunction(options.on_before_upload)){options.on_before_upload.call(output,file)}
this.setData({id:_uploadId,name:file})},onComplete:function(file,response){if($.isFunction(options.on_upload)){options.on_upload.call(output,file,response)}
if(response.error){zk.message(ZK.crop.translate.invalid_image)}else{output.show(response.file,response.src)}},onChange:function(file){if($.isFunction(options.on_file_change)){options.on_file_change.call(output,file)}}});$button.slice(1).click(function(){$('[name='+_uploadId+']').trigger('click');return !1})}
var _initImage=function(src,callback){if(_modal.$image.data('loaded')){callback.apply(_modal.$image[0])}else{_target&&_target.setImage(src);_modal.$image=$('<img>');_modal.$image.attr('src',src+'?'+new Date().getTime());zk.loadContent(_modal.$image,function(){_modal.$image.data('loaded',!0);_img.width=_modal.$image[0].width;_img.height=_modal.$image[0].height;_img.ratio=1;if((_img.width/_img.height)>(_maxWidth/_maxHeight)){if(_img.width>_maxWidth){_img.ratio=_maxWidth/_img.width;_img.width=_maxWidth;_img.height=_img.ratio*_img.height}}else{if(_img.height>_maxHeight){_img.ratio=_maxHeight/_img.height;_img.width=_img.ratio*_img.width;_img.height=_maxHeight}}
_modal.$image.attr('width',_img.width+'px');_modal.$image.attr('height',_img.height+'px');callback.apply(this)})}};var _initCrop=function(src){var cropOptions={allowResize:1,onSelect:_refresh,onChange:_refresh};if(options.width&&options.height){cropOptions.aspectRatio=options.width/options.height}
var selection=_getSelectionBoxValues();if(selection){cropOptions.setSelect=selection;cropOptions.allowSelect=0}
_initImage(src,function(){$(this).Jcrop(cropOptions)})};var _getSelectionBoxValues=function(){if(!options.width||!options.height){return !1}
var ratio;if((_img.width>=(options.width*_img.ratio))&&(_img.height>=(options.height*_img.ratio))){ratio=_img.ratio}else{ratio=Math.min(_img.width/options.width*_img.ratio,_img.height/options.height*_img.ratio)}
var box={width:options.width*ratio,height:options.height*ratio};var selection=[];selection[0]=(_img.width-box.width)/3;selection[1]=(_img.height-box.height)/3;selection[2]=selection[0]+box.width;selection[3]=selection[1]+box.height;return selection};var _refresh=function(coords){_updateValues(coords);_refreshPreview(coords)};var _updateValues=function(coords){_values=$.extend({},coords);if(_img.ratio>0){$.each(_values,function(i,value){_values[i]=value/_img.ratio})}};var _refreshPreview=function(coords){if(!_target){return}
var ratio;if(!coords.w||!coords.h){return}
if(options.width){ratio=options.width/coords.w}else if(options.height){ratio=options.height/coords.h}
var css={marginLeft:'-'+ratio*coords.x,marginTop:'-'+ratio*coords.y};if(options.width){css.width=ratio*_img.width;css.height='auto'}else{css.width='auto';css.height=ratio*_img.height}
_target.refresh(css.width,css.height,css.marginLeft,css.marginTop)};var _crop=function(){$.ajax({url:ZK.crop.url.crop,data:$.extend({file:_filePath},_values),dataType:'json',type:'POST',success:function(response){_modal.$image.data('loaded',!1);_modal.$image.data('success',!0);zk.popup.close();_target&&_target.save();if($.isFunction(options.on_crop)){options.on_crop($.extend({file:_filePath},response))}},onError:function(){zk.message(ZK.crop.translate.try_later)}})};var _cancel=function(){if(!_modal.$image.data('loaded')){return !1}
_modal.$image.data('loaded',!1);zk.popup.close();$.Jcrop(_modal.$image).destroy();_target&&_target.cancel();if($.isFunction(options.on_cancel)){options.on_cancel()}};var _getModal=function(){var $content=_modal.$html.clone().css({width:Math.max(240,_img.width+40)+'px',height:(_img.height+125)+'px',margin:'5px auto'});var $submit=_modal.$submit.clone().click(function(){_crop();return !1});var $cancel=_modal.$cancel.clone().click(function(){zk.popup.close();return !1});$('.actions',$content).append($cancel).append($submit);$('.crop-modal-image',$content).html(_modal.$image).css({width:_img.width+'px',height:_img.height+'px',margin:'10px auto'});return $content};output.prompt=function(newOptions){this.setOptions(newOptions);if(_uploadId){$('[name='+_uploadId+']').trigger('click')}
return this};output.setOptions=function(newOptions){if(newOptions){options=$.extend(options,newOptions);if(!_target&&options.target){_target=cropTarget()}
if(_target){var targetOptions={width:options.width,height:options.height};if(options.target){targetOptions.target=options.target}
_target.setOptions(targetOptions)}}
return this};output.show=function(file,src,newOptions){_filePath=file;this.setOptions(newOptions);_initImage(src,function(){zk.popup.open(_getModal(),{show_close_button:!1,open:function(){_initCrop(src)},close:function(){if(!_modal.$image.data('success')){_cancel()}}})})};output.cancel=function(){_cancel()};output.showOriginalTarget=function(){_target.showOriginal()};return output};var cropTarget=function(options){options=$.extend({target:null,width:null,height:null},options);var output={};var $original=$();var $target,$wrapper;var _lastSrc;var _initTarget=function(){if(!options.target){return}
$original=$(options.target);_lastSrc=$original.attr('src');zk.loadContent($original,function(){if($original.siblings('.zk-crop-wrapper').length){$wrapper=$original.siblings('.zk-crop-wrapper');$target=$wrapper.find('.zk-crop-image')}else{$target=$('<img>',{class:'zk-crop-image',src:$original.attr('src')});$wrapper=$('<span>',{'class':'zk-crop-wrapper '+$original.attr('class'),css:{display:'inline-block',overflow:'hidden',position:'relative',verticalAlign:'middle',width:$original.width()+'px'}});$wrapper.append($target);$original.hide().parent().append($wrapper);$wrapper=$original.siblings('.zk-crop-wrapper');$target=$wrapper.find('.zk-crop-image')}
if(!$wrapper.is(':visible')){$wrapper.show();$original.hide()}
$wrapper.each(function(i,wrapperItem){var $wrapperItem=$(wrapperItem);var ratio=$wrapperItem.width()/options.width;if(options.height){$wrapperItem.css('height',options.height*ratio+'px')}else{$wrapperItem.css('height',$($original[i]).height()+'px')}
$wrapperItem.data('ratio',ratio)})})};_initTarget();output.cancel=function(){$target.attr('src',_lastSrc).css({width:'',height:'',marginLeft:'',marginTop:''});return this};output.setImage=function(src){$target.attr('src',src+'?'+new Date().getTime());return this};output.refresh=function(width,height,marginLeft,marginTop){var css={width:width,height:height,marginLeft:marginLeft,marginTop:marginTop};$target.each(function(_,targetItem){var $targetItem=$(targetItem);var ratio=$targetItem.closest('.zk-crop-wrapper').data('ratio');$.each(css,function(name,value){if(value==='auto'){return}
$targetItem.css(name,(value*ratio)+'px')})});return this};output.save=function(){_lastSrc=$target.attr('src');return this};output.setOptions=function(newOptions){options=$.extend(options,newOptions);_initTarget();return this};output.showOriginal=function(){$wrapper.hide();$original.show();return this};return output}})();zk.dropdownList||(function(){var TYPE={SIMPLE:'simple',SCROLLBAR:'scrollbar'};zk.dropdownList=function(options){var output={};if(!options.wrapper||(options.type&&options.type!=TYPE.SIMPLE&&options.type!=TYPE.SCROLLBAR)){return !1}
options=$.extend({duration:0,type:TYPE.SIMPLE,wrapper_max_height:50},options);var _animate=1;var $wrapper=options.wrapper;var $list=$('ul',$wrapper);var index={};$list.find('a').each(function(_,item){var $item=$(item);index[$item.data('value')]=$item});var $selectionContainer=$('.js-dropdown-selected',$wrapper);if(!$selectionContainer.length){$selectionContainer=!1}
var _listHeight=zk.getDimensions($list).height;var _wrapperOpened=!1;if(options.type==TYPE.SCROLLBAR){$list.css({display:'block',overflow:'hidden',height:'0px'});var wrapperProps={width:zk.getDimensions($wrapper).width,height:zk.getDimensions($wrapper).height,max_height:options.wrapper_max_height}}
var _toggleDrop=function(){if(options.type==TYPE.SIMPLE){var slideMethod=_wrapperOpened?'slideUp':'slideDown';$list[slideMethod](_listHeight/60*options.duration,function(){_wrapperOpened=!_wrapperOpened})}else{if(_wrapperOpened){$wrapper.animate({height:wrapperProps.height},{duration:Math.min(_listHeight,wrapperProps.max_height)/60*options.duration,complete:function(){$list.css('height','0px');$wrapper.css({'overflow-x':'','overflow-y':''});_wrapperOpened=!1}})}else{var scrolling=!1;$list.css('height','0px');$list.animate({height:_listHeight},{duration:Math.max(_listHeight,wrapperProps.max_height)/60*options.duration,step:function(currentHeight,fx){if((currentHeight-wrapperProps.height)<wrapperProps.max_height){$wrapper.css('height',currentHeight+wrapperProps.height)}else if(!scrolling){$wrapper.css({height:currentHeight+wrapperProps.height,'overflow-x':'hidden','overflow-y':'scroll',width:wrapperProps.width});scrolling=!0}},complete:function(){if(!scrolling){$wrapper.css({height:_listHeight+wrapperProps.height,overflow:'hidden'})}
_wrapperOpened=!0}})}}};output.getSelected=function(){if($selectionContainer===!1){return !1}
return $selectionContainer.find('[data-value]').data('value')};output.start=function(){_animate=1};output.stop=function(forever){_animate=forever?0:-1};output.select=function(value){if(!$selectionContainer){return}
if(!index[value]){return}
if(value==this.getSelected()){return}
$selectionContainer.html(index[value].clone())};$wrapper.click(function(e){if(!$(e.target).parentsUntil($wrapper.selector).filter('ul').length){e.preventDefault()}else if(options.on_selection){var $currentSelection=$('a',$(e.target).closest('li'));output.select($currentSelection.data('value'));options.on_selection.apply($currentSelection[0],[e])}
if($list.is(':animated')||$wrapper.is(':animated')){$list.stop();$wrapper.stop();_wrapperOpened=!_wrapperOpened}
if(_animate===1){_toggleDrop()}
_animate=Math.abs(_animate)});zk.bindGlobalEvent('click',function(e){var $target=$(e.target);if($target.closest($wrapper).length){return}
if(($list.is(':animated')||$wrapper.is(':animated'))&&!_wrapperOpened){$list.stop();$wrapper.stop();_wrapperOpened=!0;_toggleDrop()}else if(_wrapperOpened){_toggleDrop()}});return output};zk.dropdownList=$.extend(zk.dropdownList,{TYPE:TYPE})})();zk.dynamicTracker||(function(){zk.dynamicTracker=function(options){if(!ZK.dynamic_tracker){throw new Error('Required data missing to initialize dynamic tracker')}
var sVars=ZK.dynamic_tracker;options=$.extend({auto:!1,base_tracking_url:sVars.base_tracking_url,x_base_tracking_url:sVars.x_base_tracking_url,selector:'.zk-js-pageview',consecutive_pageviews:!1},options||{});var output={};var _lastTracked={google:{},fb:{}};output.track=function(url,crossUrl,options){if(typeof ga!='undefined'){crossUrl=crossUrl||options.x_base_tracking_url;url=url||options.base_tracking_url;if(options.consecutive_pageviews||_lastTracked.google.crossUrl!=crossUrl){if(options&&options.content_group){ga('x.set','contentGroup1',options.content_group)}
ga('x.send','pageview',crossUrl);_lastTracked.google.crossUrl=crossUrl}
if(options.consecutive_pageviews||_lastTracked.google.url!=url){if(options&&options.content_group){ga('set','contentGroup1',options.content_group)}
ga('send','pageview',url);_lastTracked.google.url=url}}
if(typeof fbq!='undefined'){if(options.consecutive_pageviews||_lastTracked.fb.url!=location.href){fbq('track','PageView');_lastTracked.fb.url=location.href}}};output.trackSection=function(section){var crossUrl=options.x_base_tracking_url+'/'+section;var url=options.x_base_tracking_url+'/'+section;output.track(url,crossUrl)};if(options.auto){$('body').delegate(options.selector,'click',function(){var track=$(this).attr('data-track');if(track){output.trackSection(track)}})}
return output}})();zk.facebook||(function(){zk.factories.add('facebook',function(callback){var sVars={locale:(typeof ZK!=='undefined'&&ZK.locale)||'en_US',code_uri:(typeof ZK!=='undefined'&&ZK.code_uri)||'us',fb_id:(typeof ZK!=='undefined'&&ZK.fb_id)||'8159a7727cc5a366bc215e11336a83b5',fb_version:(typeof ZK!=='undefined'&&ZK.fb_version)||'v2.6',fb_channel_url:''};var _init=(function(){var done=!1;return function(){if(done){if($.isFunction(callback)){callback()}}
done=!0;FB.init({appId:sVars.fb_id,channelUrl:sVars.fb_channel_url,status:!0,cookie:!0,xfbml:!0,oauth:!0,version:sVars.fb_version});var _onLikeOrUnlike=function(targetUrl){$.ajax({url:'/'+sVars.code_uri+'/index/facebook-like.json',type:'POST',data:{url:targetUrl},dataType:'json',success:function(response){if(response.error!=0){}}})};FB.Event.subscribe('edge.create',_onLikeOrUnlike);FB.Event.subscribe('edge.remove',_onLikeOrUnlike);if($.isFunction(callback)){callback()}}})();if(typeof FB=='undefined'){var _locale=sVars.locale;var _language=_locale.split('_')[0];var _supportedFbLocales=['ca_ES','cs_CZ','cy_GB','da_DK','de_DE','eu_ES','en_GB','en_UD','ck_US','en_US','es_LA','es_CO','es_ES','es_MX','es_VE','fb_FI','fi_FI','fr_FR','gl_ES','hu_HU','it_IT','ja_JP','ko_KR','nb_NO','nn_NO','nl_NL','pl_PL','pt_BR','pt_PT','ro_RO','ru_RU','sk_SK','sl_SI','sv_SE','th_TH','tr_TR','ku_TR','zh_CN','zh_HK','zh_TW','fb_LT','af_ZA','sq_AL','hy_AM','az_AZ','be_BY','bn_IN','bs_BA','bg_BG','hr_HR','nl_BE','eo_EO','et_EE','fo_FO','fr_CA','en_IN','ka_GE','el_GR','gu_IN','hi_IN','is_IS','id_ID','ga_IE','jv_ID','kn_IN','kk_KZ','la_VA','lv_LV','li_NL','lt_LT','mk_MK','mg_MG','ms_MY','mt_MT','mr_IN','mn_MN','ne_NP','pa_IN','rm_CH','sa_IN','sr_RS','so_SO','sw_KE','tl_PH','ta_IN','tt_RU','te_IN','ml_IN','uk_UA','uz_UZ','vi_VN','xh_ZA','zu_ZA','km_KH','tg_TJ','ar_AR','he_IL','ur_PK','fa_IR','sy_SY','yi_DE','gn_PY','qu_PE','ay_BO','se_NO','ps_AF','tl_ST','en_PI'];if($.inArray(_locale,_supportedFbLocales)==-1){$.each(_supportedFbLocales,function(i,locale){if(_language==locale.split('_')[0]){_locale=locale;return !1}})}
if(_locale!='es_ES'&&_locale.split('_')[0]=='es'){_locale='es_LA'}else if(_locale.split('_')[0]=='ar'){_locale='ar_AR'}
window.fbAsyncInit=function(){_init()};var setupHtml=function(){if(!$('#fb-root').length){$('body').prepend('<div id="fb-root"></div>')}
$('#fb-root').append($('<script>',{async:!0,src:'//connect.facebook.net/'+_locale+'/sdk.js?version='+sVars.fb_version}));$('html').attr('xmlns:og','http://opengraphprotocol.org/schema/').attr('xmlns:fb','http://www.facebook.com/2008/fbml')};if($.inArray(document.readyState,['complete','loaded'])>=0){setupHtml()}else{$(document).ready(function(){setupHtml()})}}else{_init()}});zk.facebook=function(options){options=$.extend({entrance:'undefined',code_uri:(typeof ZK!=='undefined'&&ZK.code_uri)||'us',domain:(typeof ZK!=='undefined'&&ZK.domain)||'www.zankyou.com',register_url:location.href},options);var _hasToken=function(id,token,callback){if(!token||token==''||token=='email'){callback(!0)}else{zk.factories.use('facebook',function(){FB.api('/'+id+'/permissions',function(response){if(!response||response.error){return callback(!1)}
var permissions={};$.each(response.data,function(i,fbToken){if(fbToken.status=='granted'){permissions[fbToken.permission]=!0}});var has=!0;$.each(token.split(','),function(i,tok){if(!permissions[tok]){has=!1;return !1}});return callback(has)})})}};var output={};output.login=function(token,callback,method){if($.isFunction(token)){callback=token;token=''}
if(!$.isArray(token)){token=$.grep(token.split(','),function(tok){return tok!==''})}
token.push('public_profile');token.push('email');token=$.unique(token).join(',');var fields=['email','first_name','last_name'];method=method||'getLoginStatus';if(ZK.isEventResource||(method=='login'&&navigator.userAgent.match(/CriOS|iPhone|iPad/))){var redirectUrl='https://'+options.domain+'/'+options.code_uri+'/users/facebook-registration-oauth';redirectUrl+='?'+$.param({redirect:document.location.href,entrance:options.entrance,register_url:options.register_url,fields:fields.join(',')});var version=(typeof ZK!=='undefined'&&ZK.fb_version)||'v2.6';window.location='https://www.facebook.com/'+version+'/dialog/oauth?'+$.param({client_id:ZK.fb_id,redirect_uri:redirectUrl,scope:token});return}
zk.factories.use('facebook',function(){FB[method](function(response){if(!response.authResponse){if(method=='login'){return callback(!1)}else{return output.login(token,callback,'login')}}
_hasToken(response.authResponse.userID,token,function(has){if(!has){if(method=='login'){return callback(!1)}else{return output.login(token,callback,'login')}}
FB.api('/me?fields='+$.unique(fields).join(','),function(response){callback(response)})})},method=='getLoginStatus'?!1:{scope:token})})};output.registerUser=function(token,callback){if($.isFunction(token)){callback=token;token=''}
if($.isArray(token)){token=$.unique(token).join(',')}
output.login(token,function(response){if(!response){return callback({error:!0,message:'User rejected the access request'})}
var values={id_fb_user:response.id,name:response.first_name,surname:response.last_name,email:response.email};$.ajax({url:"/"+options.code_uri+"/users/facebook-registration.json",type:'POST',data:{fb_user:values,entrance:options.entrance,register_url:options.register_url},dataType:'json',success:function(response){zk.loadPixels(response.session,function(){delete response.session;callback(response)})}})})};output.registerContact=function(token,callback){if($.isFunction(token)){callback=token;token=''}
if($.isArray(token)){token=$.unique(token).join(',')}
output.login(token,function(response){if(!response){return callback(!1)}
$.ajax({url:"/"+options.code_uri+"/event/facebook-contact.json",type:'POST',data:{enable:!0,id_fb_user:response.id},dataType:'json',success:function(response){callback(response)},error:function(response){callback(response)}})})};output.getFriends=function(callback){var token='user_friends';output.registerUser(token,function(response){if(!response||response.error){return callback(!1)}
zk.factories.use('facebook',function(){FB.api("/me/friends",function(response){if(!response||response.error){return callback(!1)}
return callback(response.data)})})})};output.getSocialShare=function(url,callback){zk.factories.use('facebook',function(){FB.api(url,callback)})};return output}})();zk.formManager||(function(){zk.formManager=function(forms){var _forms=forms||{};var _active;var _showed;var output={};output.add=function(name,options){if(!_active){_active=name}
_forms[name]=zk.form(options);return _forms[name]};output.get=function(name){name=name||_active;if(!_forms[name]){return null}
return _forms[name]};output.clone=function(name,cloneName,cloneOptions){_forms[cloneName]=this.get(name).clone(cloneOptions);return _forms[cloneName]};output.select=function(name){if(!_forms[name]){throw new Error('Selecting a not defined form: "'+name+'"')}
_active=name;return _forms[name]};output.getActiveName=function(){return _active};output.show=function(name,form){if(name){this.select(name)}
_forms[_active].show(form);_showed=_active};output.close=function(){_forms[_active].close();_showed=null};output.cloneManager=function(){var clones={};$.each(_forms,function(name,form){clones[name]=form.clone()});return zk.formManager(clones)};return output}})();zk.form||(function(){var DISPLAY={INLINE:'inline',MODAL:'modal'};var CALLBACK={BEFORE_SUBMIT:'before_submit',ON_DISABLED_SUBMIT:'on_disabled_submit',INIT:'init',LOAD_ERROR:'load_error',LOAD_EXCEPTION:'load_exception',SUCCESS:'success',ERROR:'error',EXCEPTION:'exception',OPEN:'open',CLOSE:'close'};var CONSTRAINT={ALPHA:'alpha',ALPHANUMERIC:'alphanumeric',DECIMALS:'decimals',INTEGERS:'integers'};var _flattenData=(function(){var flattened;var flatten=function(data,prefix){$.each(data,function(name,value){if(prefix){name=prefix+'['+name+']'}
if($.isArray(value)){flatten(value,name)}else if($.isPlainObject(value)){flatten(value,name)}else{flattened[name]=value}})};return function(data){flattened={};flatten(data);return flattened}})();var _submit=function(data,url,method,$files){data=_flattenData(data);var $form=$('<form>',{action:url,method:method||'POST'});if($files&&$files.length){$form.append($files);$form.attr('enctype','multipart/form-data')}else{var link=document.createElement('a');link.href=url;if(!ZK.pjax_disabled&&link.origin==location.origin){$form.on('submit',function(e){$.pjax.submit(e,$('[data-pjax-container]'))})}}
$.each(data,function(name,value){var $input=$('<input>',{type:'hidden',name:name}).val(value);if($files&&$files.filter('[name="'+name+'"]').length){return}
$form.append($input)});$form.hide();$('body').append($form);$form.submit()};zk.form=function(options){if($.type(options)==='string'||options instanceof jQuery){var target=options;options=arguments[1]||{};options.target=target}
var $target=$(options.template||options.container||options.target||[]);var $template=$target.find('form').addBack('form');if($template.length&&$template.data('zk:form')){return $template.data('zk:form').setOptions(options)}
options=$.extend({container:null,template:null,display_method:DISPLAY.MODAL,display_options:{},single_use:!1,before_submit:null,on_disabled_submit:null,init:null,load_error:null,load_exception:null,success:null,error:null,exception:null,open:null,close:null,form_url:null,processor_url:null,form_method:'GET',processor_method:'POST',form_data:{},processor_data:{},submit_on_enter:!0,auto_close_on_success:!0,auto_close_on_exception:!0,message_on_exception:!0,prevent_multi_submission:!0,disable_submission:!1,enable_transition:!0,constraints:null,lengths:{},error_response_key:'error'},options);var output={};output.id=(new Date()).getTime();var _$template,_$form;var _callbacks={};$.each(CALLBACK,function(_,name){_callbacks[name]=$.Callbacks($.extend({unique:!0},$.inArray(name,[CALLBACK.INIT,CALLBACK.LOAD_ERROR,CALLBACK.LOAD_EXCEPTION,CALLBACK.SUCCESS,CALLBACK.ERROR,CALLBACK.EXCEPTION])>=0?{memory:!0}:{}))});var _firing={};var _constraints={};var _constraintsPresets={};_constraintsPresets[CONSTRAINT.ALPHA]=/[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF ]/;_constraintsPresets[CONSTRAINT.ALPHANUMERIC]=/[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF\d ]/;_constraintsPresets[CONSTRAINT.DECIMALS]=/[\d\.,]/;_constraintsPresets[CONSTRAINT.INTEGERS]=/[\d]/;var _elements;var _initialValues;var _submitted=!1;var _submitDisabled=!1;var _opened=!1;var _display=formDisplay({form:output,open:function(){_opened=!0;_fireCallback(CALLBACK.OPEN,[_$template]);zk.form.activeInstance=output},close:function(){_opened=!1;_fireCallback(CALLBACK.CLOSE,[_$template]);zk.form.activeInstance=null}});var _fireCallback=function(name,params){if(!_firing[name]){_firing[name]=!0;var firingCallback=function(){_callbacks[name].remove(firingCallback);_firing[name]=!1};_callbacks[name].add(firingCallback);_callbacks[name].fireWith(output,params)}};var _$=function(content){if(!(content instanceof jQuery)){content=$($.trim(content))}
return content.filter('*')};var _normalizeCallbacks=function(options,useStandardName){$.each(CALLBACK,function(_,name){$.each({append:'',replace:'='},function(method,operatorChar){var extendedName=operatorChar+name;if(options[extendedName]){if(!$.isArray(options[extendedName])){options[extendedName]=[options[extendedName]]}
if(useStandardName){options[name]=options[extendedName]}}})});return options};var _initOptions=function(changes){if(changes===!0){changes=$.extend({},options);$.each(CALLBACK,function(_,name){output.removeCallbacks(name)})}
_normalizeCallbacks(changes,!0);$.each(CALLBACK,function(_,name){if(changes[name]){$.each(changes[name],function(_,callback){output.addCallback(name,callback)});delete changes[name]}});if(changes.constraints){$.each(changes.constraints,function(name,constraint){output.constraintInputChars(name,constraint)})}
if(changes.form_data){_resetTemplate()}
if(changes.target){var $target=_$(changes.target);delete changes.target;if($target.is('form')){changes.template=$target}else{changes.container=$target}}
if(changes.container){changes.container=_$(changes.container);if(changes.container.is(':visible')){_opened=!0}
if(!changes.template&&changes.container.find('form').length){changes.template=changes.container.children()}
changes.display_options=$.extend(changes.display_options||{},{container:changes.container})}
if(changes.template){changes.template=_$(changes.template);if(!_$template||_$template[0]!==changes.template[0]){_init(changes.template)}}
if(typeof changes.disable_submission!='undefined'){output.disableSubmission(changes.disable_submission,!1)}
if(changes.display_method){_display.select(changes.display_method,changes.display_options)}else if(changes.display_options){_display.setOptions(changes.display_options)}
options=$.extend(options,changes)};var _resetTemplate=function(){_submitted=!1;_elements=null;_initialValues=null;if(_$template){_$template.find('*').off()}
_$template=_$form=null};var _get=function(callback){$.ajax({url:options.form_url,type:options.form_method,data:options.form_data}).done(function(response){if(response[options.error_response_key]>0){_fireCallback(CALLBACK.LOAD_ERROR,[response]);if(response.form){callback(response.form)}}else{callback(response.form)}}).error(function(jqXHR,textStatus,errorThrown){_fireCallback(CALLBACK.LOAD_EXCEPTION,[{error:-1000,message:textStatus}]);if(options.auto_close_on_exception){output.close()}
if(options.message_on_exception){zk.message({message:textStatus})}})};var _init=function(form){_resetTemplate();_$template=_$(form);_$form=_$template.find('form').addBack('form');_$form.data('zk:form',output);if(!_initialValues){_initialValues=output.getValues()}
if(typeof FB!=='undefined'){_$template.each(function(){FB.XFBML.parse(this)})}
if(typeof $.fn.placeholder!=='undefined'){$('input, textarea',_$form).placeholder()}
$('.js-zk-form-cancel',_$template).click(function(){output.cancel();return !1});_$form.submit(function(e){e.preventDefault();output.submit(undefined,undefined,!1)});_$form.find(':input').keypress(function(e){var charCode=(typeof e.which=="number")?e.which:e.keyCode;if(!options.submit_on_enter){if(charCode==13){return !1}}
var constraint=_constraints[$(this).attr('name')];if(constraint){if(!String.fromCharCode(charCode).match(constraint)){return !1}}
var length=options.lengths[$(this).attr('name')];if(length&&$(this).val().length>=length){return !1}});_fireCallback(CALLBACK.INIT,[_$template])};var _getElements=function(){if(!_$form){return !1}
if(!_elements){_elements={};_$form.find(':input').each(function(_,element){var $element=$(element);if(!$element.attr('name')){return}
var name=$element.attr('name').replace(/\[]/g,'');var merge=$element.attr('name').match(/\[]/)||$element.is(':radio');if(_elements[name]&&merge){$element=_elements[name].add($element)}
_elements[name]=$element})}
return _elements};var _submitData=function(data){if(!$.isPlainObject(data)){data=output.getValues()}
$.each(['form_data','processor_data'],function(_,dataKey){if(options[dataKey]){data=$.extend(data,options[dataKey])}});return data};output.setOptions=function(newOptions){var changes={};_normalizeCallbacks(newOptions);$.each(CALLBACK,function(_,name){$.each({append:'',replace:'='},function(method,operatorChar){var extendedName=operatorChar+name;if(newOptions[extendedName]){newOptions[name]=newOptions[extendedName];if(method=='replace'){output.removeCallbacks(name)}}})});$.each(newOptions,function(name,value){if(!options[name]||options[name]!==value){changes[name]=value}});_initOptions(changes);return this};output.getOption=function(name){return options[name]};output.removeCallbacks=function(name){if(!_callbacks[name]){throw new Error('Unsupported callback: "'+name+'"')}
options[name]=null;_callbacks[name].empty();_firing[name]=!1;return this};output.getCallbacks=function(name){if(!_callbacks[name]){throw new Error('Unsupported callback: "'+name+'"')}
return options[name]||[]};output.addCallback=function(name,callback){if(!_callbacks[name]){throw new Error('Unsupported callback: "'+name+'"')}
if(!options[name]){options[name]=[]}
options[name].push(callback);_callbacks[name].add(callback);return this};output.setCallback=function(name,callback){return this.removeCallbacks(name).addCallback(name,callback)};output.clone=function(cloneOptions){var clone=zk.form($.extend({},options));if(cloneOptions){clone.setOptions(cloneOptions)}
return clone};output.get=function(name,subform){if(!arguments.length){return _$template}
var elements=_getElements();if(!elements){return}
if(subform){name=subform+'['+name+']'}
var $input=elements[name];if(!$input){return $()}
return $input};output.isOpen=function(){return _opened};output.toggle=function(){output[_opened?'close':'open']()};output.show=output.open=function(template){if(template){_init(template)}
if(!_$template){output.transition(!0,!1);_get(function(template){output.open(template)})}else{_display.open()}
return this};output.hide=output.close=function(){_display.close();return this};output.cancel=function(){return this.close().reset()};output.isSubmissionDisabled=function(){return _submitDisabled};output.disableSubmission=function(disable,disableButton){if(typeof disable=='undefined'){disable=!0}
if(typeof disableButton=='undefined'){disableButton=!0}
if(disableButton){_$form.find(':submit').prop('disabled',disable)}
_submitDisabled=disable};output.disableElement=function(name,subform,disable){var $input=output.get(name,subform);if(!$input.length){return}
if(arguments.length<3){disable=subform}
if(typeof disable=='undefined'){disable=!0}
$input.prop('disabled',disable)};output.setError=function(name,subform,message){this.removeError(name,subform).addError(name,subform,message);return this};output.addError=function(name,subform,message){var $input=output.get(name,subform);if(!$input.length){return}
if(arguments.length<3){message=subform}
if($input.length>1){$input=$input.first()}
if(!$input.closest('.has-error').length){$input.wrap('<div class="has-error"></div>')}
$input.parent().append('<span class="form-error">'+message+'</span>');return this};output.removeError=function(name,subform){var $input=output.get(name,subform);if(!$input.length){return}
if($input.length>1){$input=$input.first()}
var $errorWrapper=$input.closest('.has-error');if($errorWrapper.length){$errorWrapper.find('.form-error').remove();$input.unwrap()}
return this};output.nativeSubmit=function(data){_submit(_submitData(data),_$form.attr('action'),_$form.attr('method'),_$form.find('[type=file]'))};output.submit=function(data,callback,force){if(typeof force=='undefined'){force=!0}
if(_submitted&&options.prevent_multi_submission){return !1}
_submitted=!0;data=_submitData(data);_fireCallback(CALLBACK.BEFORE_SUBMIT,[data]);if(!force&&_submitDisabled){_submitted=!1;_fireCallback(CALLBACK.ON_DISABLED_SUBMIT,[data]);return !1}
var url=options.processor_url||options.form_url;if(!url){output.nativeSubmit(data);return !0}
var ajaxOptions={url:url,type:options.processor_method,data:data,dataType:'json'};if($.isFunction(callback)){$.ajax(ajaxOptions).done(function(response){callback.apply(output,[response])})}else{output.transition(!0,!1);$.ajax(ajaxOptions).done(function(response){if(response[options.error_response_key]>0){_fireCallback(CALLBACK.ERROR,[response]);if(response.form){output.show(response.form)}}else{_initialValues=output.getValues();if(!options.single_use){_submitted=!1;output.transition(!1,!1)}
if(options.auto_close_on_success){output.close()}
_fireCallback(CALLBACK.SUCCESS,[response])}}).error(function(jqXHR,textStatus,errorThrown){_submitted=!1;_fireCallback(CALLBACK.EXCEPTION,[{error:-1000,message:textStatus}]);if(options.auto_close_on_exception){output.close()}
if(options.message_on_exception){zk.message(textStatus)}})}
return !0};output.transition=function(show,force){if(typeof show=='undefined'){show=!0}
if(typeof force=='undefined'){force=!0}
if(force||options.enable_transition){_display.transition(show)}};output.constraintInputChars=function(name,subform,constraint){if(arguments.length<3){constraint=subform;subform=undefined}
if(subform){name=subform+'['+name+']'}
if($.type(constraint)!='regexp'){constraint=_constraintsPresets[constraint]}
if(!constraint){return this}
_constraints[name]=constraint};output.removeConstraint=function(name,subform){if(!arguments.length){_constraints={};return this}
if(subform){name=subform+'['+name+']'}
delete _constraints[name]};output.focus=function(name,subform){if(!_$form){return this}
var $element;if(!name){$element=_$form.find(':input').first()}else{$element=this.get(name,subform)}
$element.focus();return this};output.reset=function(){return this.setValues(_initialValues)};output.clear=function(){if(!_$form){return this}
_$form.find(':input').not(':button, :submit, :reset, [type=hidden]').val('').removeAttr('checked').removeAttr('selected');return this};output.getValues=function(){if(!_$form){return null}
var values={};$.each(_$form.serializeArray(),function(_,input){var name=input.name.replace(/\[]/g,'');if(values[name]&&output.get(name).length>1){if(!$.isArray(values[name])){values[name]=[values[name]]}}
if($.isArray(values[name])){values[name].push(input.value)}else{values[name]=input.value}});return values};output.getValue=function(name,subform){var values=this.getValues();if(subform){name=subform+'['+name+']'}
return values&&values[name]};output.setValues=function(values){$.each(values,function(name,value){output.setValue(name,value)});return this};output.setValue=function(name,subform,value){if(arguments.length<3){value=subform;subform=undefined}
var $input=this.get(name,subform);if(!$input.length){return this}
if($input.length>1){if(value){this.setValue(name,subform,!1);if(!$.isArray(value)){value=[value]}
var selector=[];$.each(value,function(_,val){selector.push('[id$="-'+val+'"]')});$input=$input.filter(selector.join(','));value=!0}}
if($input.is(':checkbox, :radio')){$input.prop($input.is(':checkbox')?'checked':'selected',value)}else{$input.val(value)}
return this};output.hasChanged=function(name,subform,trim,insensitive){if(arguments.length<4){if($.inArray($.type(subform),['boolean','number'])>-1){insensitive=trim;trim=subform;subform=undefined}}
var value=this.getValue(name,subform);if(subform){name=subform+'['+name+']'}
var initialValue=_initialValues[name];if(trim){value=$.trim(value);initialValue=$.trim(initialValue)}
if(insensitive){value=value.toString().toLowerCase();initialValue=initialValue.toString().toLowerCase()}
return value!==initialValue};_initOptions(!0);return output};zk.form=$.extend(zk.form,{DISPLAY:DISPLAY,CALLBACK:CALLBACK,CONSTRAINT:CONSTRAINT,submit:_submit});var formDisplay=function(options){options=$.extend({method:DISPLAY.MODAL,open:$.noop(),close:$.noop(),container:null,animation:null,strict_modal:!0,show_close_button:!0},options);var _interface=['init','open','close','initOptions','transition'];var _methods={};var _selected;var _select=function(){_selected=_methods[options.method];_selected.initOptions()};var output={};output.addMethod=function(name,method){var instance=method();$.each(_interface,function(_,funcName){if(!$.isFunction(instance[funcName])){throw new Error('Given method "'+name+'" does not support the required interface')}});_methods[name]=instance};output.select=function(method,newOptions){options.method=method;if(newOptions){options=$.extend(options,newOptions)}
_select();return this};output.setOptions=function(newOptions){if(newOptions){options=$.extend(options,newOptions);_selected.initOptions()}
return this};$.each(['open','close','transition'],function(_,methodName){output[methodName]=function(){if(!_selected){throw new Error('No active method to execute "'+methodName+'"')}
_selected[methodName].apply(output,arguments)}});var _baseMethod=function(){var _form;return{init:function(form){_form=form},getTemplate:function(){return _form.get()},transition:function(show){},initOptions:function(){}}};output.addMethod(DISPLAY.MODAL,function(){var methodOutput=_baseMethod();var onTransition=!1;var fired=!1;var $spinner=(function($div){new Spinner({length:20,width:10,radius:40}).spin($div[0]);return $div})($('<div>'));var fireOpen=function(){if(!onTransition&&!fired){fired=!0;options.open()}};var popupOptions={show_close_button:options.show_close_button,strict_modal:!options.strict_modal,afterChange:function(){if(zk.popup.isOpen()){fireOpen()}},open:function(){$(document).trigger('zk:form:open');fireOpen()},close:function(){$(document).trigger('zk:form:close');options.close()}};methodOutput.transition=function(){onTransition=!0;zk.popup.open($spinner,popupOptions)};methodOutput.open=function(){onTransition=fired=!1;zk.popup.open(methodOutput.getTemplate(),popupOptions)};methodOutput.close=function(){zk.popup.close()};return methodOutput});output.addMethod(DISPLAY.INLINE,function(){var methodOutput=_baseMethod();var $container;var animation;var $spinner=(function($div){$div.append($('<div>').css({width:'100%',height:'100%',backgroundColor:'rgba(256, 256, 256, 0.75)',position:'absolute',top:0,left:0}));new Spinner({length:20,width:10,radius:40}).spin($div[0]);return $div})($('<div>'));var _initContainer=function(){if($container){return}
if(options.container){$container=$(options.container)}};var _initAnimation=function(){if($.isPlainObject(options.animation)){if(options.animation.speed||options.animation.type){animation=$.extend({speed:'fast',type:'default'},options.animation)}}else if(options.animation){animation={speed:'fast',type:options.animation}}
if(animation){var normalized={'default':{show:'show',hide:'hide'},fade:{show:'fadeIn',hide:'fadeOut'},slide:{show:'slideDown',hide:'slideUp'}};animation.type=normalized[$.inArray(animation.type,['fade','slide'])>=0?animation.type:'default']}};var animate=function(type,callback){if(animation){$container[animation.type[type]](animation.speed,function(){callback()})}else{$container[type]();callback()}};methodOutput.open=function(){if(!$container){return}
var $template=methodOutput.getTemplate();if($template&&$template[0]!==$container.children()[0]){$container.html($template)}
animate('show',options.open)};methodOutput.close=function(){if(!$container){return}
animate('hide',options.close)};methodOutput.initOptions=function(){_initContainer();_initAnimation()};methodOutput.transition=function(show){var $template=methodOutput.getTemplate();if(!$template){return}
if(!$container){$container=$template.parent()}
if(!$container.has($spinner).length){$container.append($spinner)}
$spinner[show?'show':'hide']()};return methodOutput});if(options.form){$.each(_methods,function(_,method){method.init(options.form)})}
_select();return output}})();zk.ga||(function(){zk.ga=function(options){options=$.extend({time_threshold:15000,scroll_jumps:2,gaNamespaces:[],custom_event:'page read'},options);var output={};var _visitTookTime=!1;var _didScroll=!1;var _scrollCount=0;var _eventSent=!1;var _sendCustomEvent=function(){if(_didScroll&&_visitTookTime&&!_eventSent){_eventSent=!0;var message='page visit '+(options.time_threshold/1000)+' seconds and scroll';ga('send','event',options.custom_event,message);$.each(options.gaNamespaces,function(i,value){ga(value+'.send','event',options.custom_event,message)})}};var _testScroll=function(){if(++_scrollCount==options.scroll_jumps){_didScroll=!0}
_sendCustomEvent()};var _timeElapsed=function(){_visitTookTime=!0;_sendCustomEvent()};output.startCustomEventRegistering=function(){if(typeof ga!=='function'){return}
setTimeout(_timeElapsed,options.time_threshold);window.addEventListener?window.addEventListener('scroll',_testScroll,!1):window.attachEvent('onScroll',_testScroll)};return output}})();zk.intercom||(function(){var _cookieSession=zk.cookieSession({name:'ZK-INTERCOM'});zk.factories.add('intercom',function(callback){if(!ZK.intercom){return}
var toInit=2;var fireCallback=function(){if(--toInit===0){if($.isFunction(callback)){callback()}}};var w=window;if(typeof w.Intercom=='function'){return fireCallback()}
var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=!0;s.src='https://widget.intercom.io/widget/'+ZK.intercom.appId;if(s.attachEvent){s.attachEvent('onload',fireCallback)}else{s.addEventListener('load',fireCallback,!1)}
var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x)}
if(w.attachEvent){w.attachEvent('onload',l)}else{w.addEventListener('load',l,!1)}
_cookieSession.init(function(){fireCallback()})});zk.intercom=(function(){var _isChatVisible=!1;var _forcedShow=!1;var _setSettings=function(settings,callback){zk.factories.use('intercom',function(){if(ZK.intercom.user){settings=$.extend(ZK.intercom.user,settings||{});if(ZK.intercom.url&&ZK.intercom.url.synced_pixel){zk.loadPixels(ZK.intercom.url.synced_pixel)}}
settings=$.extend({app_id:ZK.intercom.appId,language_override:ZK.intercom.language,anonymous_id:_cookieSession.getId()},settings||{});var w=window;var ic=w.Intercom;w.intercomSettings=settings;if(typeof ic=='function'){ic('reattach_activator');ic('update',settings)}
if($.isFunction(callback)){callback()}})};var output={};output.init=function(){_setSettings({},function(){zk.intercom.hideChat()})};output.showChat=function(settings,force){_isChatVisible=!0;zk.factories.use('intercom',function(){Intercom('boot',$.extend(settings||{},{hide_default_launcher:_forcedShow&&!force}))})};output.hideChat=function(settings){zk.factories.use('intercom',function(){Intercom('boot',$.extend(settings||{},{hide_default_launcher:!0}))})};output.newMessage=function(message){zk.factories.use('intercom',function(){Intercom('showNewMessage',message||'')})};output.openMessages=function(){zk.factories.use('intercom',function(){Intercom('show')})};output.closeMessages=function(){zk.factories.use('intercom',function(){Intercom('hide')})};output.shutdown=function(callback){zk.factories.use('intercom',function(){_cookieSession.remove(function(){Intercom('shutdown');if($.isFunction(callback)){callback()}})})};output.isChatVisible=function(){return _isChatVisible};output.setForcedShow=function(forced){_forcedShow=typeof forced=='undefined'?!0:forced};return output})();$(document).on('zk:form:open zk:offcanvas:open zk:filter:open',function(){if(zk.intercom.isChatVisible()){zk.intercom.hideChat()}});$(document).on('zk:form:close zk:offcanvas:close zk:filter:close',function(){if(zk.intercom.isChatVisible()){zk.intercom.showChat()}})})();zk.intro||(function(){zk.intro=function(config){var _duration=config.duration||10;var _intro='<div style="width:'+($(window).width()-100)+'px; height:'+($(window).height()-100)+'px; -moz-border-radius: 10px 10px 10px 10px; background: none repeat scroll 0 0 #FFFFFF; padding: 20px 15px; margin: 0 auto;">'+'<object type="application/x-shockwave-flash" data="'+config.swfPath+'" width="100%" height="100%" id="animacion" align="middle">'+'<param name="allowScriptAccess" value="sameDomain" />'+'<param name="allowFullScreen" value="false" />'+'<param name="FlashVars" value="configuration='+config.xmlPath+'" />'+'<param name="movie" value="'+config.swfPath+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#ffffff" />'+'<param name="wmode" value="transparent" />'+'</object>'+'</div>';var _startTimeout=function(){setTimeout(function(){zk.popup.close()},5000+_duration*2000)};return{showIntro:function(){zk.popup.open(_intro,{open:function(){if($.isFunction(config.timeout)){config.timeout()}else{_startTimeout()}}})}}}})();zk.loadContent||(function(){zk.loadContent=function(content,callback,progressCallback){if(!(content instanceof jQuery)){content='<div>'+content+'</div>'}
var $content=$(content);var $images=$content.find('img').addBack('img');var total=$images.length;var count=0;if(total===0){return callback&&callback($content)}
$images.one('load error abort',function(){count+=1;if(progressCallback){progressCallback(count/total)}
if(count===total){callback&&callback($content)}}).each(function(){if(this.complete)$(this).load()})}})();zk.loadPixels||(function(){var urlRegex=/(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b)?([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;zk.loadPixels=function(src,callback){callback=callback||$.noop;if($.isPlainObject(src)){src=$.map(src,function(url){return url})}else if(!$.isArray(src)){src=[src]}
$.each(src,function(i,url){if(location.protocol=='https:'){var link=document.createElement('a');link.href=url;if(link.protocol!='https:'){src.splice(i,1);return}}
if(!url||!url.match(urlRegex)){src.splice(i,1)}});if(!src.length){callback();return}
var count=0;$.each(src,function(i,url){$('<img>').attr('src',url).one('load error',function(){if(++count===src.length){return callback()}}).each(function(){if(this.complete)$(this).load()})})}})();zk.locationAutocomplete||(function(){zk.locationAutocomplete=(function(){var icons=function(options){var $cross=options.cross;var $loader=options.loader;var $mapPin=options.mapPin;var $active;var output={};output.showLoader=function(show){if(show||typeof show==='undefined'){$active.hide();$loader.show()}else{$loader.hide();$active.show()}};output.showCross=function(show){if(show||typeof show==='undefined'){$cross.show();$mapPin.hide();$active=$cross}else{$cross.hide();$mapPin.show();$active=$mapPin}};return output};var autocomplete=function(options){var sVars=ZK.location_autocomplete;this.ID_MORE_RESULTS='__more_results';options=$.extend({noResultsBlock:!1},options);var output={};var _moreResults=!1;var _lastTerm=null;var _lastSuggestions=null;var $input=options.inputField;var $hidden=options.hiddenField;var $hintBlock=options.hintBlock;var $container=options.container;if(!$input.length||!$hidden.length||!$hintBlock.length){zk.log('Error: search suggestion not loaded using config: '+options);return !1}
$hintBlock.width($input.outerWidth()-2);var $noResultsBlock=options.noResultsBlock;if($noResultsBlock){$noResultsBlock.hide();$noResultsBlock.width($hintBlock.outerWidth())}
var _setId=function(id){if(typeof id==='undefined'){$hidden.val('')}else{if($.isFunction(options.filterId)){id=options.filterId(id)}
$hidden.val(id);options.icons&&options.icons.showCross()}};var _setText=function(label){$input.val(label)};var _setPlaceholder=function(label){$input.attr('placeholder',label)};var _prepareHint=function(){$('.ui-autocomplete',$hintBlock).removeClass('ui-corner-all');$('.ui-autocomplete li.ui-menu-item a.ui-corner-all',$hintBlock).removeClass('ui-corner-all')};var _showNoResults=function(show){if($noResultsBlock){if(show||typeof(show)=='undefined'){$noResultsBlock.show()}else{$noResultsBlock.hide()}}
options.icons&&options.icons.showLoader(!1)};var self=this;var _autocomplete=$input.autocomplete({minLength:1,delay:50,source:function(request,response){if(request.term===''||request.term===sVars.translate.provide_city){response([]);return}
options.icons&&options.icons.showLoader();var _sourceFunction=_moreResults?options.more:options.source;_sourceFunction(request.term,function(suggestions){$input.trigger('zk:location:response',[output,suggestions]);if(typeof options.more!=='undefined'){if(_sourceFunction===options.source){_lastSuggestions=[];suggestions.push({label:sVars.translate.more_results+" &raquo;",id:self.ID_MORE_RESULTS})}else{var merged=[];for(var i=0,l=_lastSuggestions.length-2;i<=l;i++){merged.push(_lastSuggestions[i])}
for(var i=0,l=suggestions.length-1;i<=l;i++){var found=!1;for(var ii=0,ll=_lastSuggestions.length-1;ii<=ll;ii++){if(_lastSuggestions[ii].id===suggestions[i].id){found=!0}}
if(!found){merged.push(suggestions[i])}}
suggestions=merged}}
if(_moreResults){_moreResults=!1}
options.icons&&options.icons.showLoader(!1);_showNoResults(suggestions.length===0);response(suggestions);_lastTerm=request.term;_lastSuggestions=suggestions})},appendTo:$hintBlock,open:function(event,ui){_prepareHint();$input.trigger('zk:location:open',[output,ui])},select:function(event,ui){if($.isFunction(options.onselect)){options.onselect(ui.item)}
if(ui.item.id===self.ID_MORE_RESULTS){_moreResults=!0;_autocomplete.autocomplete("search",_lastTerm);ui.item.value=_lastTerm}else{$input.trigger('zk:location:select',[output,ui.item]);_setId(ui.item.id);ui.item.value=$('<div>').html(ui.item.label).text()}
output.restart()},focus:function(event,ui){event.preventDefault();if(ui.item.id!==self.ID_MORE_RESULTS){$input.trigger('zk:location:focus',[output,ui.item]);_setId(ui.item.id);$input.val($('<div>').html(ui.item.label).text())}}});_autocomplete.data('ui-autocomplete')._renderItem=function(ul,item){return $('<li></li>').data('ui-autocomplete-item',item).append($('<a></a>').html(item.label)).appendTo(ul)};output.clear=function(){_setId();_setText('');_setPlaceholder(sVars.translate.provide_city);options.icons&&options.icons.showCross(!1)};output.getId=function(){return options.id};output.restart=function(){_lastSuggestions=[]};$input.on('focus',function(){if(_lastSuggestions&&_lastSuggestions.length>0){$container.find('.ui-widget-content').show()}});$input.on('focusout',function(){_showNoResults(!1);output.restart()});$input.on('focusin',function(){$input.select()});$input.on('mouseup',function(e){e.preventDefault()});$input.on('blur',function(){if($hidden.val()===''){output.clear()}});$input.on('keyup',function(event){var key=event.which;if(key==13||(key>=37&&key<=40)||key==16||key==27){return}
_setId()});return output};var inputs={};var init=function(hidden,locationType,ancestorType,ancestorId,$context){var sVars=ZK.location_autocomplete;inputs[hidden instanceof jQuery?hidden[0].id:hidden]={hidden:hidden,locationType:locationType,ancestorType:ancestorType,ancestorId:ancestorId};var $hidden=(hidden instanceof jQuery?hidden:$('#'+hidden,$context));if(!$hidden.length){return}
if(!sVars){return}
var $container=$hidden.closest('.zk-autocomplete-location-cnt');var $country=$container.find('.zk-autocomplete-location-country');var $input=$container.find('.zk-autocomplete-location');if(!$container.length||!$country.length||!$input.length){throw new Error("Please ensure that you have 3 required DOM elements (check documentation)")}
var _icons=icons({cross:$container.find('#clear-location'),loader:$container.find('.loading'),mapPin:$container.find('.icon_pin-map')});var _getSuggestions=function(term,callback,params){if(typeof this.lastRequest!=='undefined'){this.lastRequest.abort();try{delete this.lastRequest}catch(e){this.lastRequest=undefined}}
params=$.extend({discovery:!1},params);var _ancestorType=ancestorType||'country';var _ancestorId=ancestorId||$country.val();this.lastRequest=$.ajax({url:sVars.url.get_suggestions_location,data:{term:term.split(' (')[0],ancestor_type:_ancestorType,ancestor_id:_ancestorId,type:locationType,discovery:params.discovery?1:0},datatype:'json',success:function(data){callback(data.array)}})};var _locationAutocomplete=autocomplete({id:$hidden[0].id,inputField:$input,hiddenField:$hidden,noResultsBlock:$container.find('#hint-autocomplete').children('#ui-elem-no-results'),hintBlock:$container.find('#hint-autocomplete'),container:$container,icons:_icons,filterId:function(id){return id.split('#')[0]},more:function(term,callback){_getSuggestions(term,callback,{discovery:!0})},source:function(term,callback){_getSuggestions(term,callback,{discovery:!1})}});if($hidden.val()){_icons.showCross()}else{_locationAutocomplete.clear()}
$country.on('change',function(){_locationAutocomplete.clear()});$container.find('#clear-location').on('click',function(){_locationAutocomplete.clear()});return _locationAutocomplete};var output={};output.init=function(hidden,locationType,ancestorType,ancestorId){return init(hidden,locationType,ancestorType,ancestorId)};output.reload=function(hidden,$context){if(!inputs[hidden]){return !1}
return init(inputs[hidden].hidden,inputs[hidden].locationType,inputs[hidden].ancestorType,inputs[hidden].ancestorId,$context)};return output})()})();zk.mailcheck||(function(){zk.mailcheck=function(input,$form){var sVars=ZK.mailcheck;var $input=input instanceof jQuery?input:$('#'+input,$form);if(!$input.length){return}
var $clue=$('<span class="f-r info" style="display: none;"></span>');$clue.insertAfter($input);var $info=$clue.siblings('.info');var config={domains:['163.com','alice.it','aliceadsl.fr','aol.com','aol.es','aon.at','arcor.de','att.net','bbox.fr','bellsouth.net','bluemail.ch','bluewin.ch','blueyonder.co.uk','bol.com.br','btinternet.com','cegetel.net','chello.at','clix.pt','club-internet.fr','comcast.net','COX.NET','dbmail.com','email.com','email.it','fastwebnet.it','free.fr','freenet.de','ge.com','globo.com','globomail.com','gmail.com','gmail.com.br','gmail.es','gmx.com','gmx.de','gmx.net','googlemail.com','hispeed.ch','homail.com','hotmail.co.uk','hotmail.com','hotmail.com.ar','hotmail.es','hotmail.fr','hotmail.it','hotmal.com','hp.com','ibest.com.br','ig.com.br','interfree.it','interia.eu','interia.pl','inwind.it','iol.it','katamail.com','laposte.net','libero.it','libertysurf.fr','limao.com.br','live.co.uk','live.com','live.com.ar','live.fr','mac.com','mail.com','mail.es','mailinator.com','me.com','msn.com','netcabo.pt','netcourrier.com','neuf.fr','noos.fr','ntlworld.com','numericable.fr','o2.pl','oi.com.br','onet.eu','onet.pl','online.fr','ono.com','op.pl','orange.fr','pop.com.br','portugalmail.pt','poste.it','qq.com','r7.com','rocketmail.com','sapo.pt','sbcglobal.net','secuoyas.com','sfr.fr','sky.com','skynet.be','sunrise.ch','talk21.com','tele2.it','telefonica.net','telenet.be','teletu.it','terra.com.br','terra.es','tin.it','tiscali.it','tlen.pl','t-online.de','uol.com.br','verizon.net','videotron.ca','virgilio.it','vodafone.it','voila.fr','vp.pl','wanadoo.es','wanadoo.fr','web.de','wp.pl','wp.pl','yahoo.co.uk','yahoo.com','yahoo.com.br','yahoo.es','ymail.com','yopmail.com','zipmail.com.br'],topLevelDomains:["com","net","org","info","edu","gov","mil","co.uk","es","pl","nl","it","fr","de","pt","mx","br","ch","at","ie","ve","ec","pe","ar","co","cl","at","be"]};var _suggest=function(suggestion){var link='<a href="#" class="suggestion custom-link">'+suggestion.address+'&#64;'+suggestion.domain+'</a>';var msg=sVars.translate.did_you_mean.replace('%s',link);$clue.html(msg).fadeIn(200);$info.hide()};$input.blur(function(){$clue.hide().empty();$(this).mailcheck({domains:config.domains,topLevelDomains:config.topLevelDomains,suggested:function(element,suggestion){_suggest(suggestion)}})});$clue.click(function(){$input.val($(this).find('.suggestion').text());$input.blur();$(this).fadeOut(200,function(){$(this).empty();$info.fadeIn(100)});return !1});return{suggest:_suggest}}})();zk.onDocumentReady(['maps'],function(sVars){zk.maps=function(config){if(!google.maps)return !1;if(!config.container)return !1;config=$.extend({zoom:14,on_form:!1,marker_draggable:!1,map_type_id:google.maps.MapTypeId.ROADMAP,map_type_control:!0,street_view_control:!0},config);var output={};var $mapCanvas=$(config.container);var $mapWrapper=config.wrapper?$(config.wrapper):$mapCanvas;if(config.on_form){var _input={lat:config.input_lat?$(config.input_lat):$('#lat'),lon:config.input_lon?$(config.input_lon):$('#lon')};if(config.input_address){_input.address=$(config.input_address)}
if(config.input_postalcode){_input.postalcode=$(config.input_postalcode)}
if(config.input_country){_input.countrycode=config.input_country}}
var _map;var _mapOptions={zoom:config.zoom,scrollwheel:!1,mapTypeId:config.map_type_id,mapTypeControl:config.map_type_control,streetViewControl:config.street_view_control};var _geocoder=new google.maps.Geocoder();var _points=[];var _icons={'-1':new google.maps.MarkerImage(sVars.default_icon.image)};$.each(sVars.icons,function(i,icon){_icons[icon.id]=new google.maps.MarkerImage(icon.url)});var _markerOptions={icon:_icons['-1'],shadow:sVars.default_icon.shadow?new google.maps.MarkerImage(sVars.default_icon.shadow,null,null,new google.maps.Point(5,38)):'',draggable:config.marker_draggable};var _getInfoWindow=function(options){var infoWindow={image:{type:'image',raw:'<img src="__CONTENT__" class="image" />'},link:{raw:'<a href="__CONTENT__" class="custom-link"></a>'},title:{type:'content',raw:'<h2 class="text-header text-header--bold mbs">__CONTENT__</h2>'},description:{type:'content',raw:'<div>__CONTENT__</div>'}};$.each(options,function(name,value){if(name in infoWindow){if(value instanceof jQuery){infoWindow[name].html=value}else{infoWindow[name].html=$(infoWindow[name].raw.replace('__CONTENT__',value))}}});if(infoWindow.link.html&&infoWindow.title.html){infoWindow.title.html.wrapInner(infoWindow.link.html)}
delete infoWindow.link;var content=$('<div class="data">');$.each(infoWindow,function(i,value){if(value.html&&value.type==='content'){content.append(value.html)}});return new google.maps.InfoWindow({content:$('<div class="google-minibox" />').prepend(infoWindow.image.html).append(content)[0]})};var _setMarker=function(options,index){var target=_points[index]=_points[index]||{};target.markerOptions=target.markerOptions||$.extend({},_markerOptions);if(options.point){target.markerOptions.position=options.point}
if(options.map){target.markerOptions.map=options.map}
if(options.icon&&_icons[options.icon]){target.markerOptions.icon=_icons[options.icon]}
if(target.marker){target.marker.setOptions(target.markerOptions)}else{target.marker=new google.maps.Marker(target.markerOptions)}
if(options.info_window){target.info_window=_getInfoWindow(options.info_window);google.maps.event.addListener(target.marker,'click',function(){$.each(_points,function(i,point){if(point.info_window){point.info_window.close()}});target.info_window.open(_map,target.marker)});if(options.info_window.trigger_on){$(options.info_window.trigger_on).click(function(){google.maps.event.trigger(target.marker,'click')})}}
if(config.on_form&&config.marker_draggable){google.maps.event.addListener(target.marker,'mouseup',function(){_input.lat.val(target.marker.getPosition().lat().toFixed(6));_input.lon.val(target.marker.getPosition().lng().toFixed(6));if($.isFunction(config.ondropMarker)){config.ondropMarker()}})}};var _initMap=function(){if(!_map){_map=new google.maps.Map($mapCanvas[0]);_markerOptions.map=_map;$.each(_points,function(i,pointObject){_setMarker({map:_map},i)})}};var _setPoint=function(point,append){var markerOptions={point:point};var index=append?_points.length:0;if(!_points[index]){_points[index]={}}
_points[index].point=point;_setMarker(markerOptions,index);if(config.on_form){_input.lat.val(point.lat().toFixed(6));_input.lon.val(point.lng().toFixed(6))}};var _refreshMap=function(){_initMap();if(_points.length===0){return}else if(_points.length>1){var boundingBox=new google.maps.LatLngBounds();$.each(_points,function(i,pointObject){boundingBox.extend(pointObject.point)});_mapOptions.center=boundingBox.getCenter();_map.setOptions(_mapOptions);_map.fitBounds(boundingBox)}else{_mapOptions.center=_points[0].point;_map.setOptions(_mapOptions)}};output.translate=sVars.translate;output.currentAddress='';output.setIcon=function(icon){var index=_points.length?_points.length-1:0;_setMarker({icon:icon},index)};output.setInfoWindow=function(windowConfig){var index=_points.length?_points.length-1:0;_setMarker({info_window:windowConfig},index)};output.setLinkOnClick=function(url,title){var index=_points.length?_points.length-1:0;var target=_points[index]=_points[index]||{};google.maps.event.addListener(target.marker,'click',function(){zk.redirect(url)});target.marker.setTitle(title)};output.setPointFromAddress=function(newAddress,append,callback,throwAlertAddressNotFound,replaceCodePostal){if(typeof replaceCodePostal==='undefined'){replaceCodePostal=!0}
var that=this;if(typeof(throwAlertAddressNotFound)=='undefined'){throwAlertAddressNotFound=!0}
_geocoder.geocode({'address':newAddress},function(results,status){if(status==google.maps.GeocoderStatus.OK){that.currentAddress=newAddress;_setPoint(results[0].geometry.location,append);that.show();var parts=results[0].address_components;var address=[],postalcode='',countrycode='';$.each(parts,function(i,part){var type=part.types[0];if(type=='street_number'||type=='route'){address.unshift(part.long_name)}else if(type=='postal_code'){postalcode=part.long_name}
if(type=='country'){countrycode=part.long_name}});if(_input.address){_input.address.val(address.join(', '))}
if(_input.postalcode&&(replaceCodePostal||_input.postalcode.val()=='')){_input.postalcode.val(postalcode)}
if(_input.countrycode){var value=$(_input.countrycode).find('option:contains("'+countrycode+'")').val();$(_input.countrycode).val(value)}
if($.isFunction(callback)){if(address.length){return callback(2)}else{return callback(1)}}}else{if(throwAlertAddressNotFound){zk.message({message:sVars.translate.address_not_found,icon:zk.message.ICON.ALERT})}
return callback(0)}})};output.getPointFromAddress=function(address,callback){_geocoder.geocode({'address':address},function(results,status){if(status!==google.maps.GeocoderStatus.OK){zk.message(sVars.translate.address_not_found)}
if($.isFunction(callback)){callback(results[0].geometry.location,status==google.maps.GeocoderStatus.OK)}})};output.setPoint=function(lat,lon,append){if(isNaN(lat)||isNaN(lon)){return !1}
_setPoint(new google.maps.LatLng(lat,lon),append);this.show();return !0};output.empty=function(){if(_map){$.each(_points,function(i,point){point.marker.setOptions({map:null})});_points=[];google.maps.event.clearListeners(_map,'click');google.maps.event.clearListeners(_map,'mouseup');_refreshMap()}};output.show=function(){if(!$mapWrapper.is(':visible')){$mapWrapper.show()}
_refreshMap()};output.hide=function(){if($mapWrapper.is(':visible')){$mapWrapper.hide()}};output.toggle=function(){var visibility=$mapWrapper.is(':visible');if(visibility){this.hide()}else{this.show()}
return visibility};output.remove=function(){$mapWrapper.hide();_points=[];if(config.on_form){_input.lat.val('');_input.lon.val('');if(_input.address){_input.address.val('')}
if(_input.postalcode){_input.postalcode.val('')}}};output.defaultWorldView=function(){var worldViewOptions=$.extend(_mapOptions,{zoom:2,center:new google.maps.LatLng(20,0)});_initMap();_map.setOptions(worldViewOptions)};output.zoom=function(value){var options=$.extend(_mapOptions,{zoom:value});_initMap();_map.setOptions(options)};output.markerClusterer=function(options){_initMap();options=options||{};options=$.extend({styles:[{url:sVars.cluster_image1,height:53,width:52},{url:sVars.cluster_image2,height:56,width:55},{url:sVars.cluster_image3,height:66,width:65},{url:sVars.cluster_image4,height:78,width:77},{url:sVars.cluster_image5,height:90,width:89}]},options);var markers=[];$.each(_points,function(i,point){markers.push(point.marker)});new MarkerClusterer(_map,markers,options)};return output}});zk.message||(function(){var TYPE={ALERT:'alert',CONFIRM:'confirm'};var ICON={SUCCESS:'icon_circle-check',ALERT:'icon_circle-exclamation',INFO:'icon_circle-info-simple',ERROR:'icon_circle-cross-simple'};var vars=$.extend({'continueBtn':'Continue','backBtn':'back','yesBtn':'yes','noBtn':'no'},ZK.message&&ZK.message.translate||{});var $spinner=(function($div){new Spinner({length:20,width:10,radius:40}).spin($div[0]);return $div})($('<div>'));var $activeTemplate;var closePopup=function($template){var popupContent=zk.popup.getContent();if(popupContent&&popupContent[0]===$template[0]){zk.popup.close()}};zk.message=function(options){if(arguments.length>1){options=$.extend({message:options},$.isPlainObject(arguments[arguments.length-1])?arguments[arguments.length-1]:{});if($.isFunction(arguments[1])){options.on_accept=arguments[1]}
if($.isFunction(arguments[2])){options.on_reject=arguments[2]}}
if(options instanceof jQuery){var $link=options;options={message:$link.data('zk-message'),loader_on_accept:!0,on_accept:function(){zk.redirect($link.attr('href'))}};if($link.data('zk-message-yes')){options.button_yes=$link.data('zk-message-yes')}
if($link.data('zk-message-no')){options.button_no=$link.data('zk-message-no')}}else if(!$.isPlainObject(options)){options={message:options}}
if(options.confirm||options.on_accept||options.on_reject){options=$.extend({type:TYPE.CONFIRM,icon:ICON.ALERT},options)}
options=$.extend({type:TYPE.ALERT,icon:ICON.ERROR,title:null,message:null,button:vars.continueBtn,button_yes:vars.yesBtn,button_no:vars.noBtn,link:null,link_text:vars.backBtn,confirm:$.noop(),on_accept:$.noop(),on_reject:$.noop(),on_close:$.noop(),cancel_on_close:!0,loader_on_accept:!1,template:null},options);var confirmed=!1;var _confirm=function(value){if(!confirmed){confirmed=!0;if($.isFunction(options.confirm)){options.confirm(value)}
if(value&&$.isFunction(options.on_accept)){options.on_accept()}
if(!value&&$.isFunction(options.on_reject)){options.on_reject()}}};var templateParts={$icon:$('<span class="icon modal--standard__icon"></span>'),$title:$('<h3 class="modal--standard__title text-center mbs"></h3>'),$message:$('<p class="modal--standard__subtitle text-center mbm"></p>'),$buttonsWrapper:$('<div class="row"></div>'),$button:$('<div class="col-xs-6 pull-right">'+'<button type="submit" class="button button--alt button--mbig"></button>'+'</div>'),$link:$('<div class="col-xs-6">'+'<a class="modal--standard__link" href="#"><strong></strong></a>'+'</div>'),$close:$('<button title="Close (Esc)" type="button" class="mfp-close">×</button>'),$body:$('<div class="modal--standard modal--centered text-center"></div>')};templateParts.$yes=templateParts.$button.clone();templateParts.$no=templateParts.$button.clone();templateParts.$no.find('button').removeClass('button--alt');var $template=templateParts.$body;if(options.template){$template.append(options.template)}else{$template.append(templateParts.$icon).append(templateParts.$title).append(templateParts.$message)}
$template.append(templateParts.$buttonsWrapper);if(options.type==TYPE.ALERT){if(options.on_accept){templateParts.$yes.removeClass('col-xs-6').addClass('col-xs-12')
templateParts.$buttonsWrapper.append(templateParts.$yes);templateParts.$yes.click(function(){_confirm(!0);return !1})}else if(options.link){templateParts.$link.find('a').attr('href',options.link);templateParts.$buttonsWrapper.append(templateParts.$link)}else{templateParts.$button.removeClass('col-xs-6').addClass('col-xs-12');templateParts.$buttonsWrapper.append(templateParts.$button)}}else{templateParts.$buttonsWrapper.append(templateParts.$yes).append(templateParts.$no);templateParts.$yes.click(function(){_confirm(!0);return !1});templateParts.$no.click(function(){_confirm(!1);return !1})}
templateParts.$button.add(templateParts.$yes).add(templateParts.$no).click(function(){closePopup($template);return !1});templateParts.$yes.click(function(){if(options.loader_on_accept){zk.popup.open($spinner)}else{closePopup($template)}
return !1});templateParts.$icon.addClass(options.icon);templateParts.$button.find('button').html(options.button);templateParts.$yes.find('button').html(options.button_yes);templateParts.$no.find('button').html(options.button_no);templateParts.$link.find('a').html(options.link_text);if(options.title){templateParts.$title.html(options.title)}
if(options.message){templateParts.$message.html(options.message)}
zk.popup.open($template,{open:function(){$activeTemplate=$template},close:function(){$activeTemplate=null;if($.isFunction(options.on_close)){options.on_close()}
if(options.type==TYPE.CONFIRM&&options.cancel_on_close){_confirm(!1)}}})};zk.message=$.extend(zk.message,{TYPE:TYPE,ICON:ICON})})();zk.readMore||(function(){zk.readMore=function(itemClass,options,callback){options=$.extend({container:$('body'),max_height:100,height_margin:10},options);var sVars=ZK.read_more;var $blocks=$(itemClass,options.container);$blocks.each(function(i,item){var $item=$(item);var height=$item.height();if((height-options.height_margin)<options.max_height){return}
var $moreblock=$('<div></div>',{'class':'more_block','html':$item.html()});$moreblock.css('max-height',options.max_height);$item.html($moreblock);var lessLink='<a class="adjust less__link custom-link">'+'- '+sVars.translate.read_less+'</a>';var moreLink='<a class="adjust more__link custom-link">'+'+ '+sVars.translate.read_more+'</a>';var $readMoreContainer=$('<div></div>',{'class':'adjust__toggle','html':lessLink+moreLink}).toggle(function(){$item.addClass('is__open');$moreblock.css('max-height','');if($.isFunction(callback)){callback()}},function(){$item.removeClass('is__open');$moreblock.css('max-height',options.max_height);if($.isFunction(callback)){callback()}});$item.append($readMoreContainer)})}})();zk.pjax||(function(){zk.pjax=(function(){var sVars=ZK.pjax;var _content=(function(){var loaded=!1;var onLoadCallback=!1;return{set:function($content){loaded=onLoadCallback=!1;_response.setFromContent($content);if(typeof FB!=='undefined'){$content.filter('*').each(function(){FB.XFBML.parse(this)})}
zk.loadContent($content,function(){loaded=!0;if($.isFunction(onLoadCallback)){onLoadCallback()}})},onLoad:function(callback){if(loaded){callback()}else{onLoadCallback=callback}}}})();var _response=(function(){var data;return{setFromContent:function($content){data=$content.find('[data-pjax-response]').addBack('[data-pjax-response]').data('pjax-response');if(data){$(document).trigger('zk:pjax:response',[data])}},get:function(){return data}}})();var _runJs=function(resources){zk.namespaceCallbacks.disableQueue();$.each(zk.MEDIA_QUERY,function(_,mediaQuery){enquire.unregister(mediaQuery)});$('#ui-datepicker-div').remove();zk.loadScript(resources.files||[],function(){var vars=resources.vars||{};zk.namespaceCallbacks.fireQueue(zk.namespaceCallbacks.QUEUE.DOM_READY,vars);_content.onLoad(function(){zk.namespaceCallbacks.fireQueue(zk.namespaceCallbacks.QUEUE.WINDOW_LOAD,vars);$(window).trigger('zk:pjax:load')})})};var _trackPageViews=(function(){var tracker=zk.dynamicTracker();return function(data){tracker.track(data.url,data.crossUrl,data.options)}})();var _setDefaults=function(){$.pjax.defaults=$.extend($.pjax.defaults,{timeout:ZK.is_dev?60000:10000,maxCacheLength:0})};var output={};output.init=function(){if($(document).data('_pjax_init_')){return}
$(document).data('_pjax_init_',!0);_setDefaults();NProgress.configure({showSpinner:!1});$(document).pjax('a','[data-pjax-container]');$(document).on('pjax:click',function(e,options){var pathname=$.trim(options.target.pathname);if(pathname=='/'||pathname.match(/^\/(g\/|galleries|v\/|p\/|cat\/)/)){return !1}
if(ZK.pjax_disabled){return !1}
if($(options.target).data('pjax')===0){return !1}}).on('pjax:start',function(){NProgress.start()}).on('pjax:end',function(){NProgress.done()}).on('pjax:beforeSend',function(e,xhr){xhr.setRequestHeader('X-PJAX-Hostname',location.hostname);xhr.setRequestHeader('X-PJAX-Protocol',location.protocol)}).on('pjax:beforeReplace',function(e,content){_content.set($(content))}).on('pjax:success',function(){var response=_response.get();if(response){_runJs(response.js);zk.loadStylesheet(response.css.files||[]);zk.loadPixels(response.pixels);_trackPageViews(response.pageViews)}
zk.popup.close()})};output.disablePopstate=function(){$(window).off('popstate.pjax')};output.enable=function(){$.pjax.disable();$.pjax.enable();_setDefaults()};return output})()})();zk.pluploader||(function(){zk.pluploader=function(config){config=$.extend({url:ZK.pluploader.url,button:'pluploader-pickfiles',quality:80,mimeTypes:[{title:"Image files",extensions:"jpg,gif,png,jpeg"}],resolution:{width:ZK.pluploader.resolution.width,height:ZK.pluploader.resolution.height},callbacks:{},max_files:16,data:{}},config);var output={};var _fileNames={original:[],uploaded:[]};var $status=!1;var $button=$('#'+config.button);var $trigger=$('<a></a>',{id:'upload-trigger-'+zk.guid(),href:'#'});$button.after($trigger);$button.wrap('<div id="container" style="display:inline-block"></div>');var _writeStatus=function(message){if(!$status){if(!config.statusContainer){return}
$status=$(config.statusContainer)}
$status.text(message)};var _filelist=function(container){var output={};var _list={};var $container=$(container);output.add=function(file){if(_list[file.id]){return _list[file.id]}
_list[file.id]={item:file};_list[file.id].jQuery=$('<li></li>',{id:file.id,html:file.name+' ('+plupload.formatSize(file.size)+')'}).append(' <strong></strong>');$container.append(_list[file.id].jQuery);return _list[file.id]};output.get=function(id){if(_list[id]){return _list[id]}
return undefined};output.updateProgress=function(file,progress){var _item=output.add(file);_item.progress=_item.progress||0;if(_item.progress>progress){return}
_item.progress=progress;$('strong:first',_item.jQuery).html(progress+'%')};output.remove=function(id){var _item=output.get(id);if(!_item){return}
_item.jQuery.remove();delete _list[id]};return output}(config.filelistContainer);var plConfig={runtimes:'html5,flash,silverlight,html4',url:config.url,browse_button:config.button,container:'container',max_file_size:'15.5mb',chunk_size:'0.5mb',multipart:!0,unique_names:!1,flash_swf_url:'/scripts/plugins/plupload/Moxie.swf',silverlight_xap_url:'/scripts/plugins/plupload/Moxie.xap',filters:{mime_types:config.mimeTypes}};if(config.resize_original){$.extend(plConfig,{resize:{quality:config.quality,width:config.resolution.width,height:config.resolution.height}})}
var _uploader=new plupload.Uploader(plConfig);$trigger.click(function(e){e.preventDefault();_uploader.start();_writeStatus(ZK.pluploader.translate.processing)});_uploader.bind('FilesAdded',function(up,files){if($.isFunction(config.callbacks.files_added)){config.callbacks.files_added.call(output,up,files)}
var excess=config.max_files-files.length;if(excess<0){var translate=ZK.pluploader.translate.max_files;zk.message(translate.replace('%s',config.max_files).replace('%s',Math.abs(excess)));files.splice(config.max_files)}
$.each(files,function(i,file){_filelist.add(file)});setTimeout(function(){$trigger.trigger('click')},1000)});_uploader.bind('UploadProgress',function(up,file){if($.isFunction(config.callbacks.upload_progress)){config.callbacks.upload_progress.call(output,up,file)}
_filelist.updateProgress(file,file.percent);_writeStatus(ZK.pluploader.translate.uploading)});_uploader.bind('UploadComplete',function(up,files){if($.isFunction(config.callbacks.upload_complete)){config.callbacks.upload_complete.call(output,up,files)}
_writeStatus(ZK.pluploader.translate.finished)});_uploader.bind('UploadFile',function(up,file){up.settings.multipart_params=$.extend(up.settings.multipart_params,config.data,{original_name:file.name});_fileNames.original.push(file.name);if($.isFunction(config.callbacks.upload_file)){config.callbacks.upload_file.call(output,up,file)}
file.name=file.id+'.tmp'});_uploader.bind('FileUploaded',function(up,file,response){_fileNames.uploaded.push(file.name);var json=jQuery.parseJSON(response.response);if(json.code>0){var filename=json.filename.split('.');$('#'+filename[0]).append('<span class="form-error">'+json.message+'</span>')}else{if($.isFunction(config.callbacks.file_uploaded)){config.callbacks.file_uploaded.call(output,up,file,json)}
_filelist.updateProgress(file,100)}});_uploader.bind('Error',function(up,err){if($.isFunction(config.callbacks.error)){config.callbacks.error.call(output,up,err)}
var errorMsg=ZK.pluploader.error_messages[err.code]?ZK.pluploader.error_messages[err.code]:err.message;zk.message(errorMsg+': '+err.file.name);_writeStatus();_filelist.remove(err.file.id);up.refresh()});_uploader.init();output.setData=function(data){_uploader.settings.multipart_params=$.extend(_uploader.settings.multipart_params,data);return this};output.stop=function(){_uploader.stop();return this};output.getFileNames=function(type){var names={};var originals=[],uploaded=[];for(var i=0;i<_fileNames.original.length;i++){names[_fileNames.uploaded[i]]=_fileNames.original[i];originals.push(_fileNames.original[i]);uploaded.push(_fileNames.uploaded[i])}
return type=='original'?originals:type=='uploaded'?uploaded:names};return output}})();zk.popup||(function(){var _onOpenScroll;$.magnificPopup.instance._onFocusIn=function(e){if($(e.target).is('.ui-datepicker-month, ui-datepicker-year')){return !0}
$.magnificPopup.proto._onFocusIn.call(this,e)};zk.popup=(function(){var output={};output.open=function(content,options){options=$.extend({type:null,black_background:!1,show_close_button:!0,strict_modal:!1,beforeOpen:null,open:null,close:null,resize:null},options);var callbacks={};$.each({beforeOpen:function(){_onOpenScroll=$(window).scrollTop()},open:function(){$('.js-blur, .guest-toolbar').addClass('body--blur is__anchored');if(options.black_background){$('.mfp-bg').addClass('mfp-bg--black')}
if($.magnificPopup.instance.isIOS){$('body, html').addClass('mfp-hack__hidden')}
zk.pushState.push('popup',function(){zk.popup.close()})},close:function(){$('.js-blur, .guest-toolbar').removeClass('body--blur is__anchored');if(options.black_background){$('.mfp-bg').removeClass('mfp-bg--black')}
if($.magnificPopup.instance.isIOS){$('body, html').removeClass('mfp-hack__hidden')}
zk.pushState.pop();$(window).scrollTop(_onOpenScroll);this.container.children().detach()},resize:function(){if($.magnificPopup.instance.isIOS){$.magnificPopup.instance.wrap.css('height','')}}},function(name,callback){callbacks[name]=function(){callback.apply(this,arguments);if($.isFunction(options[name])){options[name]()}}});$.magnificPopup.open({items:{src:content},type:options.type,callbacks:$.extend({afterChange:function(){if($.isFunction(options.afterChange)){options.afterChange()}}},callbacks),showCloseBtn:options.show_close_button,closeOnBgClick:!options.strict_modal,enableEscapeKey:!options.strict_modal,fixedContentPos:1});return this};output.youtube=function(id,options){var url='https://www.youtube.com/watch?v='+id;return output.open(url,$.extend(options,{type:'iframe'}))};output.isOpen=function(){return $.magnificPopup.instance&&$.magnificPopup.instance.isOpen};output.close=function(){if(output.isOpen()){$.magnificPopup.close()}
return this};output.getContent=function(){return $.magnificPopup.instance&&$.magnificPopup.instance.content};return output})()})();zk.register||(function(){zk.register=function(options){options=$.extend({entrance:'undefined',code_uri:(typeof ZK!=='undefined'&&ZK.code_uri)||'us',register_url:location.href,auto_close_on_success:!1,partner_logo:!1},options);var FORM={ALREADY_LOGGED:'ALREADY_LOGGED',LOGIN:'LOGIN_MODAL',LOGIN_NAVBAR:'LOGIN_NAVBAR',FACEBOOK_REGISTRATION:'FACEBOOK_REGISTRATION',INVITATION_REGISTRATION:'INVITATION_REGISTRATION',REGISTRATION:'REGISTRATION'};var RESPONSE_STATUS={NOT_LOGGED_IN:0,LOGGED_IN:1};var _facebook=zk.facebook(options);var _forms=zk.formManager();var _callbacks=$.Callbacks();var _addCallback=function(callback){_callbacks.add(callback)};var _executeCallback=function(response,formName,callback){var cb=function(){delete response.session;if($.isFunction(callback)){callback()}
_callbacks.fireWith(output,[$.extend({form:formName||_forms.getActiveName()},response)]);_callbacks.empty()};if(response.session){zk.loadPixels(response.session,cb)}else{cb()}};var _directSubmission=function(data){data=$.extend(data,{require_min:!0});_status(function(response){if(response.status===RESPONSE_STATUS.LOGGED_IN){response.error=-1;_executeCallback(response)}else{_forms.get().submit(data,function(response){_executeCallback(response)})}})};var _fbRegisterUser=function(callback){_facebook.registerUser(function(response){if($.isFunction(callback)){callback()}
if(response.status=='error'){response.error=1}
_executeCallback(response,FORM.FACEBOOK_REGISTRATION)})};var _setupLogo=function($form){if(options.partner_logo){var $logo=$('#js-login-logo',$form);$logo.attr('src',$logo.data(options.partner_logo));var logoClass='login--modal__logo';$('.'+logoClass,$form).removeClass(logoClass).addClass(logoClass+'--full')}};_forms.add(FORM.LOGIN,{auto_close_on_success:options.auto_close_on_success,form_url:"/"+options.code_uri+"/users/login.json",form_data:{form_type:FORM.LOGIN},init:function($form){var form=this;$('#fb_connect',$form).click(function(){form.transition();_fbRegisterUser(function(){form.transition(!1);_forms.close()});return !1});$('#go-to-registration',$form).click(function(){_forms.show(FORM.REGISTRATION);return !1});_setupLogo($form)},success:function(response){return _executeCallback(response)}});_forms.clone(FORM.LOGIN,FORM.LOGIN_NAVBAR,{display_method:zk.form.DISPLAY.INLINE,form_data:{form_type:FORM.LOGIN_NAVBAR}});_forms.add(FORM.REGISTRATION,{auto_close_on_success:options.auto_close_on_success,form_url:"/"+options.code_uri+"/users/registration.json",form_data:{entrance:options.entrance,url:options.register_url},init:function($form){var form=this;zk.mailcheck&&zk.mailcheck($form.find('#email'));$('#fb_connect',$form).click(function(){form.transition();_fbRegisterUser(function(){form.transition(!1);_forms.close()});return !1});$('#go-to-login',$form).click(function(){_forms.show(FORM.LOGIN);return !1});_setupLogo($form)},success:function(json){return _executeCallback(json,FORM.REGISTRATION,function(){if(typeof ga!='undefined'){ga('x.send','event','new-user','direct');ga('send','event','new-user','direct')}
zk.loadPixels(json.campaign_tracker)})},error:function(response){if(response.message){_forms.close();zk.message(response.message)}}});_forms.add(FORM.INVITATION_REGISTRATION,{auto_close_on_success:options.auto_close_on_success,form_url:"/"+options.code_uri+"/users/invitation-registration.json",init:function($form){zk.mailcheck&&zk.mailcheck($form.find('#email'))},success:function(json){return _executeCallback(json)}});var _status=function(statusOptions){statusOptions=statusOptions||{};if($.isFunction(statusOptions)){statusOptions={callback:statusOptions}}
var data={entrance:options.entrance,url:options.register_url};if(_forms.getActiveName()){data.form_type=_forms.getActiveName()}
if(statusOptions.additional_params){$.extend(data,statusOptions.additional_params)}
$.ajax({cache:!1,type:'POST',url:"/"+options.code_uri+"/users/status.json",dataType:'json',data:data,success:function(response){if($.isFunction(statusOptions.callback)){statusOptions.callback(response)}else if(response.status===RESPONSE_STATUS.NOT_LOGGED_IN){_forms.show(null,response.form)}else{_executeCallback(response,FORM.ALREADY_LOGGED)}}})};var output={};output.FORM=FORM;output.status=function(callback){_status(function(response){if(response.status===RESPONSE_STATUS.LOGGED_IN){callback(response.user)}else{callback(!1)}})};output.facebook=function(callback){_facebook.registerUser(function(response){callback(response)})};output.inlineLogin=function(callback,container){_forms.select(FORM.LOGIN_NAVBAR);_addCallback(callback);_forms.get().setOptions({container:container||'#navbar-login-container'});_status();return _forms.get()};output.login=function(data,callback,defaults){if(!$.isPlainObject(data)){defaults=callback;callback=data}
_forms.select(FORM.LOGIN);_addCallback(callback);if($.isPlainObject(data)){_directSubmission(data)}else{_status({additional_params:{defaults:defaults||{}}})}
return _forms.get()};output.register=function(data,callback,defaults){if(!$.isPlainObject(data)){defaults=callback;callback=data}
_forms.select(FORM.REGISTRATION);_addCallback(callback);if($.isPlainObject(data)){_directSubmission(data)}else{_status({additional_params:{defaults:defaults||{}}})}
return _forms.get()};output.invitation=function(callback,defaults){_forms.select(FORM.INVITATION_REGISTRATION);_addCallback(callback);_status({additional_params:{key:defaults.key}});return _forms.get()};output.shareSession=function(callback){$.ajax({url:"/"+options.code_uri+"/users/x-domain-urls.json",dataType:'json'}).done(function(response){zk.loadPixels(response.session,function(){callback&&callback()})})};output.setEntrance=function(entrance){options.entrance=entrance};return output}})();zk.store||(function(){zk.store=(function(){if(!ZK.store){return}
var sVars=ZK.store;var output={};var currentId;output.showProduct=function(id,options,callback){options=$.extend({show_bundles:0,auto_redirect:1},options);currentId=id;var params={id:id};if(options.show_bundles){params.show_bundles=1}
$.ajax({url:sVars.url.show_product,type:'POST',datatype:'json',data:params,success:function(response){if(response.error){zk.message(response.error)}else if(options.auto_redirect&&response.redirect){zk.redirect(response.redirect)}else{var $content=$($.trim(response.html));$('.js-tooltip',$content).tooltip();$('.js-buy-product',$content).click(function(){if(!!options.show_bundles){id=$(this).data('id')}
if(id){var $button=$(this);if($button.data('processing')){return !1}
$button.data('processing',!0);output.showPurchase(id,options,function(){$button.data('processing',!1)})}
return !1});zk.popup.open($content)}
if($.isFunction(callback)){callback(response)}}})};output.showPurchase=function(id,options,callback){options=$.extend({show_bundles:0,auto_redirect:1},options);var params={id:id};$.ajax({url:sVars.url.purchase_product,type:'POST',data:params,datatype:'json',success:function(response){if(response.error){zk.message(response.error)}else if(options.auto_redirect&&response.redirect){zk.redirect(response.redirect)}else{var $content=$($.trim(response.html));$('#str-purchase-product-cancel',$content).click(function(){var $button=$(this);if($button.data('processing')){return !1}
$button.data('processing',!0);var productId=currentId||id;output.showProduct(productId,options,function(){$button.data('processing',!1)});return !1});zk.popup.open($content)}
if($.isFunction(callback)){callback(response)}}})};return output})()})();zk.tabs||(function(){zk.tabs=function(options){var output={};options=$.extend({tab_selected_class:'active',tab_selected_selector:'li',listen:!1},options);var $tabsMenu=$(options.tabs_menu);var $tabsContainer=$(options.tabs_container);var _sections=function(){var output={};var _selected;var _data=$('a',$tabsMenu).map(function(){var href=$(this).attr('href');if(href.length<=1){return null}
var section={};if(href.match(/^#/)){section.name=href.replace(/^#/,'')}else{section.href=href}
return section}).get();output.setSelected=function(index){_selected=index};output.getSelected=function(){return _selected};output.getByName=function(name){var section=!1;$.each(_data,function(i,data){if(data.name&&data.name===name){section=i;return !1}});return section};output.getName=function(index){if(index<0||index>=_data.length){return !1}
if(!_data[index].name){return !1}
return _data[index].name};output.normalize=function(section){if(!isNaN(section)){section=Math.floor(section);if(section<0||section>=_data.length){return !1}
return section}else{section=section.replace(/^#/,'');if(!1===(section=output.getByName(section))){return !1}
return section}};output.getTabSelector=function(index){var name=output.getName(index);if(!name){return !1}
return '[href=#'+name+']'};output.getContentSelector=function(index){var name=output.getName(index);if(!name){return !1}
return '#tab-'+name};return output}();var _init=function(){var done={};var methods={};return{add:function(name,method){var index=_sections.getByName(name);if(index===!1){return}
done[index]=0;methods[index]=method},run:function(index){if(!methods[index]){return}
if(!done[index]){methods[index]();done[index]=1}}}}();var _writeHash=function(index){if(index===0){var loc=window.location;if('pushState' in history){history.pushState('',document.title,loc.pathname+loc.search)}else{var scrollV=document.body.scrollTop,scrollH=document.body.scrollLeft;loc.hash='';document.body.scrollTop=scrollV;document.body.scrollLeft=scrollH}}else{window.location.hash=_sections.getName(index)}};var _selectTab=function(index){$('a',$tabsMenu).closest(options.tab_selected_selector).removeClass(options.tab_selected_class);$('a',$tabsMenu).filter(_sections.getTabSelector(index)).closest(options.tab_selected_selector).addClass(options.tab_selected_class)};var _showContent=function(index){$tabsContainer.children('div').hide();var $content=$tabsContainer.children(_sections.getContentSelector(index));$content.show();return $content};output.addInit=function(name,method){_init.add(name,method);if(output.getSectionName()===name){_init.run(_sections.getSelected())}};output.select=function(section,skipHash){if(!1===(section=_sections.normalize(section))){return}
if($.isFunction(options.before_select)){if(!1===options.before_select(section,output)){return}}
_sections.setSelected(section);if(!skipHash){_writeHash(section)}
_selectTab(section);var $content=_showContent(section);_init.run(section);if($.isFunction(options.on_select)){options.on_select(output,$content)}};output.getSelected=function(){return _sections.getSelected()};output.getSectionName=function(section){if(section!==0){section=section||_sections.getSelected()}
return _sections.getName(section)};output.refresh=function(){output.select(_sections.getSelected(),1)};output.setCallback=function(name,callback){if(name!='before_select'&&name!='on_select'){throw new Error('Not supported callback method ('+name+') set on tabs object')}
options[name]=callback};var _browserHash=function(){var hash=window.location.hash;if(hash===''){hash=0}else{hash=hash.replace(/^#/,'')}
return hash};output.select(_browserHash(),1);$('a',$tabsMenu).click(function(e){output.select($(this).attr('href'));e.preventDefault()});if(options.listen){zk.bindGlobalEvent('hashchange',function(){var queriedSection=_sections.normalize(_browserHash());if(queriedSection!==!1){if($.isFunction(options.hashchange)){options.hashchange(queriedSection,output)}
if(queriedSection!==_sections.getSelected()){output.select(queriedSection,1)}}})}
$tabsMenu.trigger('tabs:load',[output]);return output}})();zk.werviceAnalytics||(function(){var sVars=ZK.wervice_analytics;var DATA_KEY='_WID_';var TRACKED='_TRACKED_';var REGEX_FIND_WERVICE_ID=/f\/.*-(\d+)[$\/]?/i;var INTERACTION={CARD_VISIT:'card_visit',WEB_VIEWED:'web_viewed',PHONE_VIEWED:'phone_viewed'};zk.werviceAnalytics=(function(){var output={};var _extract=function(){return $('body a').filter(function(_,link){var $link=$(link);if($link.data('wimpression-skip')!==undefined){return}
if(typeof $link.data(DATA_KEY)=='undefined'){var href=$link.attr('href')||'';var match=href.match(REGEX_FIND_WERVICE_ID);var data=!1;if(match){data={id:parseInt(match[1]),type:_impressionType($link),section:_impressionSection($link)}}
$link.data(DATA_KEY,data)}
return !!$link.data(DATA_KEY)})};var _impressionType=function($link){var type='link';if($link.closest('[data-wimpression-type]').length){type=$link.closest('[data-wimpression-type]').data('wimpression-type')}else if($link.is('[data-wimpression-type]')){type=$link.data('wimpression-type')}
if($.inArray(type,['link','small_image','big_image'])<0){type='link'}
return type};var _impressionSection=function($link){var section='other';if($link.closest('[data-wimpression-section]').length){section=$link.closest('[data-wimpression-section]').data('wimpression-section')}else if($link.is('[data-wimpression-section]')){section=$link.data('wimpression-section')}
if($.inArray(section,['magazine','my-zankyou','zankyou','reseller','other'])<0){section='other'}
return section};var _markAsTracked=function($links){$links.each(function(_,link){$(link).data(DATA_KEY,TRACKED)})};output.INTERACTION=INTERACTION;output.trackImpressions=function(){var ratio=sVars?sVars.ratio:null;if(sVars&&Math.random()>=ratio){return}
var $links=_extract().filter(function(_,link){return $(link).data(DATA_KEY)!=TRACKED});if(!$links.length){return}
var data=$links.map(function(_,item){return $.extend({ratio:ratio},$(item).data(DATA_KEY))}).toArray();var codeUri=(typeof ZK!=='undefined'&&ZK.code_uri)||'us';$.ajax({url:'/'+codeUri+'/happening/wervices-impressions.json',type:'POST',data:{'url':window.location.href,'wervices_impressions':data},success:function(){_markAsTracked($links)}})};output.interaction=function(type,callback){callback=callback||$.noop;if($.inArray(type,[INTERACTION.CARD_VISIT,INTERACTION.WEB_VIEWED,INTERACTION.PHONE_VIEWED])<0){callback();return !1}
var match=location.href.match(REGEX_FIND_WERVICE_ID);if(!match){callback();return !1}
var wid=match[1];zk.loadPixels('/happening/wervice-interaction?'+$.param({wid:wid,type:type,u:typeof ZK!=='undefined'&&ZK.user_id}),callback)};output.trackVisit=function(){return this.interaction(INTERACTION.CARD_VISIT)};output.trackInteractions=function(){var self=this;$('[data-winteraction]').each(function(_,link){var $link=$(link);if($link.data('winteraction-loaded')){return}else{$link.data('winteraction-loaded',!0)}
$link.click(function(e){var type=$link.data('winteraction');if($link.attr('target')!='_blank'){e.preventDefault()}
self.interaction(type,function(){if($link.attr('target')!='_blank'){window.location.href=$link.attr('href')}})})})};return output})()})();zk.werviceAutocomplete||(function(){zk.werviceAutocomplete=function(config){config=config||{};var _inputField=config.inputField;var _hiddenField=config.hiddenField;var _blockHint=config.blockHint;var _blockSuggestion=config.blockSuggestion;if(!_inputField.length||!_hiddenField.length||!_blockHint.length){zk.log('Error: search suggestion not loaded');return !1}
var _showDefaultSuggestions=function(flag){flag=flag||'show';if(typeof _blockSuggestion=='undefined'){return}
if(flag==='show'){_blockSuggestion.show(0,function(){if($('#sgs-tcm-taxonomies').is(':visible')&&!$(_blockSuggestion).data('masonry')){$('.all-categories').masonry({itemSelector:'.masonry-item',columnWidth:190});$(_blockSuggestion).data('masonry',!0)}})}else if(flag==='hide'){_blockSuggestion.hide();_blockSuggestion.removeClass('no-script')}else if(flag==='fadeout'){_blockSuggestion.fadeOut('fast')}};_showDefaultSuggestions('hide');_blockHint.width(_inputField.outerWidth()-2);var _noMatches=!0;var _normalizeString=function(str){var r=str.toLowerCase();r=r.replace(/[àáâãäå]/g,"a");r=r.replace(/æ/g,"ae");r=r.replace(/ç/g,"c");r=r.replace(/[èéêë]/g,"e");r=r.replace(/[ìíîï]/g,"i");r=r.replace(/ñ/g,"n");r=r.replace(/[òóôõö]/g,"o");r=r.replace(/œ/g,"oe");r=r.replace(/[ùúûü]/g,"u");r=r.replace(/[ýÿ]/g,"y");r=r.replace(/ß/g,"ss");return r};var _prepareHint=function(){$('.ui-autocomplete',_blockHint).removeClass('ui-corner-all');$('.ui-autocomplete li.ui-menu-item a.ui-corner-all',_blockHint).removeClass('ui-corner-all')};var _highlightLabel=function(label,pos,len){return label.substr(0,pos)+'<strong>'+label.substr(pos,len)+'</strong>'+label.substr(pos+len)};_inputField.mouseup(function(e){e.preventDefault()});_inputField.focusin(function(){_inputField.select();_showDefaultSuggestions()});_inputField.focusout(function(e){_showDefaultSuggestions('fadeout')});var _autocomplete=_inputField.autocomplete({minLength:3,delay:50,source:function(request,response){config.suggestions(request.term,function(suggestions){if($.isFunction(config.onSuggestions)){config.onSuggestions(request.term)}
var matches=[];$.each(suggestions,function(idx,item){var pos=_normalizeString(item.label).indexOf(_normalizeString(request.term));var item_label=item.label;if(pos>=0){item_label=_highlightLabel(item_label,pos,request.term.length)}
matches.push({value:item.value,label:item_label})});_noMatches=matches.length<1;response(matches)})},appendTo:_blockHint,open:function(event,ui){_prepareHint()},select:function(event,sel){if($.isFunction(config.onselect)){sel.item=config.onselect(sel.item)}
sel.item.value=$('<div>').html(sel.item.label).text()},focus:function(event,ui){event.preventDefault();_inputField.val($('<div>').html(ui.item.label).text())}});_autocomplete.data('ui-autocomplete')._renderItem=function(ul,item){return $('<li></li>').data('ui-autocomplete-item',item).append($('<a></a>').html(item.label)).appendTo(ul)};_autocomplete.data('ui-autocomplete')._renderMenu=function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item)});_showDefaultSuggestions('hide')}}})();zk.wysiwyg||(function(){var TYPE={FULL:'full',LISTS:'lists',BASIC_LISTS:'basic_lists',MINI:'mini'};var _defaultConfig={skin_url:'/scripts/plugins/tiny_mce/skins/lightgray',paste_preprocess:function(pl,o){var content=o.content;content=content.replace(/<(!--)([\s\S]*)(--)>/gi,'');if(content.match(/<img[^>]+src="data:image.*?;base64[^>]*?>/g)){content=content.replace(/<img[^>]+src="data:image.*?;base64[^>]*?>/g,'')}
o.content=content},entity_encoding:'raw',fontsize_formats:'10px 12px 15px 18px 24px 36px',relative_urls:!1,statusbar:!1,menubar:!1,height:200};var _initDefaultConfig=(function(){var _init=!1;return function(){if(_init){return}else{_init=!0}(function(locale){var availableLanguages=['de','de_AT','en_CA','en_GB','es','es_MX','fr_FR','it','nl','pl','pt_BR','pt_PT','ru'];var language;if($.inArray(locale,availableLanguages)>=0){language=locale}else if($.inArray(locale.split('_')[0],availableLanguages)>=0){language=locale.split('_')[0]}
if(language){_defaultConfig.language_url='/scripts/plugins/tiny_mce/langs/'+language+'.js'}})(ZK.locale);(function(fontsConfig){if(fontsConfig){_defaultConfig.font_formats=fontsConfig.names.join(';');_defaultConfig.content_css=fontsConfig.urls}})(ZK.wysiwyg.fonts)}})();var _defaultPlugins=['autolink','link','paste','placeholder','tabfocus','textcolor'];var _defaultValidElementsDefs=['attrs','basic'];var _elementsDef={attrs:"@["+['style','title','lang','xml::lang','onclick','ondblclick','onmousedown','onmouseup','onmouseover','onmousemove','onmouseout','onkeypress','onkeydown','onkeyup'].join('|')+"]",basic:["-p["+['style'].join('|')+"]",'br'].join(','),links:"a["+['rel','rev','charset','hreflang','tabindex','accesskey','type','name','href','target','title','onfocus','onblur'].join('|')+"]",format:['-strong/b','-em/i','-u',"-span["+['style'].join('|')+"]"].join(','),format_font_all:["-font["+['face','size','color'].join('|')+"]"].join(','),format_font_no_type:["-font["+['size','color'].join('|')+"]"].join(','),listing:["-ol["+['type','compact'].join('|')+"]","-ul["+['type','compact'].join('|')+"]",'-li'].join(','),images:["img["+['longdesc','usemap','src','border','alt=','title','hspace','vspace','width','height','align'].join('|')+"]","map["+['name'].join('|')+"]","area["+['shape','coords','href','alt','target'].join('|')+"]"].join(','),html:['-sub','-sup','-blockquote','caption','-div','-code','-pre','samp','kbd','dfn','small','tt','var','big','address','-h1','-h2','-h3','-h4','-h5','-h6',"hr["+['size','noshade'].join('|')+"]",'tbody','thead','tfoot','dd','dl','dt','cite','abbr','acronym',"q["+['cite'].join('|')+"]","del["+['datetime','cite'].join('|')+"]","ins["+['datetime','cite'].join('|')+"]"].join(','),tables:["-table["+['border=0','cellspacing','cellpadding','width','frame','rules','height','align','summary','bgcolor','background','bordercolor'].join('|')+"]","-tr["+['rowspan','width','height','align','valign','bgcolor','background','bordercolor'].join('|')+"]","#td["+['colspan','rowspan','width','height','align','valign','bgcolor','background','bordercolor','scope'].join('|')+"]","#th["+['colspan','rowspan','width','height','align','valign','scope'].join('|')+"]"].join(','),objects:["object["+['classid','width','height','codebase','*'].join('|')+"]","param["+['name','value','_value'].join('|')+"]","embed["+['type','width','height','src','*'].join('|')+"]"].join(','),scripts:["script["+['src','type'].join('|')+"]",'noscript'].join(','),iframes:["iframe["+['align<bottom?left?middle?right?top','frameborder','height','longdesc','marginheight','marginwidth','name','scrolling<auto?no?yes','src','style','title','width'].join('|')+"]"].join(','),forms:["form["+['action','accept','accept-charset','enctype','method'].join('|')+"]","label["+['for'].join('|')+"]","input["+['accept','alt','checked','disabled','maxlength','name','readonly','size','src','type','value'].join('|')+"]","textarea["+['cols','rows','name','readonly','disabled'].join('|')+"]","select["+['disabled','multiple','name','size'].join('|')+"]","option["+['disabled','label','selected','value'].join('|')+"]","optgroup["+['label','disabled'].join('|')+"]",'button','legend','fieldset',"col["+['align','char','charoff','span','valign','width'].join('|')+"]","colgroup["+['align','char','charoff','span','valign','width'].join('|')+"]"].join(',')};var _buttonsGroupDef={format:{buttons:['bold','italic','underline'],elements:['format'],styles:{span:'text-decoration',p:'text-decoration',li:'text-decoration',div:'border'}},format_font_all:{buttons:['forecolor','backcolor','fontselect','fontsizeselect'],elements:['format_font_all'],styles:{span:['color','font-family','font-size','text-decoration','background-color']},plugins:['textcolor']},format_font_no_type:{buttons:['forecolor','backcolor','fontsizeselect'],elements:['format_font_no_type'],styles:{span:['color','font-size','text-decoration','background-color']}},listing:{buttons:['bullist','numlist'],elements:['listing']},html_all:{buttons:['link','unlink','image','code'],elements:['html','tables','objects','scripts','iframes','links','images','forms'],plugins:['code','zk_image']},html_no_img:{buttons:['link','unlink','code'],elements:['html','links','tables','objects','scripts','images']},html_basic:{buttons:['code'],elements:['format_font_all','html','tables','objects','scripts','iframes','images','links','forms']},indentation:{buttons:['outdent','indent'],elements:['format'],styles:{span:'padding-left',p:'padding-left',li:'padding-left'}},align:{buttons:['alignleft','aligncenter','alignright','alignjustify'],elements:['format'],styles:{span:'text-align',p:'text-align',li:'text-align'}}};var _stylesDefMerger=function(first,second){$.each(second,function(key){var value=$.isArray(second[key])?second[key]:[second[key]];if(!first[key]){first[key]=value}else{first[key]=$.merge(first[key],value)}})};var _fillConfig=function(config,buttonsGroups){var buttons=[];var validElementsDef=_defaultValidElementsDefs.slice();var validStyles={};var plugins=_defaultPlugins.slice();$.each(buttonsGroups,function(i,group){if(typeof _buttonsGroupDef[group]=='undefined'){return}
var groupDef=_buttonsGroupDef[group];buttons=$.merge(buttons,$.merge(groupDef.buttons,['|']));if(groupDef.elements){validElementsDef=$.merge(validElementsDef,groupDef.elements)}
if(groupDef.styles){_stylesDefMerger(validStyles,groupDef.styles)}
if(groupDef.plugins){plugins=$.merge(plugins,groupDef.plugins)}});buttons.pop();config.toolbar=buttons.join(',');$.each($.unique(validElementsDef),function(i,element){config.valid_elements+=_elementsDef[element]+','});config.valid_elements=config.valid_elements.replace('/,$/','');$.each(validStyles,function(tag,styles){validStyles[tag]=$.unique(styles).join(',')});config.valid_styles=validStyles;config.plugins=$.unique(plugins).join(',')};var staticEvents;var normalizeEvents=function(events){var normalized={};$.each(events,function(name,handler){$.each(name.split(','),function(_,name){normalized[name]=[handler]})});return normalized};var mergeEvents=function(input,output){$.each(input,function(name,handlers){if(!output[name]){output[name]=[]}
$.merge(output[name],handlers)});return output};zk.wysiwyg=function(target,type,overwrite,events){var $target=target instanceof jQuery?target:$(target);if($target.data('wysiwyg')){return $target.data('wysiwyg')}
_initDefaultConfig();var config=$.extend({},_defaultConfig);var buttonsGroups;switch(type){case TYPE.FULL:if(!ZK.wysiwyg.uploader_url){zk.log('"uploader_url" param is mandatory when "full" type is selected')}else{config.uploader_url=ZK.wysiwyg.uploader_url}
buttonsGroups=['format','format_font_all','listing','align','indentation','html_all'];break;case TYPE.MINI:buttonsGroups=['format','align','html_basic'];break;case TYPE.LISTS:buttonsGroups=['format','format_font_no_type','listing','html_no_img'];break;case TYPE.BASIC_LISTS:default:buttonsGroups=['format','listing'];break}
_fillConfig(config,buttonsGroups);events=normalizeEvents(events||{});if(staticEvents){events=mergeEvents(staticEvents,events)}
if(!$.isEmptyObject(events)){config.init_instance_callback=function(tiny){$.each(events,function(name,handlers){$.each(handlers,function(_,handler){tiny.on(name,handler)})})}}
if(tinymce){$target.each(function(_,target){tinymce.remove('#'+target.id)})}
$target.tinymce($.extend(config,overwrite||{}));return $target.data('wysiwyg',!0)};zk.wysiwyg=$.extend(zk.wysiwyg,{TYPE:TYPE,setStaticEvents:function(events){events=normalizeEvents(events);if(typeof tinymce!=='undefined'){$.each(tinymce.get(),function(_,editor){$.each(events,function(name,handlers){$.each(handlers,function(_,handler){editor.on(name,handler)})})})}
staticEvents=mergeEvents(events,staticEvents||{})}})})();zk.onDocumentReady(['forms','location'],function(sVars){if(typeof sVars.autocomplete!=='undefined'){$.each(sVars.autocomplete,function(_,data){zk.locationAutocomplete.init(data.id,data.type,data.ancestor_type,data.ancestor_id)})}});zk.onDocumentReady(['blocks','layout','main_menu'],function(sVars){var register=zk.register({entrance:sVars.registrationEntrance,partner_logo:sVars.partner_logo});var $html=$('html');if($html.hasClass('touch')){$('.js-menu-section-link').toggleTarget({target:'.main-menu__submenu',doubleTap:!0});$('.js-dropdown-container').click(function(){$('.js-dropdown').show()});$html.click(function(){$('.js-dropdown').hide()})}else{$('.js-menu-section').hover(function(){$(this).find('.main-menu__submenu').stop(!0,!0).delay(500).fadeIn(400)},function(){$(this).find('.main-menu__submenu').stop(!0,!0).delay(100).fadeOut(300)})}
$('.js-login-button').click(function(e){e.preventDefault();register.login(function(response){if(response.url){zk.redirect(response.url)}});return !1});$('.js-open-offcanvas').click(function(){zk.get('layout','bottom_bar',function(bottomBar){bottomBar.open()});return !1})});zk.onDocumentReady(['blocks','layout','bottom_bar'],function(sVars){var bottomBar=zk.set(['layout','bottom_bar'],(function(){var output={};var $body=$('body');var $html=$('html');var $bottomBar=$('.js-bottom-bar');var $overflowContainer=$('.js-overflow');var startWindowScroll;output.open=function(){zk.pushState.push('bottomBar',function(){bottomBar.close()});startWindowScroll=$(window).scrollTop();$bottomBar.addClass('is__active');$body.addClass('is__fixed');if($bottomBar.hasClass('js-bottom-bar-anonymous')){$html.addClass('is__fixed');$overflowContainer.addClass('is__anchored')}else{$html.addClass('is__covered').delay(320).queue(function(next){$html.addClass('is__frozen');$overflowContainer.addClass('is__fixed');next()})}
$body.trigger('zk:offcanvas:open')};output.close=function(){if(!$html.is('.is__fixed, .is__covered')){return}
zk.pushState.pop();$html.removeClass('is__fixed is__covered is__frozen');$(window).scrollTop(startWindowScroll);$body.removeClass('is__fixed');$bottomBar.removeClass('is__active');$overflowContainer.removeClass('is__anchored');$body.trigger('zk:offcanvas:close')};return output})());$('.js-see-offcanvas').on('click',function(){bottomBar.open();return !1});$('.js-close').on('click',function(){bottomBar.close();return !1});$(document).on('pjax:success',function(){bottomBar.close()});var $html=$('html');if($html.hasClass('touch')){$('.js-offcanvas-section').toggleTarget({target:'.js-bottom-bar-submenu',doubleTap:!0})}});zk.onDocumentReady(['blocks','layout','sub_sections'],function(sVars){$('[data-toggle]').toggleTarget()});zk.onDocumentReady(['blocks','event','slider_themes'],function(sVars){zk.set(['event','slider','themes'],function(){var output={};output.swiper=function(numSlides){$('#slider-themes').swiper({pagination:'#slider-themes .swiper-pagination',loop:sVars.allowLoop,paginationClickable:!0,nextButton:'#slider-themes .slider__arrow--next',prevButton:'#slider-themes .slider__arrow--prev',slidesPerView:numSlides,loopAdditionalSlides:1,spaceBetween:30,simulateTouch:!1,preloadImages:!1,lazyLoading:!0,lazyLoadingInPrevNext:!0,onSlideChangeStart:function(s){var isIE9=/MSIE [9]/.test(navigator.userAgent);if(s.lazy&&isIE9){var lazyLoadingOnTransitionStart=s.params.lazyLoadingOnTransitionStart;s.params.lazyLoadingOnTransitionStart=!0;s.lazy.onTransitionStart();s.params.lazyLoadingOnTransitionStart=lazyLoadingOnTransitionStart}}})};return output}())});zk.onDocumentReady(['why_zankyou','about_us'],function(sVars){var register=zk.register();$('.js-create-new-account').click(function(e){e.preventDefault();register.setEntrance($(this).data('entrance'));register.register(function(response){if(response.url){zk.redirect(response.url)}});return !1})});zk.onDocumentReady(['why_zankyou','init'],function(sVars){enquire.register(zk.MEDIA_QUERY.MOBILE,{match:function(){var pageHeight=$(window).height();zk.bindGlobalEvent('scroll',function(){var pageScroll=$(document).scrollTop();if(pageScroll>pageHeight){$('#register-landing').addClass('is__active');zk.intercom.showChat({},!0)}else{$('#register-landing').removeClass('is__active');zk.intercom.hideChat()}})},unmatch:function(){zk.intercom.setForcedShow(!1)}});var register=zk.register({entrance:sVars.default_entrance,partner_logo:sVars.partner_logo});var showRegistrationForm=function(entrance){register.setEntrance(entrance);register.register(function(response){if(response.url){zk.redirect(response.url)}})};if(window.location.hash.match(/^#r10n/)){var entrance=sVars.default_entrance;if(window.location.hash.match(/^#r10n=.+/)){entrance=window.location.hash.replace(/^#r10n=/)}
showRegistrationForm(entrance)}
$('.js-create-new-account').click(function(e){e.preventDefault();showRegistrationForm($(this).data('entrance'));return !1});var eventDemos=zk.get('event','slider','themes');enquire.register(zk.MEDIA_QUERY.TABLET_PORTRAIT,{match:function(){if(typeof eventDemos!='undefined'){eventDemos.swiper(3)}}});enquire.register(zk.MEDIA_QUERY.DESKTOP,{match:function(){if(typeof eventDemos!='undefined'){eventDemos.swiper(5)}}});enquire.register(zk.MEDIA_QUERY.MOBILE,{match:function(){if(typeof eventDemos!='undefined'){eventDemos.swiper(1)}
zk.intercom.setForcedShow();var pageHeight=$(window).height();zk.bindGlobalEvent('scroll',function(){var pageScroll=$(document).scrollTop();if(pageScroll>pageHeight){$('#register-landing').addClass('is__active');zk.intercom.showChat({},!0)}else{$('#register-landing').removeClass('is__active');zk.intercom.hideChat()}})},unmatch:function(){zk.intercom.setForcedShow(!1)}})});zk.onDocumentReady(['blocks','why_zankyou','slider'],function(sVars){$('#slider-landing').swiper({pagination:'#slider-landing .swiper-pagination',paginationClickable:!0,nextButton:'#slider-landing .slider__arrow--next',prevButton:'#slider-landing .slider__arrow--prev',simulateTouch:!1,preloadImages:!1,lazyLoading:!0,lazyLoadingInPrevNext:!0,onReachEnd:function(){$('.fake-arrow').removeClass('hide')},onSlideChangeStart:function(s){var isIE9=/MSIE [9]/.test(navigator.userAgent);if(s.lazy&&isIE9){var lazyLoadingOnTransitionStart=s.params.lazyLoadingOnTransitionStart;s.params.lazyLoadingOnTransitionStart=!0;s.lazy.onTransitionStart();s.params.lazyLoadingOnTransitionStart=lazyLoadingOnTransitionStart}}});$('#slider-landing').find('.slider__arrow--prev').on('click',function(){$('.fake-arrow').addClass('hide')})});zk.onDocumentReady(['blocks','layout','flags'],function(sVars){$('.js-language-selector').click(function(e){e.preventDefault();var url=$(this).data('href');zk.redirect(url)});$('.js-flags-button').on('click',function(){zk.popup.open($('#flags-modal-window'));return !1})});zk.onDocumentReady(['blocks','social','share'],function(sVars){var FACEBOOK='fb';var PINTEREST='pin';var baseConfig=$.extend({container:'.social-share',selector_prefix:'#share_',url:document.location.href},sVars.config||{});var _updateContainer=function($container,config){var url=config.url;if($container.closest('[data-social-share-url]').length){url=$container.closest('[data-social-share-url]').data('social-share-url')}
var fb=zk.facebook({});$.each([{url:'/?fields=id,share&id=__ID__',selector_suffix:FACEBOOK},{url:'https://api.pinterest.com/v1/urls/count.json?url=__ID__&callback=?',key:'count',selector_suffix:PINTEREST}],function(_,social){if(social.selector_suffix==FACEBOOK){fb.getSocialShare(social.url.replace('__ID__',url),function(response){if(response&&!response.error&&response.share){_updateShareValue($container,response.share.share_count,social,config)}})}else{$.getJSON(social.url.replace('__ID__',url),function(response){_updateShareValue($container,response[social.key],social,config)})}})};var _compactCount=function(num){if(num>=1000000){return(num/1000000).toFixed(1)+'M'}else if(num>=1000){return(num/1000).toFixed(1)+'k'}
return num};var _updateShareValue=function($container,value,social,config){var count=Math.max(0,value||0);$container.find(config.selector_prefix+social.selector_suffix).html(_compactCount(count)).attr('data-number',count);var $shareTotalContainer=$container.find('.card__share-total');var shareTotal=parseInt($shareTotalContainer.attr('data-number'));$shareTotalContainer.html(_compactCount(shareTotal+count)).attr('data-number',shareTotal+count)};var socialBlock=zk.set(['blocks','social','share'],function(){var output={};output.execute=function($context,config){$context=$context||$('body');config=$.extend(baseConfig,config||{});$(".js-open-popup",$context).click(function(e){e.preventDefault();var link=$(this).data("href");window.open(link,"name","height=500,width=350")});$(config.container,$context).each(function(_,target){_updateContainer($(target),config)})};return output}());socialBlock.execute()});zk.onDocumentReady(['blocks','layout','scroll_up'],function(sVars){var windowHeight=$(window).height();zk.bindGlobalEvent('scroll',function(e){var currentCoordinateY=$(window).scrollTop();if(currentCoordinateY>windowHeight&&!$('#lyt-to-top').is(':visible')){$('#lyt-to-top').fadeIn()}else if(currentCoordinateY<=windowHeight&&$('#lyt-to-top').is(':visible')){$('#lyt-to-top').fadeOut()}});$('#lyt-to-top').click(function(){$('html,body').animate({scrollTop:0},'fast','swing')})});zk.onDocumentReady(['layouts','common'],function(sVars){if(navigator.maxTouchPoints>0){$('html').removeClass('no-touch').addClass('touch')}
if(typeof Modernizr!='undefined'&&!Modernizr.touch){$("[class*=js-tooltip]").each(function(){var placement=/js-tooltip-(top|right|bottom|left)/.exec($(this).attr('class'));$(this).tooltip({placement:!placement?'bottom':placement[1]})})}
$('form').each(function(_,form){$(form).preventDoubleSubmission();zk.datepicker($('.datepicker',form))});$(document).on('click','[data-zk-message]',function(e){zk.message($(this));e.preventDefault()});zk.pjax.init();zk.intercom.init();zk.cookieSession().init();if(!$('#smartbanner').length){$.smartbanner({daysHidden:1,button:sVars.translate.view,title:sVars.appName})}
$('.js-open-popup').on('click',function(){zk.popup.open($(this).attr('href'));return !1});(function(){$('.js-contact').click(function(e){var defaultMessage=$(this).data('chat-message')||'';zk.intercom.newMessage(defaultMessage)})})();(function(){$('.js-amazon-gifcard').on({mouseover:function(){if($(this).find('.special-tooltip').text()==''){$(this).find('.special-tooltip').text(sVars.translate.amazon_giftcard_legal_mention)};$(this).find('.special-tooltip').addClass('show')},mouseleave:function(){$(this).find('.special-tooltip').removeClass('show')}})})()});zk.onDocumentReady(['blocks','layout','chat'],function(sVars){config={};if(sVars.settings){config=sVars.settings}
if(sVars.show&&!config.custom_launcher_selector){zk.intercom.showChat(config)}else{zk.intercom.hideChat(config)}});zk.onWindowLoad(['layouts','print'],function(sVars){if(sVars.show_print_prompt){window.print()}})